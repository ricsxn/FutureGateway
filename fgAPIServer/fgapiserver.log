20170913 07:44:23 DEBUG ./fgapiserver.py:101 fgapiserver <module> - fgAPIServer is starting ...
20170913 07:44:23 DEBUG ./fgapiserver.py:102 fgapiserver <module> - Configuration messages ...
FutureGateway API Server config
----------------------------------
{
    "fgapisrv_lnkptvflag": "True", 
    "fgapisrv_secret": "0123456789ABCDEF", 
    "fgjson_indent": "4", 
    "fgapisrv_ptvuser": "tokenver_user", 
    "fgapisrv_host": "0.0.0.0", 
    "fgapisrv_db_host": "localhost", 
    "fgapisrv_notoken": "False", 
    "fgapisrv_key": "", 
    "fgapisrv_db_name": "fgapiserver", 
    "fgapisrv_debug": "True", 
    "fgapisrv_crt": "", 
    "fgapisrv_ptvdefgrp": "administrator", 
    "fgapiserver_name": "FutureGateway API Server", 
    "fgapisrv_geappid": "10000", 
    "fgapiver": "v1.0", 
    "fgapisrv_ptvdefusr": "futuregateway", 
    "fgapisrv_logcfg": "fgapiserver_log.conf", 
    "fgapisrv_port": "8888", 
    "fgapisrv_ptvendpoint": "http://localhost:8889/checktoken", 
    "fgapisrv_iosandbox": "/tmp", 
    "fgapisrv_db_port": "3306", 
    "fgapisrv_dbver": "0.0.10", 
    "fgapisrv_ptvpass": "tokenver_pass", 
    "fgapisrv_db_pass": "fgapiserver_password", 
    "fgapisrv_ptvmapfile": "fgapiserver_ptvmap.json", 
    "fgapisrv_notokenusr": "test", 
    "fgapisrv_db_user": "fgapiserver"
}

20170913 07:44:23 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:115 fgapiserverdb __init__ - [DB settings]
 host: 'localhost'
 port: '3306'
 user: 'fgapiserver'
 pass: 'fgapiserver_password'
 name: 'fgapiserver'
 iosandbox_dir: '/tmp'
 geapiserverappid: '10000'

20170913 07:44:23 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:205 fgapiserverdb get_db_version - select version from db_patches order by id desc limit 1;
20170913 07:44:23 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
fgapiserver DB schema version: '0.0.10'
20170913 07:44:23 DEBUG ./fgapiserver.py:180 fgapiserver check_db_ver - Check database version passed
20170913 07:44:23 INFO /home/futuregateway/devel/fgAPIServer/venv/local/lib/python2.7/site-packages/werkzeug/_internal.py:87 _internal _log -  * Running on http://0.0.0.0:8888/ (Press CTRL+C to quit)
20170913 07:44:23 INFO /home/futuregateway/devel/fgAPIServer/venv/local/lib/python2.7/site-packages/werkzeug/_internal.py:87 _internal _log -  * Restarting with stat
20170913 07:44:23 DEBUG ./fgapiserver.py:101 fgapiserver <module> - fgAPIServer is starting ...
20170913 07:44:23 DEBUG ./fgapiserver.py:102 fgapiserver <module> - Configuration messages ...
FutureGateway API Server config
----------------------------------
{
    "fgapisrv_lnkptvflag": "True", 
    "fgapisrv_secret": "0123456789ABCDEF", 
    "fgjson_indent": "4", 
    "fgapisrv_ptvuser": "tokenver_user", 
    "fgapisrv_host": "0.0.0.0", 
    "fgapisrv_db_host": "localhost", 
    "fgapisrv_notoken": "False", 
    "fgapisrv_key": "", 
    "fgapisrv_db_name": "fgapiserver", 
    "fgapisrv_debug": "True", 
    "fgapisrv_crt": "", 
    "fgapisrv_ptvdefgrp": "administrator", 
    "fgapiserver_name": "FutureGateway API Server", 
    "fgapisrv_geappid": "10000", 
    "fgapiver": "v1.0", 
    "fgapisrv_ptvdefusr": "futuregateway", 
    "fgapisrv_logcfg": "fgapiserver_log.conf", 
    "fgapisrv_port": "8888", 
    "fgapisrv_ptvendpoint": "http://localhost:8889/checktoken", 
    "fgapisrv_iosandbox": "/tmp", 
    "fgapisrv_db_port": "3306", 
    "fgapisrv_dbver": "0.0.10", 
    "fgapisrv_ptvpass": "tokenver_pass", 
    "fgapisrv_db_pass": "fgapiserver_password", 
    "fgapisrv_ptvmapfile": "fgapiserver_ptvmap.json", 
    "fgapisrv_notokenusr": "test", 
    "fgapisrv_db_user": "fgapiserver"
}

20170913 07:44:23 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:115 fgapiserverdb __init__ - [DB settings]
 host: 'localhost'
 port: '3306'
 user: 'fgapiserver'
 pass: 'fgapiserver_password'
 name: 'fgapiserver'
 iosandbox_dir: '/tmp'
 geapiserverappid: '10000'

20170913 07:44:23 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:205 fgapiserverdb get_db_version - select version from db_patches order by id desc limit 1;
20170913 07:44:23 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
fgapiserver DB schema version: '0.0.10'
20170913 07:44:23 DEBUG ./fgapiserver.py:180 fgapiserver check_db_ver - Check database version passed
20170913 07:44:23 WARNING /home/futuregateway/devel/fgAPIServer/venv/local/lib/python2.7/site-packages/werkzeug/_internal.py:87 _internal _log -  * Debugger is active!
20170913 07:44:23 INFO /home/futuregateway/devel/fgAPIServer/venv/local/lib/python2.7/site-packages/werkzeug/_internal.py:87 _internal _log -  * Debugger PIN: 313-879-212
20170913 07:46:16 INFO /home/futuregateway/devel/fgAPIServer/venv/local/lib/python2.7/site-packages/werkzeug/_internal.py:87 _internal _log -  * Detected change in '/home/futuregateway/devel/fgAPIServer/fgapiserverdb.py', reloading
20170913 07:46:16 INFO /home/futuregateway/devel/fgAPIServer/venv/local/lib/python2.7/site-packages/werkzeug/_internal.py:87 _internal _log -  * Restarting with stat
20170913 07:46:16 DEBUG ./fgapiserver.py:101 fgapiserver <module> - fgAPIServer is starting ...
20170913 07:46:16 DEBUG ./fgapiserver.py:102 fgapiserver <module> - Configuration messages ...
FutureGateway API Server config
----------------------------------
{
    "fgapisrv_lnkptvflag": "True", 
    "fgapisrv_secret": "0123456789ABCDEF", 
    "fgjson_indent": "4", 
    "fgapisrv_ptvuser": "tokenver_user", 
    "fgapisrv_host": "0.0.0.0", 
    "fgapisrv_db_host": "localhost", 
    "fgapisrv_notoken": "False", 
    "fgapisrv_key": "", 
    "fgapisrv_db_name": "fgapiserver", 
    "fgapisrv_debug": "True", 
    "fgapisrv_crt": "", 
    "fgapisrv_ptvdefgrp": "administrator", 
    "fgapiserver_name": "FutureGateway API Server", 
    "fgapisrv_geappid": "10000", 
    "fgapiver": "v1.0", 
    "fgapisrv_ptvdefusr": "futuregateway", 
    "fgapisrv_logcfg": "fgapiserver_log.conf", 
    "fgapisrv_port": "8888", 
    "fgapisrv_ptvendpoint": "http://localhost:8889/checktoken", 
    "fgapisrv_iosandbox": "/tmp", 
    "fgapisrv_db_port": "3306", 
    "fgapisrv_dbver": "0.0.10", 
    "fgapisrv_ptvpass": "tokenver_pass", 
    "fgapisrv_db_pass": "fgapiserver_password", 
    "fgapisrv_ptvmapfile": "fgapiserver_ptvmap.json", 
    "fgapisrv_notokenusr": "test", 
    "fgapisrv_db_user": "fgapiserver"
}

20170913 07:46:16 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:115 fgapiserverdb __init__ - [DB settings]
 host: 'localhost'
 port: '3306'
 user: 'fgapiserver'
 pass: 'fgapiserver_password'
 name: 'fgapiserver'
 iosandbox_dir: '/tmp'
 geapiserverappid: '10000'

20170913 07:46:16 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:205 fgapiserverdb get_db_version - select version from db_patches order by id desc limit 1;
20170913 07:46:16 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
fgapiserver DB schema version: '0.0.10'
20170913 07:46:16 DEBUG ./fgapiserver.py:180 fgapiserver check_db_ver - Check database version passed
20170913 07:46:16 WARNING /home/futuregateway/devel/fgAPIServer/venv/local/lib/python2.7/site-packages/werkzeug/_internal.py:87 _internal _log -  * Debugger is active!
20170913 07:46:16 INFO /home/futuregateway/devel/fgAPIServer/venv/local/lib/python2.7/site-packages/werkzeug/_internal.py:87 _internal _log -  * Debugger PIN: 313-879-212
20170913 13:15:40 INFO /home/futuregateway/devel/fgAPIServer/venv/local/lib/python2.7/site-packages/werkzeug/_internal.py:87 _internal _log -  * Detected change in '/home/futuregateway/devel/fgAPIServer/fgapiserverdb.py', reloading
20170913 13:15:40 INFO /home/futuregateway/devel/fgAPIServer/venv/local/lib/python2.7/site-packages/werkzeug/_internal.py:87 _internal _log -  * Restarting with stat
20170913 13:15:41 DEBUG ./fgapiserver.py:101 fgapiserver <module> - fgAPIServer is starting ...
20170913 13:15:41 DEBUG ./fgapiserver.py:102 fgapiserver <module> - Configuration messages ...
FutureGateway API Server config
----------------------------------
{
    "fgapisrv_lnkptvflag": "True", 
    "fgapisrv_secret": "0123456789ABCDEF", 
    "fgjson_indent": "4", 
    "fgapisrv_ptvuser": "tokenver_user", 
    "fgapisrv_host": "0.0.0.0", 
    "fgapisrv_db_host": "localhost", 
    "fgapisrv_notoken": "False", 
    "fgapisrv_key": "", 
    "fgapisrv_db_name": "fgapiserver", 
    "fgapisrv_debug": "True", 
    "fgapisrv_crt": "", 
    "fgapisrv_ptvdefgrp": "administrator", 
    "fgapiserver_name": "FutureGateway API Server", 
    "fgapisrv_geappid": "10000", 
    "fgapiver": "v1.0", 
    "fgapisrv_ptvdefusr": "futuregateway", 
    "fgapisrv_logcfg": "fgapiserver_log.conf", 
    "fgapisrv_port": "8888", 
    "fgapisrv_ptvendpoint": "http://localhost:8889/checktoken", 
    "fgapisrv_iosandbox": "/tmp", 
    "fgapisrv_db_port": "3306", 
    "fgapisrv_dbver": "0.0.10", 
    "fgapisrv_ptvpass": "tokenver_pass", 
    "fgapisrv_db_pass": "fgapiserver_password", 
    "fgapisrv_ptvmapfile": "fgapiserver_ptvmap.json", 
    "fgapisrv_notokenusr": "test", 
    "fgapisrv_db_user": "fgapiserver"
}

20170913 13:15:41 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:115 fgapiserverdb __init__ - [DB settings]
 host: 'localhost'
 port: '3306'
 user: 'fgapiserver'
 pass: 'fgapiserver_password'
 name: 'fgapiserver'
 iosandbox_dir: '/tmp'
 geapiserverappid: '10000'

20170913 13:15:41 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:205 fgapiserverdb get_db_version - select version from db_patches order by id desc limit 1;
20170913 13:15:41 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
fgapiserver DB schema version: '0.0.10'
20170913 13:15:41 DEBUG ./fgapiserver.py:180 fgapiserver check_db_ver - Check database version passed
20170913 13:15:41 WARNING /home/futuregateway/devel/fgAPIServer/venv/local/lib/python2.7/site-packages/werkzeug/_internal.py:87 _internal _log -  * Debugger is active!
20170913 13:15:41 INFO /home/futuregateway/devel/fgAPIServer/venv/local/lib/python2.7/site-packages/werkzeug/_internal.py:87 _internal _log -  * Debugger PIN: 313-879-212
20170914 13:49:30 DEBUG ./fgapiserver_ptv.py:87 fgapiserver_ptv <module> - Configuration messages ...
FutureGateway API Server config
----------------------------------
{
    "fgapisrv_lnkptvflag": "True", 
    "fgapisrv_secret": "0123456789ABCDEF", 
    "fgjson_indent": "4", 
    "fgapisrv_ptvuser": "tokenver_user", 
    "fgapisrv_host": "0.0.0.0", 
    "fgapisrv_db_host": "localhost", 
    "fgapisrv_notoken": "False", 
    "fgapisrv_key": "", 
    "fgapisrv_db_name": "fgapiserver", 
    "fgapisrv_debug": "True", 
    "fgapisrv_crt": "", 
    "fgapisrv_ptvdefgrp": "administrator", 
    "fgapiserver_name": "FutureGateway API Server", 
    "fgapisrv_geappid": "10000", 
    "fgapiver": "v1.0", 
    "fgapisrv_ptvdefusr": "futuregateway", 
    "fgapisrv_logcfg": "fgapiserver_log.conf", 
    "fgapisrv_port": "8888", 
    "fgapisrv_ptvendpoint": "http://localhost:8889/checktoken", 
    "fgapisrv_iosandbox": "/tmp", 
    "fgapisrv_db_port": "3306", 
    "fgapisrv_dbver": "0.0.10", 
    "fgapisrv_ptvpass": "tokenver_pass", 
    "fgapisrv_db_pass": "fgapiserver_password", 
    "fgapisrv_ptvmapfile": "fgapiserver_ptvmap.json", 
    "fgapisrv_notokenusr": "test", 
    "fgapisrv_db_user": "fgapiserver"
}

20170914 13:49:31 INFO /home/futuregateway/devel/fgAPIServer/venv/local/lib/python2.7/site-packages/werkzeug/_internal.py:87 _internal _log -  * Running on http://0.0.0.0:8889/ (Press CTRL+C to quit)
20170914 13:49:31 INFO /home/futuregateway/devel/fgAPIServer/venv/local/lib/python2.7/site-packages/werkzeug/_internal.py:87 _internal _log -  * Restarting with stat
20170914 13:49:31 DEBUG ./fgapiserver_ptv.py:87 fgapiserver_ptv <module> - Configuration messages ...
FutureGateway API Server config
----------------------------------
{
    "fgapisrv_lnkptvflag": "True", 
    "fgapisrv_secret": "0123456789ABCDEF", 
    "fgjson_indent": "4", 
    "fgapisrv_ptvuser": "tokenver_user", 
    "fgapisrv_host": "0.0.0.0", 
    "fgapisrv_db_host": "localhost", 
    "fgapisrv_notoken": "False", 
    "fgapisrv_key": "", 
    "fgapisrv_db_name": "fgapiserver", 
    "fgapisrv_debug": "True", 
    "fgapisrv_crt": "", 
    "fgapisrv_ptvdefgrp": "administrator", 
    "fgapiserver_name": "FutureGateway API Server", 
    "fgapisrv_geappid": "10000", 
    "fgapiver": "v1.0", 
    "fgapisrv_ptvdefusr": "futuregateway", 
    "fgapisrv_logcfg": "fgapiserver_log.conf", 
    "fgapisrv_port": "8888", 
    "fgapisrv_ptvendpoint": "http://localhost:8889/checktoken", 
    "fgapisrv_iosandbox": "/tmp", 
    "fgapisrv_db_port": "3306", 
    "fgapisrv_dbver": "0.0.10", 
    "fgapisrv_ptvpass": "tokenver_pass", 
    "fgapisrv_db_pass": "fgapiserver_password", 
    "fgapisrv_ptvmapfile": "fgapiserver_ptvmap.json", 
    "fgapisrv_notokenusr": "test", 
    "fgapisrv_db_user": "fgapiserver"
}

20170914 13:49:31 WARNING /home/futuregateway/devel/fgAPIServer/venv/local/lib/python2.7/site-packages/werkzeug/_internal.py:87 _internal _log -  * Debugger is active!
20170914 13:49:31 INFO /home/futuregateway/devel/fgAPIServer/venv/local/lib/python2.7/site-packages/werkzeug/_internal.py:87 _internal _log -  * Debugger PIN: 313-879-212
20170914 13:53:39 INFO /home/futuregateway/devel/fgAPIServer/venv/local/lib/python2.7/site-packages/werkzeug/_internal.py:87 _internal _log - 127.0.0.1 - - [14/Sep/2017 13:53:39] "POST /get-token HTTP/1.1" 200 -
20170914 13:55:45 INFO /home/futuregateway/devel/fgAPIServer/venv/local/lib/python2.7/site-packages/werkzeug/_internal.py:87 _internal _log - 127.0.0.1 - - [14/Sep/2017 13:55:45] "GET /deployments HTTP/1.1" 404 -
20170914 13:56:00 INFO /home/futuregateway/devel/fgAPIServer/venv/local/lib/python2.7/site-packages/werkzeug/_internal.py:87 _internal _log - 127.0.0.1 - - [14/Sep/2017 13:56:00] "GET /orchestrator/deployments HTTP/1.1" 405 -
20170914 13:56:46 INFO /home/futuregateway/devel/fgAPIServer/venv/local/lib/python2.7/site-packages/werkzeug/_internal.py:87 _internal _log - 127.0.0.1 - - [14/Sep/2017 13:56:46] "GET /orchestrator/deployments HTTP/1.1" 405 -
20170914 13:56:59 INFO /home/futuregateway/devel/fgAPIServer/venv/local/lib/python2.7/site-packages/werkzeug/_internal.py:87 _internal _log - 127.0.0.1 - - [14/Sep/2017 13:56:59] "GET /orchestrator/deployments HTTP/1.1" 405 -
20170914 13:57:25 INFO /home/futuregateway/devel/fgAPIServer/venv/local/lib/python2.7/site-packages/werkzeug/_internal.py:87 _internal _log - 127.0.0.1 - - [14/Sep/2017 13:57:25] "GET /orchestrator/deployments HTTP/1.1" 405 -
20170914 13:57:43 INFO /home/futuregateway/devel/fgAPIServer/venv/local/lib/python2.7/site-packages/werkzeug/_internal.py:87 _internal _log - 127.0.0.1 - - [14/Sep/2017 13:57:43] "GET /orchestrator/deployments/ HTTP/1.1" 404 -
20170914 13:57:46 INFO /home/futuregateway/devel/fgAPIServer/venv/local/lib/python2.7/site-packages/werkzeug/_internal.py:87 _internal _log - 127.0.0.1 - - [14/Sep/2017 13:57:46] "GET /orchestrator/deployments HTTP/1.1" 405 -
20170914 13:58:56 INFO /home/futuregateway/devel/fgAPIServer/venv/local/lib/python2.7/site-packages/werkzeug/_internal.py:87 _internal _log - 127.0.0.1 - - [14/Sep/2017 13:58:56] "GET /orchestrator/deployments HTTP/1.1" 405 -
20170914 13:59:14 INFO /home/futuregateway/devel/fgAPIServer/venv/local/lib/python2.7/site-packages/werkzeug/_internal.py:87 _internal _log - 127.0.0.1 - - [14/Sep/2017 13:59:14] "GET /orchestrator/deployments/11 HTTP/1.1" 200 -
20170914 13:59:34 INFO /home/futuregateway/devel/fgAPIServer/venv/local/lib/python2.7/site-packages/werkzeug/_internal.py:87 _internal _log - 127.0.0.1 - - [14/Sep/2017 13:59:34] "GET /orchestrator/deployments HTTP/1.1" 405 -
20170914 13:59:46 INFO /home/futuregateway/devel/fgAPIServer/venv/local/lib/python2.7/site-packages/werkzeug/_internal.py:87 _internal _log - 127.0.0.1 - - [14/Sep/2017 13:59:46] "POST /orchestrator/deployments HTTP/1.1" 201 -
20170914 13:59:55 INFO /home/futuregateway/devel/fgAPIServer/venv/local/lib/python2.7/site-packages/werkzeug/_internal.py:87 _internal _log - 127.0.0.1 - - [14/Sep/2017 13:59:55] "GET /orchestrator/deployments/11 HTTP/1.1" 200 -
20170914 14:00:24 INFO /home/futuregateway/devel/fgAPIServer/venv/local/lib/python2.7/site-packages/werkzeug/_internal.py:87 _internal _log - 127.0.0.1 - - [14/Sep/2017 14:00:24] "GET /orchestrator/deployments/11 HTTP/1.1" 200 -
20170915 07:35:06 INFO /home/futuregateway/devel/fgAPIServer/venv/local/lib/python2.7/site-packages/werkzeug/_internal.py:87 _internal _log -  * Detected change in '/home/futuregateway/devel/fgAPIServer/fgapiserverdb.py', reloading
20170915 07:35:06 INFO /home/futuregateway/devel/fgAPIServer/venv/local/lib/python2.7/site-packages/werkzeug/_internal.py:87 _internal _log -  * Restarting with stat
20170919 08:03:27 DEBUG ./fgapiserver.py:101 fgapiserver <module> - fgAPIServer is starting ...
20170919 08:03:27 DEBUG ./fgapiserver.py:102 fgapiserver <module> - Configuration messages ...
FutureGateway API Server config
----------------------------------
{
    "fgapisrv_lnkptvflag": "True", 
    "fgapisrv_secret": "0123456789ABCDEF", 
    "fgjson_indent": "4", 
    "fgapisrv_ptvuser": "tokenver_user", 
    "fgapisrv_host": "0.0.0.0", 
    "fgapisrv_db_host": "localhost", 
    "fgapisrv_notoken": "False", 
    "fgapisrv_key": "", 
    "fgapisrv_db_name": "fgapiserver", 
    "fgapisrv_debug": "True", 
    "fgapisrv_crt": "", 
    "fgapisrv_ptvdefgrp": "administrator", 
    "fgapiserver_name": "FutureGateway API Server", 
    "fgapisrv_geappid": "10000", 
    "fgapiver": "v1.0", 
    "fgapisrv_ptvdefusr": "futuregateway", 
    "fgapisrv_logcfg": "fgapiserver_log.conf", 
    "fgapisrv_port": "8888", 
    "fgapisrv_ptvendpoint": "http://localhost:8889/checktoken", 
    "fgapisrv_iosandbox": "/tmp", 
    "fgapisrv_db_port": "3306", 
    "fgapisrv_dbver": "0.0.10", 
    "fgapisrv_ptvpass": "tokenver_pass", 
    "fgapisrv_db_pass": "fgapiserver_password", 
    "fgapisrv_ptvmapfile": "fgapiserver_ptvmap.json", 
    "fgapisrv_notokenusr": "test", 
    "fgapisrv_db_user": "fgapiserver"
}

20170919 08:03:27 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:115 fgapiserverdb __init__ - [DB settings]
 host: 'localhost'
 port: '3306'
 user: 'fgapiserver'
 pass: 'fgapiserver_password'
 name: 'fgapiserver'
 iosandbox_dir: '/tmp'
 geapiserverappid: '10000'

20170919 08:03:27 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:205 fgapiserverdb get_db_version - select version from db_patches order by id desc limit 1;
20170919 08:03:27 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
fgapiserver DB schema version: '0.0.10'
20170919 08:03:27 DEBUG ./fgapiserver.py:180 fgapiserver check_db_ver - Check database version passed
20170919 08:03:27 INFO /home/futuregateway/devel/fgAPIServer/venv/local/lib/python2.7/site-packages/werkzeug/_internal.py:87 _internal _log -  * Running on http://0.0.0.0:8888/ (Press CTRL+C to quit)
20170919 08:03:27 INFO /home/futuregateway/devel/fgAPIServer/venv/local/lib/python2.7/site-packages/werkzeug/_internal.py:87 _internal _log -  * Restarting with stat
20170919 08:03:27 DEBUG ./fgapiserver.py:101 fgapiserver <module> - fgAPIServer is starting ...
20170919 08:03:27 DEBUG ./fgapiserver.py:102 fgapiserver <module> - Configuration messages ...
FutureGateway API Server config
----------------------------------
{
    "fgapisrv_lnkptvflag": "True", 
    "fgapisrv_secret": "0123456789ABCDEF", 
    "fgjson_indent": "4", 
    "fgapisrv_ptvuser": "tokenver_user", 
    "fgapisrv_host": "0.0.0.0", 
    "fgapisrv_db_host": "localhost", 
    "fgapisrv_notoken": "False", 
    "fgapisrv_key": "", 
    "fgapisrv_db_name": "fgapiserver", 
    "fgapisrv_debug": "True", 
    "fgapisrv_crt": "", 
    "fgapisrv_ptvdefgrp": "administrator", 
    "fgapiserver_name": "FutureGateway API Server", 
    "fgapisrv_geappid": "10000", 
    "fgapiver": "v1.0", 
    "fgapisrv_ptvdefusr": "futuregateway", 
    "fgapisrv_logcfg": "fgapiserver_log.conf", 
    "fgapisrv_port": "8888", 
    "fgapisrv_ptvendpoint": "http://localhost:8889/checktoken", 
    "fgapisrv_iosandbox": "/tmp", 
    "fgapisrv_db_port": "3306", 
    "fgapisrv_dbver": "0.0.10", 
    "fgapisrv_ptvpass": "tokenver_pass", 
    "fgapisrv_db_pass": "fgapiserver_password", 
    "fgapisrv_ptvmapfile": "fgapiserver_ptvmap.json", 
    "fgapisrv_notokenusr": "test", 
    "fgapisrv_db_user": "fgapiserver"
}

20170919 08:03:27 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:115 fgapiserverdb __init__ - [DB settings]
 host: 'localhost'
 port: '3306'
 user: 'fgapiserver'
 pass: 'fgapiserver_password'
 name: 'fgapiserver'
 iosandbox_dir: '/tmp'
 geapiserverappid: '10000'

20170919 08:03:27 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:205 fgapiserverdb get_db_version - select version from db_patches order by id desc limit 1;
20170919 08:03:27 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
fgapiserver DB schema version: '0.0.10'
20170919 08:03:27 DEBUG ./fgapiserver.py:180 fgapiserver check_db_ver - Check database version passed
20170919 08:03:27 WARNING /home/futuregateway/devel/fgAPIServer/venv/local/lib/python2.7/site-packages/werkzeug/_internal.py:87 _internal _log -  * Debugger is active!
20170919 08:03:27 INFO /home/futuregateway/devel/fgAPIServer/venv/local/lib/python2.7/site-packages/werkzeug/_internal.py:87 _internal _log -  * Debugger PIN: 313-879-212
20170919 08:04:15 DEBUG ./fgapiserver.py:101 fgapiserver <module> - fgAPIServer is starting ...
20170919 08:04:15 DEBUG ./fgapiserver.py:102 fgapiserver <module> - Configuration messages ...
FutureGateway API Server config
----------------------------------
{
    "fgapisrv_lnkptvflag": "True", 
    "fgapisrv_secret": "0123456789ABCDEF", 
    "fgjson_indent": "4", 
    "fgapisrv_ptvuser": "tokenver_user", 
    "fgapisrv_host": "0.0.0.0", 
    "fgapisrv_db_host": "localhost", 
    "fgapisrv_notoken": "False", 
    "fgapisrv_key": "", 
    "fgapisrv_db_name": "fgapiserver", 
    "fgapisrv_debug": "True", 
    "fgapisrv_crt": "", 
    "fgapisrv_ptvdefgrp": "administrator", 
    "fgapiserver_name": "FutureGateway API Server", 
    "fgapisrv_geappid": "10000", 
    "fgapiver": "v1.0", 
    "fgapisrv_ptvdefusr": "futuregateway", 
    "fgapisrv_logcfg": "fgapiserver_log.conf", 
    "fgapisrv_port": "8888", 
    "fgapisrv_ptvendpoint": "http://localhost:8889/checktoken", 
    "fgapisrv_iosandbox": "/tmp", 
    "fgapisrv_db_port": "3306", 
    "fgapisrv_dbver": "0.0.10", 
    "fgapisrv_ptvpass": "tokenver_pass", 
    "fgapisrv_db_pass": "fgapiserver_password", 
    "fgapisrv_ptvmapfile": "fgapiserver_ptvmap.json", 
    "fgapisrv_notokenusr": "test", 
    "fgapisrv_db_user": "fgapiserver"
}

20170919 08:04:15 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:115 fgapiserverdb __init__ - [DB settings]
 host: 'localhost'
 port: '3306'
 user: 'fgapiserver'
 pass: 'fgapiserver_password'
 name: 'fgapiserver'
 iosandbox_dir: '/tmp'
 geapiserverappid: '10000'

20170919 08:04:15 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:205 fgapiserverdb get_db_version - select version from db_patches order by id desc limit 1;
20170919 08:04:15 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
fgapiserver DB schema version: '0.0.10'
20170919 08:04:15 DEBUG ./fgapiserver.py:180 fgapiserver check_db_ver - Check database version passed
20170919 08:04:15 INFO /home/futuregateway/devel/fgAPIServer/venv/local/lib/python2.7/site-packages/werkzeug/_internal.py:87 _internal _log -  * Running on http://0.0.0.0:8888/ (Press CTRL+C to quit)
20170919 08:04:15 INFO /home/futuregateway/devel/fgAPIServer/venv/local/lib/python2.7/site-packages/werkzeug/_internal.py:87 _internal _log -  * Restarting with stat
20170919 08:04:15 DEBUG ./fgapiserver.py:101 fgapiserver <module> - fgAPIServer is starting ...
20170919 08:04:15 DEBUG ./fgapiserver.py:102 fgapiserver <module> - Configuration messages ...
FutureGateway API Server config
----------------------------------
{
    "fgapisrv_lnkptvflag": "True", 
    "fgapisrv_secret": "0123456789ABCDEF", 
    "fgjson_indent": "4", 
    "fgapisrv_ptvuser": "tokenver_user", 
    "fgapisrv_host": "0.0.0.0", 
    "fgapisrv_db_host": "localhost", 
    "fgapisrv_notoken": "False", 
    "fgapisrv_key": "", 
    "fgapisrv_db_name": "fgapiserver", 
    "fgapisrv_debug": "True", 
    "fgapisrv_crt": "", 
    "fgapisrv_ptvdefgrp": "administrator", 
    "fgapiserver_name": "FutureGateway API Server", 
    "fgapisrv_geappid": "10000", 
    "fgapiver": "v1.0", 
    "fgapisrv_ptvdefusr": "futuregateway", 
    "fgapisrv_logcfg": "fgapiserver_log.conf", 
    "fgapisrv_port": "8888", 
    "fgapisrv_ptvendpoint": "http://localhost:8889/checktoken", 
    "fgapisrv_iosandbox": "/tmp", 
    "fgapisrv_db_port": "3306", 
    "fgapisrv_dbver": "0.0.10", 
    "fgapisrv_ptvpass": "tokenver_pass", 
    "fgapisrv_db_pass": "fgapiserver_password", 
    "fgapisrv_ptvmapfile": "fgapiserver_ptvmap.json", 
    "fgapisrv_notokenusr": "test", 
    "fgapisrv_db_user": "fgapiserver"
}

20170919 08:04:15 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:115 fgapiserverdb __init__ - [DB settings]
 host: 'localhost'
 port: '3306'
 user: 'fgapiserver'
 pass: 'fgapiserver_password'
 name: 'fgapiserver'
 iosandbox_dir: '/tmp'
 geapiserverappid: '10000'

20170919 08:04:15 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:205 fgapiserverdb get_db_version - select version from db_patches order by id desc limit 1;
20170919 08:04:15 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
fgapiserver DB schema version: '0.0.10'
20170919 08:04:15 DEBUG ./fgapiserver.py:180 fgapiserver check_db_ver - Check database version passed
20170919 08:04:15 WARNING /home/futuregateway/devel/fgAPIServer/venv/local/lib/python2.7/site-packages/werkzeug/_internal.py:87 _internal _log -  * Debugger is active!
20170919 08:04:15 INFO /home/futuregateway/devel/fgAPIServer/venv/local/lib/python2.7/site-packages/werkzeug/_internal.py:87 _internal _log -  * Debugger PIN: 313-879-212
20170919 08:04:21 DEBUG ./fgapiserver.py:418 fgapiserver load_user - LoadUser: begin
20170919 08:04:21 DEBUG ./fgapiserver.py:430 fgapiserver load_user - LoadUser: using token
20170919 08:04:21 DEBUG ./fgapiserver.py:434 fgapiserver load_user - LoadUser: token is 'Bearer TEST_TOKEN'
20170919 08:04:21 DEBUG ./fgapiserver.py:439 fgapiserver load_user - LoadUser: (PTV)
20170919 08:04:21 DEBUG ./fgapiserver.py:459 fgapiserver load_user - LoadUser: token field is 'TEST_TOKEN'
20170919 08:04:21 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverptv.py:94 fgapiserverptv __init__ - Initializing PTV with:
  Endpoint: 'http://localhost:8889/checktoken'
  Username: 'tokenver_user'
  Password: 'tokenver_pass'

20170919 08:04:21 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverptv.py:114 fgapiserverptv validate_token - Validating token: 'TEST_TOKEN'
20170919 08:04:21 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverptv.py:115 fgapiserverptv validate_token - Connecting PTV service: 'http://localhost:8889/checktoken'
20170919 08:04:22 INFO /home/futuregateway/devel/fgAPIServer/venv/local/lib/python2.7/site-packages/werkzeug/_internal.py:87 _internal _log - 127.0.0.1 - - [19/Sep/2017 08:04:22] "POST /checktoken HTTP/1.1" 200 -
20170919 08:04:22 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverptv.py:129 fgapiserverptv validate_token - Retrieved token info:
{u'error': None, u'_links': [{u'href': u'/checktoken', u'rel': u'self'}], u'groups': [u'Users', u'Developers'], u'subject': u'00000000-0000-0000-0000-000000000000'}
20170919 08:04:22 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverptv.py:150 fgapiserverptv validate_token - Validated token:
{'portal_validate': True, 'portal_group': '', 'portal_user': '', 'portal_groups': [u'Users', u'Developers'], 'portal_subject': u'00000000-0000-0000-0000-000000000000'}
20170919 08:04:22 DEBUG ./fgapiserver.py:464 fgapiserver load_user - LoadUser: validate_token: '{'portal_validate': True, 'portal_group': '', 'portal_user': '', 'portal_groups': [u'Users', u'Developers'], 'portal_subject': u'00000000-0000-0000-0000-000000000000'}'
20170919 08:04:22 DEBUG ./fgapiserver.py:479 fgapiserver load_user - LoadUser: portal_user: 
portal_group: 
portal_groups: [u'Users', u'Developers']
portal_subject: 00000000-0000-0000-0000-000000000000
20170919 08:04:22 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:505 fgapiserverdb get_ptv_groups - select count(*) from fg_group where lower(name)=Users;
20170919 08:04:22 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:505 fgapiserverdb get_ptv_groups - select count(*) from fg_group where lower(name)=Developers;
20170919 08:04:22 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
Passed groups: '[u'Users', u'Developers']' -> valid groups: '[u'Users', u'Developers']'
20170919 08:04:22 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:537 fgapiserverdb register_ptv_subject - select id, name from fg_user where name=00000000-0000-0000-0000-000000000000;
20170919 08:04:22 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
PTV user '00000000-0000-0000-0000-000000000000' record: '(4L, '00000000-0000-0000-0000-000000000000')'
20170919 08:04:22 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:318 fgapiserverdb register_token - insert into 
fg_token (token, subject, user_id, creation, expiry)
select TEST_TOKEN, 00000000-0000-0000-0000-000000000000, 4, now(), NULL
from dual
where (select count(*)
       from fg_token
       where token=TEST_TOKEN) = 0;
20170919 08:04:22 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
token: 'TEST_TOKEN' successfully registered
20170919 08:04:22 DEBUG ./fgapiserver.py:509 fgapiserver load_user - LoadUser: '4' - '00000000-0000-0000-0000-000000000000'
20170919 08:04:22 DEBUG ./fgapiserver.py:510 fgapiserver load_user - LoadUser: (end)
20170919 08:04:22 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserver_user.py:47 fgapiserver_user __init__ - fgUser - id: '4' - name: '00000000-0000-0000-0000-000000000000'
20170919 08:04:22 DEBUG ./fgapiserver.py:789 fgapiserver tasks - tasks(POST): {}
20170919 08:04:22 DEBUG ./fgapiserver.py:792 fgapiserver tasks - user_name: '00000000-0000-0000-0000-000000000000'
20170919 08:04:22 DEBUG ./fgapiserver.py:793 fgapiserver tasks - user_id: '4'
20170919 08:04:22 DEBUG ./fgapiserver.py:350 fgapiserver authorize_user - AuthUser: (begin)
20170919 08:04:22 DEBUG ./fgapiserver.py:361 fgapiserver authorize_user - AuthUser: user_id: '4' - user_name: '00000000-0000-0000-0000-000000000000'
20170919 08:04:22 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:355 fgapiserverdb verify_user_role - select count(*)>0      
from fg_user        u  
    ,fg_group       g  
    ,fg_user_group ug  
    ,fg_group_role gr  
    ,fg_role        r  
where u.id=4          
  and u.id=ug.user_id  
  and g.id=ug.group_id 
  and g.id=gr.group_id 
  and r.id=gr.role_id  
  and r.name = app_run;
20170919 08:04:22 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
role(s) 'app_run' for user_id '4' is True'
20170919 08:04:22 DEBUG ./fgapiserver.py:367 fgapiserver authorize_user - AuthUser: Auth for user '4' with roles 'app_run' is True
20170919 08:04:22 DEBUG ./fgapiserver.py:880 fgapiserver tasks - [app_run]: auth_state: 'True', auth_msg: ''
20170919 08:04:22 DEBUG ./fgapiserver.py:889 fgapiserver tasks - params: '{u'output_files': [{u'name': u'output.txt'}], u'application': u'5', u'input_files': [{u'name': u'input.txt'}], u'description': u'tester application run', u'arguments': []}'
20170919 08:04:22 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:1006 fgapiserverdb get_app_files - select file
      ,path
      ,override
from application_file
where app_id=5
order by file_id asc;
20170919 08:04:22 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
Files for application '5': '[]'
20170919 08:04:22 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:1035 fgapiserverdb init_task - Application files for app_id 5 are: []
20170919 08:04:22 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:1066 fgapiserverdb init_task - insert into task (id
                 ,creation
                 ,last_change
                 ,app_id
                 ,description
                 ,status
                 ,user
                 ,iosandbox)
select if(max(id) is NULL,1,max(id)+1) -- new id
      ,now()                           -- creation date
      ,now()                           -- last change
      ,5                              -- app_id
      ,tester application run                              -- description
      ,'WAITING'                     -- status WAITING
      ,00000000-0000-0000-0000-000000000000                              -- user
      ,/tmp/258e35ac-9d11-11e7-a33d-fa163e876b0e                              -- iosandbox
from task;

20170919 08:04:22 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:1070 fgapiserverdb init_task - select max(id) from task;
20170919 08:04:22 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:1102 fgapiserverdb init_task - Input files processing
20170919 08:04:22 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:1105 fgapiserverdb init_task - file: {u'name': u'input.txt'}
20170919 08:04:22 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:1144 fgapiserverdb init_task - insert into task_input_file (task_id
                            ,file_id
                            ,path
                            ,file)
select 31
      ,if(max(file_id) is NULL,1,max(file_id)+1)
      ,None
      ,input.txt
from task_input_file
where task_id=31
20170919 08:04:22 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:1154 fgapiserverdb init_task - select pvalue
from application_parameter
where app_id=5
 and (   pname='jobdesc_output'
      or pname='jobdesc_error');
20170919 08:04:22 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:1170 fgapiserverdb init_task - insert into task_output_file (task_id
                             ,file_id
                             ,file)
select 31
      ,if(max(file_id) is NULL,1,max(file_id)+1)
      ,output.txt
from task_output_file
where task_id=31
20170919 08:04:22 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:1170 fgapiserverdb init_task - insert into task_output_file (task_id
                             ,file_id
                             ,file)
select 31
      ,if(max(file_id) is NULL,1,max(file_id)+1)
      ,stdout.txt
from task_output_file
where task_id=31
20170919 08:04:22 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:1170 fgapiserverdb init_task - insert into task_output_file (task_id
                             ,file_id
                             ,file)
select 31
      ,if(max(file_id) is NULL,1,max(file_id)+1)
      ,stderr.txt
from task_output_file
where task_id=31
20170919 08:04:22 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
Task successfully inserted with id: '31'
20170919 08:04:23 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:1326 fgapiserverdb is_input_sandbox_ready - select   sum(if(path is NULL,0,1))=count(*) or count(*)=0 sb_ready
from task_input_file
where task_id=31;
20170919 08:04:23 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
sandbox ready for task '31' is False
20170919 08:04:23 DEBUG ./fgapiserver.py:899 fgapiserver tasks - task_id: '31'
20170919 08:04:23 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:653 fgapiserverdb get_task_record - select  id
,status
,date_format(creation, '%Y-%m-%dT%TZ') creation
,date_format(last_change, '%Y-%m-%dT%TZ') last_change
,app_id
,description
,status
,user
,iosandbox
from task
where id=31
  and status != "PURGED";
20170919 08:04:23 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:679 fgapiserverdb get_task_record - select argument
from task_arguments
where task_id=31
order by arg_id asc;
20170919 08:04:23 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:695 fgapiserverdb get_task_record - select file
      ,if(path is null or length(path)=0,          'NEEDED',          'READY') status
      ,if(path is NULL,'',path)
from task_input_file
where task_id=31
order by file_id asc;
20170919 08:04:23 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:720 fgapiserverdb get_task_record - select file
      ,if(path is NULL,'',path)
from task_output_file
where task_id=31
order by file_id asc;
20170919 08:04:23 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:747 fgapiserverdb get_task_record - select   data_name
 ,data_value
 ,data_desc
 ,data_type
 ,data_proto
 ,date_format(creation,              '%Y-%m-%dT%TZ') creation
 ,date_format(last_change,              '%Y-%m-%dT%TZ') last_change
from runtime_data
where task_id=31
order by data_id asc;
20170919 08:04:23 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
Task '31' record: '{'status': 'WAITING', 'description': 'tester application run', 'creation': '2017-09-19T08:04:22Z', 'iosandbox': '/tmp/258e35ac-9d11-11e7-a33d-fa163e876b0e', 'user': '00000000-0000-0000-0000-000000000000', 'id': '31', 'output_files': [{'url': '', 'name': 'output.txt'}, {'url': '', 'name': 'stdout.txt'}, {'url': '', 'name': 'stderr.txt'}], 'application': '5', 'arguments': [], 'runtime_data': [], 'input_files': [{'status': 'NEEDED', 'name': 'input.txt'}], 'last_change': '2017-09-19T08:04:22Z'}'
20170919 08:04:23 INFO /home/futuregateway/devel/fgAPIServer/venv/local/lib/python2.7/site-packages/werkzeug/_internal.py:87 _internal _log - 127.0.0.1 - - [19/Sep/2017 08:04:23] "POST /v1.0/tasks HTTP/1.1" 200 -
20170919 08:05:55 DEBUG ./fgapiserver.py:418 fgapiserver load_user - LoadUser: begin
20170919 08:05:55 DEBUG ./fgapiserver.py:430 fgapiserver load_user - LoadUser: using token
20170919 08:05:55 DEBUG ./fgapiserver.py:434 fgapiserver load_user - LoadUser: token is 'Bearer TEST_TOKEN'
20170919 08:05:55 DEBUG ./fgapiserver.py:439 fgapiserver load_user - LoadUser: (PTV)
20170919 08:05:55 DEBUG ./fgapiserver.py:459 fgapiserver load_user - LoadUser: token field is 'TEST_TOKEN'
20170919 08:05:55 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverptv.py:94 fgapiserverptv __init__ - Initializing PTV with:
  Endpoint: 'http://localhost:8889/checktoken'
  Username: 'tokenver_user'
  Password: 'tokenver_pass'

20170919 08:05:55 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverptv.py:114 fgapiserverptv validate_token - Validating token: 'TEST_TOKEN'
20170919 08:05:55 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverptv.py:115 fgapiserverptv validate_token - Connecting PTV service: 'http://localhost:8889/checktoken'
20170919 08:05:55 INFO /home/futuregateway/devel/fgAPIServer/venv/local/lib/python2.7/site-packages/werkzeug/_internal.py:87 _internal _log - 127.0.0.1 - - [19/Sep/2017 08:05:55] "POST /checktoken HTTP/1.1" 200 -
20170919 08:05:55 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverptv.py:129 fgapiserverptv validate_token - Retrieved token info:
{u'error': None, u'_links': [{u'href': u'/checktoken', u'rel': u'self'}], u'groups': [u'Users', u'Developers'], u'subject': u'00000000-0000-0000-0000-000000000000'}
20170919 08:05:55 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverptv.py:150 fgapiserverptv validate_token - Validated token:
{'portal_validate': True, 'portal_group': '', 'portal_user': '', 'portal_groups': [u'Users', u'Developers'], 'portal_subject': u'00000000-0000-0000-0000-000000000000'}
20170919 08:05:55 DEBUG ./fgapiserver.py:464 fgapiserver load_user - LoadUser: validate_token: '{'portal_validate': True, 'portal_group': '', 'portal_user': '', 'portal_groups': [u'Users', u'Developers'], 'portal_subject': u'00000000-0000-0000-0000-000000000000'}'
20170919 08:05:55 DEBUG ./fgapiserver.py:479 fgapiserver load_user - LoadUser: portal_user: 
portal_group: 
portal_groups: [u'Users', u'Developers']
portal_subject: 00000000-0000-0000-0000-000000000000
20170919 08:05:55 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:505 fgapiserverdb get_ptv_groups - select count(*) from fg_group where lower(name)=Users;
20170919 08:05:55 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:505 fgapiserverdb get_ptv_groups - select count(*) from fg_group where lower(name)=Developers;
20170919 08:05:55 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
Passed groups: '[u'Users', u'Developers']' -> valid groups: '[u'Users', u'Developers']'
20170919 08:05:55 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:537 fgapiserverdb register_ptv_subject - select id, name from fg_user where name=00000000-0000-0000-0000-000000000000;
20170919 08:05:55 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
PTV user '00000000-0000-0000-0000-000000000000' record: '(4L, '00000000-0000-0000-0000-000000000000')'
20170919 08:05:55 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:318 fgapiserverdb register_token - insert into 
fg_token (token, subject, user_id, creation, expiry)
select TEST_TOKEN, 00000000-0000-0000-0000-000000000000, 4, now(), NULL
from dual
where (select count(*)
       from fg_token
       where token=TEST_TOKEN) = 0;
20170919 08:05:55 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
token: 'TEST_TOKEN' successfully registered
20170919 08:05:55 DEBUG ./fgapiserver.py:509 fgapiserver load_user - LoadUser: '4' - '00000000-0000-0000-0000-000000000000'
20170919 08:05:55 DEBUG ./fgapiserver.py:510 fgapiserver load_user - LoadUser: (end)
20170919 08:05:55 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserver_user.py:47 fgapiserver_user __init__ - fgUser - id: '4' - name: '00000000-0000-0000-0000-000000000000'
20170919 08:05:55 DEBUG ./fgapiserver.py:1131 fgapiserver task_id_input - task_id_input(POST): {}
20170919 08:05:55 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:653 fgapiserverdb get_task_record - select  id
,status
,date_format(creation, '%Y-%m-%dT%TZ') creation
,date_format(last_change, '%Y-%m-%dT%TZ') last_change
,app_id
,description
,status
,user
,iosandbox
from task
where id=31
  and status != "PURGED";
20170919 08:05:55 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:679 fgapiserverdb get_task_record - select argument
from task_arguments
where task_id=31
order by arg_id asc;
20170919 08:05:55 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:695 fgapiserverdb get_task_record - select file
      ,if(path is null or length(path)=0,          'NEEDED',          'READY') status
      ,if(path is NULL,'',path)
from task_input_file
where task_id=31
order by file_id asc;
20170919 08:05:55 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:720 fgapiserverdb get_task_record - select file
      ,if(path is NULL,'',path)
from task_output_file
where task_id=31
order by file_id asc;
20170919 08:05:55 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:747 fgapiserverdb get_task_record - select   data_name
 ,data_value
 ,data_desc
 ,data_type
 ,data_proto
 ,date_format(creation,              '%Y-%m-%dT%TZ') creation
 ,date_format(last_change,              '%Y-%m-%dT%TZ') last_change
from runtime_data
where task_id=31
order by data_id asc;
20170919 08:05:55 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
Task '31' record: '{'status': 'WAITING', 'description': 'tester application run', 'creation': '2017-09-19T08:04:22Z', 'iosandbox': '/tmp/258e35ac-9d11-11e7-a33d-fa163e876b0e', 'user': '00000000-0000-0000-0000-000000000000', 'id': '31', 'output_files': [{'url': '', 'name': 'output.txt'}, {'url': '', 'name': 'stdout.txt'}, {'url': '', 'name': 'stderr.txt'}], 'application': '5', 'arguments': [], 'runtime_data': [], 'input_files': [{'status': 'NEEDED', 'name': 'input.txt'}], 'last_change': '2017-09-19T08:04:22Z'}'
20170919 08:05:55 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:653 fgapiserverdb get_task_record - select  id
,status
,date_format(creation, '%Y-%m-%dT%TZ') creation
,date_format(last_change, '%Y-%m-%dT%TZ') last_change
,app_id
,description
,status
,user
,iosandbox
from task
where id=31
  and status != "PURGED";
20170919 08:05:55 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:679 fgapiserverdb get_task_record - select argument
from task_arguments
where task_id=31
order by arg_id asc;
20170919 08:05:55 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:695 fgapiserverdb get_task_record - select file
      ,if(path is null or length(path)=0,          'NEEDED',          'READY') status
      ,if(path is NULL,'',path)
from task_input_file
where task_id=31
order by file_id asc;
20170919 08:05:55 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:720 fgapiserverdb get_task_record - select file
      ,if(path is NULL,'',path)
from task_output_file
where task_id=31
order by file_id asc;
20170919 08:05:55 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:747 fgapiserverdb get_task_record - select   data_name
 ,data_value
 ,data_desc
 ,data_type
 ,data_proto
 ,date_format(creation,              '%Y-%m-%dT%TZ') creation
 ,date_format(last_change,              '%Y-%m-%dT%TZ') last_change
from runtime_data
where task_id=31
order by data_id asc;
20170919 08:05:55 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
Task '31' record: '{'status': 'WAITING', 'description': 'tester application run', 'creation': '2017-09-19T08:04:22Z', 'iosandbox': '/tmp/258e35ac-9d11-11e7-a33d-fa163e876b0e', 'user': '00000000-0000-0000-0000-000000000000', 'id': '31', 'output_files': [{'url': '', 'name': 'output.txt'}, {'url': '', 'name': 'stdout.txt'}, {'url': '', 'name': 'stderr.txt'}], 'application': '5', 'arguments': [], 'runtime_data': [], 'input_files': [{'status': 'NEEDED', 'name': 'input.txt'}], 'last_change': '2017-09-19T08:04:22Z'}'
20170919 08:05:55 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:881 fgapiserverdb get_app_detail - select id
      ,name
      ,description
      ,outcome
      ,date_format(creation, '%Y-%m-%dT%TZ') creation
      ,enabled
from application
where id=5;
20170919 08:05:55 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:900 fgapiserverdb get_app_detail - select pname
      ,pvalue
from application_parameter
where app_id=5
order by param_id asc;
20170919 08:05:55 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:921 fgapiserverdb get_app_detail - select id
      ,name
      ,description
      ,date_format(creation, '%Y-%m-%dT%TZ') creation
      ,if(enabled,'enabled','disabled') status
      ,if(vinfra,'virtual','real') status
from infrastructure
where app_id=5;
20170919 08:05:55 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:942 fgapiserverdb get_app_detail - select pname, pvalue
from infrastructure_parameter
where infra_id=6
order by param_id asc;
20170919 08:05:55 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
Details for app '5': '{'infrastructures': [{'status': 'enabled', 'description': 'SSH Test infrastructure for fgtest', 'parameters': [{'name': 'jobservice', 'value': 'ssh://localhost'}, {'name': 'username', 'value': 'fgtest_test'}, {'name': 'password', 'value': 'N9lHmocm'}], 'creation': '2017-07-07T06:42:50Z', 'virtual': 'real', 'id': '6', 'name': 'SSH Test infrastructure'}], 'description': 'FutureGateway tester application', 'parameters': [{'param_name': 'target_executor', 'param_value': 'GridEngine'}, {'param_name': 'jobdesc_executable', 'param_value': 'cp input.txt ouput.txt && hostname | tee -a output.txt'}, {'param_name': 'jobdesc_output', 'param_value': 'stdout.txt'}, {'param_name': 'jobdesc_error', 'param_value': 'stderr.txt'}], 'creation': '2017-07-07T06:42:51Z', 'enabled': True, 'outcome': 'JOB', 'id': '5', 'name': 'Tester application'}'
20170919 08:05:55 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
Task '31' info: '{'status': 'WAITING', 'description': 'tester application run', 'creation': '2017-09-19T08:04:22Z', 'iosandbox': '/tmp/258e35ac-9d11-11e7-a33d-fa163e876b0e', 'user': '00000000-0000-0000-0000-000000000000', 'id': '31', 'output_files': [{'url': '', 'name': 'output.txt'}, {'url': '', 'name': 'stdout.txt'}, {'url': '', 'name': 'stderr.txt'}], 'application': {'infrastructures': [{'status': 'enabled', 'description': 'SSH Test infrastructure for fgtest', 'parameters': [{'name': 'jobservice', 'value': 'ssh://localhost'}, {'name': 'username', 'value': 'fgtest_test'}, {'name': 'password', 'value': 'N9lHmocm'}], 'creation': '2017-07-07T06:42:50Z', 'virtual': 'real', 'id': '6', 'name': 'SSH Test infrastructure'}], 'description': 'FutureGateway tester application', 'parameters': [{'param_name': 'target_executor', 'param_value': 'GridEngine'}, {'param_name': 'jobdesc_executable', 'param_value': 'cp input.txt ouput.txt && hostname | tee -a output.txt'}, {'param_name': 'jobdesc_output', 'param_value': 'stdout.txt'}, {'param_name': 'jobdesc_error', 'param_value': 'stderr.txt'}], 'creation': '2017-07-07T06:42:51Z', 'enabled': True, 'outcome': 'JOB', 'id': '5', 'name': 'Tester application'}, 'arguments': [], 'runtime_data': [], 'input_files': [{'status': 'NEEDED', 'name': 'input.txt'}], 'last_change': '2017-09-19T08:04:22Z'}'
20170919 08:05:55 DEBUG ./fgapiserver.py:241 fgapiserver get_task_app_id - Found app_id: '5' for task_id: '31'
20170919 08:05:55 DEBUG ./fgapiserver.py:350 fgapiserver authorize_user - AuthUser: (begin)
20170919 08:05:55 DEBUG ./fgapiserver.py:361 fgapiserver authorize_user - AuthUser: user_id: '4' - user_name: '00000000-0000-0000-0000-000000000000'
20170919 08:05:55 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:355 fgapiserverdb verify_user_role - select count(*)>0      
from fg_user        u  
    ,fg_group       g  
    ,fg_user_group ug  
    ,fg_group_role gr  
    ,fg_role        r  
where u.id=4          
  and u.id=ug.user_id  
  and g.id=ug.group_id 
  and g.id=gr.group_id 
  and r.id=gr.role_id  
  and r.name = app_run;
20170919 08:05:55 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
role(s) 'app_run' for user_id '4' is True'
20170919 08:05:55 DEBUG ./fgapiserver.py:367 fgapiserver authorize_user - AuthUser: Auth for user '4' with roles 'app_run' is True
20170919 08:05:55 DEBUG ./fgapiserver.py:396 fgapiserver authorize_user - AuthUser: checking for app_id '5'
20170919 08:05:55 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:394 fgapiserverdb verify_user_app - select count(*)>0      
from fg_user        u  
    ,fg_group       g  
    ,application    a  
    ,fg_user_group ug  
    ,fg_group_apps ga  
where u.id=4          
  and u.id=ug.user_id  
  and a.id=5          
  and a.id=ga.app_id   
  and g.id=ug.group_id 
  and g.id=ga.group_id;
20170919 08:05:56 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
User id '4' access to application id '5' is True'
20170919 08:05:56 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:611 fgapiserverdb task_exists - select name from fg_user where id = 4;
20170919 08:05:56 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:1506 fgapiserverdb get_task_list - select id
from task
where status != "PURGED"
  and user = 00000000-0000-0000-0000-000000000000
;
20170919 08:05:56 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
Task list for user '00000000-0000-0000-0000-000000000000', app 'None': '[8L, 9L, 10L, 11L, 12L, 13L, 17L, 20L, 21L, 22L, 23L, 24L, 25L, 26L, 27L, 28L, 29L, 30L, 31L]'
20170919 08:05:56 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
Task '31' exists is True
20170919 08:05:56 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:653 fgapiserverdb get_task_record - select  id
,status
,date_format(creation, '%Y-%m-%dT%TZ') creation
,date_format(last_change, '%Y-%m-%dT%TZ') last_change
,app_id
,description
,status
,user
,iosandbox
from task
where id=31
  and status != "PURGED";
20170919 08:05:56 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:679 fgapiserverdb get_task_record - select argument
from task_arguments
where task_id=31
order by arg_id asc;
20170919 08:05:56 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:695 fgapiserverdb get_task_record - select file
      ,if(path is null or length(path)=0,          'NEEDED',          'READY') status
      ,if(path is NULL,'',path)
from task_input_file
where task_id=31
order by file_id asc;
20170919 08:05:56 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:720 fgapiserverdb get_task_record - select file
      ,if(path is NULL,'',path)
from task_output_file
where task_id=31
order by file_id asc;
20170919 08:05:56 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:747 fgapiserverdb get_task_record - select   data_name
 ,data_value
 ,data_desc
 ,data_type
 ,data_proto
 ,date_format(creation,              '%Y-%m-%dT%TZ') creation
 ,date_format(last_change,              '%Y-%m-%dT%TZ') last_change
from runtime_data
where task_id=31
order by data_id asc;
20170919 08:05:56 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
Task '31' record: '{'status': 'WAITING', 'description': 'tester application run', 'creation': '2017-09-19T08:04:22Z', 'iosandbox': '/tmp/258e35ac-9d11-11e7-a33d-fa163e876b0e', 'user': '00000000-0000-0000-0000-000000000000', 'id': '31', 'output_files': [{'url': '', 'name': 'output.txt'}, {'url': '', 'name': 'stdout.txt'}, {'url': '', 'name': 'stderr.txt'}], 'application': '5', 'arguments': [], 'runtime_data': [], 'input_files': [{'status': 'NEEDED', 'name': 'input.txt'}], 'last_change': '2017-09-19T08:04:22Z'}'
20170919 08:05:56 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:1264 fgapiserverdb get_task_io_sandbox - select iosandbox from task where id=31;
20170919 08:05:56 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
IO sandbox for task '31': '/tmp/258e35ac-9d11-11e7-a33d-fa163e876b0e'
20170919 08:05:56 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:1221 fgapiserverdb setup_default_inputs - select file
      ,path
from application_file
where app_id = (select app_id
                from task
                where id=31)  and path is not NULL;
20170919 08:05:56 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
Default input files for task '31' successfully processed
20170919 08:05:56 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:1326 fgapiserverdb is_input_sandbox_ready - select   sum(if(path is NULL,0,1))=count(*) or count(*)=0 sb_ready
from task_input_file
where task_id=31;
20170919 08:05:56 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
sandbox ready for task '31' is False
20170919 08:05:56 INFO /home/futuregateway/devel/fgAPIServer/venv/local/lib/python2.7/site-packages/werkzeug/_internal.py:87 _internal _log - 127.0.0.1 - - [19/Sep/2017 08:05:56] "POST /v1.0/tasks/31/input HTTP/1.1" 200 -
20170919 08:06:51 DEBUG ./fgapiserver.py:418 fgapiserver load_user - LoadUser: begin
20170919 08:06:51 DEBUG ./fgapiserver.py:430 fgapiserver load_user - LoadUser: using token
20170919 08:06:51 DEBUG ./fgapiserver.py:434 fgapiserver load_user - LoadUser: token is 'Bearer TEST_TOKEN'
20170919 08:06:51 DEBUG ./fgapiserver.py:439 fgapiserver load_user - LoadUser: (PTV)
20170919 08:06:51 DEBUG ./fgapiserver.py:459 fgapiserver load_user - LoadUser: token field is 'TEST_TOKEN'
20170919 08:06:51 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverptv.py:94 fgapiserverptv __init__ - Initializing PTV with:
  Endpoint: 'http://localhost:8889/checktoken'
  Username: 'tokenver_user'
  Password: 'tokenver_pass'

20170919 08:06:51 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverptv.py:114 fgapiserverptv validate_token - Validating token: 'TEST_TOKEN'
20170919 08:06:51 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverptv.py:115 fgapiserverptv validate_token - Connecting PTV service: 'http://localhost:8889/checktoken'
20170919 08:06:51 INFO /home/futuregateway/devel/fgAPIServer/venv/local/lib/python2.7/site-packages/werkzeug/_internal.py:87 _internal _log - 127.0.0.1 - - [19/Sep/2017 08:06:51] "POST /checktoken HTTP/1.1" 200 -
20170919 08:06:51 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverptv.py:129 fgapiserverptv validate_token - Retrieved token info:
{u'error': None, u'_links': [{u'href': u'/checktoken', u'rel': u'self'}], u'groups': [u'Users', u'Developers'], u'subject': u'00000000-0000-0000-0000-000000000000'}
20170919 08:06:51 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverptv.py:150 fgapiserverptv validate_token - Validated token:
{'portal_validate': True, 'portal_group': '', 'portal_user': '', 'portal_groups': [u'Users', u'Developers'], 'portal_subject': u'00000000-0000-0000-0000-000000000000'}
20170919 08:06:51 DEBUG ./fgapiserver.py:464 fgapiserver load_user - LoadUser: validate_token: '{'portal_validate': True, 'portal_group': '', 'portal_user': '', 'portal_groups': [u'Users', u'Developers'], 'portal_subject': u'00000000-0000-0000-0000-000000000000'}'
20170919 08:06:51 DEBUG ./fgapiserver.py:479 fgapiserver load_user - LoadUser: portal_user: 
portal_group: 
portal_groups: [u'Users', u'Developers']
portal_subject: 00000000-0000-0000-0000-000000000000
20170919 08:06:51 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:505 fgapiserverdb get_ptv_groups - select count(*) from fg_group where lower(name)=Users;
20170919 08:06:51 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:505 fgapiserverdb get_ptv_groups - select count(*) from fg_group where lower(name)=Developers;
20170919 08:06:51 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
Passed groups: '[u'Users', u'Developers']' -> valid groups: '[u'Users', u'Developers']'
20170919 08:06:51 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:537 fgapiserverdb register_ptv_subject - select id, name from fg_user where name=00000000-0000-0000-0000-000000000000;
20170919 08:06:51 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
PTV user '00000000-0000-0000-0000-000000000000' record: '(4L, '00000000-0000-0000-0000-000000000000')'
20170919 08:06:51 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:318 fgapiserverdb register_token - insert into 
fg_token (token, subject, user_id, creation, expiry)
select TEST_TOKEN, 00000000-0000-0000-0000-000000000000, 4, now(), NULL
from dual
where (select count(*)
       from fg_token
       where token=TEST_TOKEN) = 0;
20170919 08:06:51 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
token: 'TEST_TOKEN' successfully registered
20170919 08:06:51 DEBUG ./fgapiserver.py:509 fgapiserver load_user - LoadUser: '4' - '00000000-0000-0000-0000-000000000000'
20170919 08:06:51 DEBUG ./fgapiserver.py:510 fgapiserver load_user - LoadUser: (end)
20170919 08:06:51 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserver_user.py:47 fgapiserver_user __init__ - fgUser - id: '4' - name: '00000000-0000-0000-0000-000000000000'
20170919 08:06:51 DEBUG ./fgapiserver.py:965 fgapiserver task_id - tasks(GET)/31: {}
20170919 08:06:51 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:653 fgapiserverdb get_task_record - select  id
,status
,date_format(creation, '%Y-%m-%dT%TZ') creation
,date_format(last_change, '%Y-%m-%dT%TZ') last_change
,app_id
,description
,status
,user
,iosandbox
from task
where id=31
  and status != "PURGED";
20170919 08:06:51 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:679 fgapiserverdb get_task_record - select argument
from task_arguments
where task_id=31
order by arg_id asc;
20170919 08:06:51 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:695 fgapiserverdb get_task_record - select file
      ,if(path is null or length(path)=0,          'NEEDED',          'READY') status
      ,if(path is NULL,'',path)
from task_input_file
where task_id=31
order by file_id asc;
20170919 08:06:51 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:720 fgapiserverdb get_task_record - select file
      ,if(path is NULL,'',path)
from task_output_file
where task_id=31
order by file_id asc;
20170919 08:06:51 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:747 fgapiserverdb get_task_record - select   data_name
 ,data_value
 ,data_desc
 ,data_type
 ,data_proto
 ,date_format(creation,              '%Y-%m-%dT%TZ') creation
 ,date_format(last_change,              '%Y-%m-%dT%TZ') last_change
from runtime_data
where task_id=31
order by data_id asc;
20170919 08:06:51 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
Task '31' record: '{'status': 'WAITING', 'description': 'tester application run', 'creation': '2017-09-19T08:04:22Z', 'iosandbox': '/tmp/258e35ac-9d11-11e7-a33d-fa163e876b0e', 'user': '00000000-0000-0000-0000-000000000000', 'id': '31', 'output_files': [{'url': '', 'name': 'output.txt'}, {'url': '', 'name': 'stdout.txt'}, {'url': '', 'name': 'stderr.txt'}], 'application': '5', 'arguments': [], 'runtime_data': [], 'input_files': [{'status': 'NEEDED', 'name': 'input.txt'}], 'last_change': '2017-09-19T08:04:22Z'}'
20170919 08:06:51 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:653 fgapiserverdb get_task_record - select  id
,status
,date_format(creation, '%Y-%m-%dT%TZ') creation
,date_format(last_change, '%Y-%m-%dT%TZ') last_change
,app_id
,description
,status
,user
,iosandbox
from task
where id=31
  and status != "PURGED";
20170919 08:06:51 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:679 fgapiserverdb get_task_record - select argument
from task_arguments
where task_id=31
order by arg_id asc;
20170919 08:06:51 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:695 fgapiserverdb get_task_record - select file
      ,if(path is null or length(path)=0,          'NEEDED',          'READY') status
      ,if(path is NULL,'',path)
from task_input_file
where task_id=31
order by file_id asc;
20170919 08:06:51 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:720 fgapiserverdb get_task_record - select file
      ,if(path is NULL,'',path)
from task_output_file
where task_id=31
order by file_id asc;
20170919 08:06:51 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:747 fgapiserverdb get_task_record - select   data_name
 ,data_value
 ,data_desc
 ,data_type
 ,data_proto
 ,date_format(creation,              '%Y-%m-%dT%TZ') creation
 ,date_format(last_change,              '%Y-%m-%dT%TZ') last_change
from runtime_data
where task_id=31
order by data_id asc;
20170919 08:06:51 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
Task '31' record: '{'status': 'WAITING', 'description': 'tester application run', 'creation': '2017-09-19T08:04:22Z', 'iosandbox': '/tmp/258e35ac-9d11-11e7-a33d-fa163e876b0e', 'user': '00000000-0000-0000-0000-000000000000', 'id': '31', 'output_files': [{'url': '', 'name': 'output.txt'}, {'url': '', 'name': 'stdout.txt'}, {'url': '', 'name': 'stderr.txt'}], 'application': '5', 'arguments': [], 'runtime_data': [], 'input_files': [{'status': 'NEEDED', 'name': 'input.txt'}], 'last_change': '2017-09-19T08:04:22Z'}'
20170919 08:06:51 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:881 fgapiserverdb get_app_detail - select id
      ,name
      ,description
      ,outcome
      ,date_format(creation, '%Y-%m-%dT%TZ') creation
      ,enabled
from application
where id=5;
20170919 08:06:51 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:900 fgapiserverdb get_app_detail - select pname
      ,pvalue
from application_parameter
where app_id=5
order by param_id asc;
20170919 08:06:51 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:921 fgapiserverdb get_app_detail - select id
      ,name
      ,description
      ,date_format(creation, '%Y-%m-%dT%TZ') creation
      ,if(enabled,'enabled','disabled') status
      ,if(vinfra,'virtual','real') status
from infrastructure
where app_id=5;
20170919 08:06:51 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:942 fgapiserverdb get_app_detail - select pname, pvalue
from infrastructure_parameter
where infra_id=6
order by param_id asc;
20170919 08:06:51 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
Details for app '5': '{'infrastructures': [{'status': 'enabled', 'description': 'SSH Test infrastructure for fgtest', 'parameters': [{'name': 'jobservice', 'value': 'ssh://localhost'}, {'name': 'username', 'value': 'fgtest_test'}, {'name': 'password', 'value': 'N9lHmocm'}], 'creation': '2017-07-07T06:42:50Z', 'virtual': 'real', 'id': '6', 'name': 'SSH Test infrastructure'}], 'description': 'FutureGateway tester application', 'parameters': [{'param_name': 'target_executor', 'param_value': 'GridEngine'}, {'param_name': 'jobdesc_executable', 'param_value': 'cp input.txt ouput.txt && hostname | tee -a output.txt'}, {'param_name': 'jobdesc_output', 'param_value': 'stdout.txt'}, {'param_name': 'jobdesc_error', 'param_value': 'stderr.txt'}], 'creation': '2017-07-07T06:42:51Z', 'enabled': True, 'outcome': 'JOB', 'id': '5', 'name': 'Tester application'}'
20170919 08:06:51 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
Task '31' info: '{'status': 'WAITING', 'description': 'tester application run', 'creation': '2017-09-19T08:04:22Z', 'iosandbox': '/tmp/258e35ac-9d11-11e7-a33d-fa163e876b0e', 'user': '00000000-0000-0000-0000-000000000000', 'id': '31', 'output_files': [{'url': '', 'name': 'output.txt'}, {'url': '', 'name': 'stdout.txt'}, {'url': '', 'name': 'stderr.txt'}], 'application': {'infrastructures': [{'status': 'enabled', 'description': 'SSH Test infrastructure for fgtest', 'parameters': [{'name': 'jobservice', 'value': 'ssh://localhost'}, {'name': 'username', 'value': 'fgtest_test'}, {'name': 'password', 'value': 'N9lHmocm'}], 'creation': '2017-07-07T06:42:50Z', 'virtual': 'real', 'id': '6', 'name': 'SSH Test infrastructure'}], 'description': 'FutureGateway tester application', 'parameters': [{'param_name': 'target_executor', 'param_value': 'GridEngine'}, {'param_name': 'jobdesc_executable', 'param_value': 'cp input.txt ouput.txt && hostname | tee -a output.txt'}, {'param_name': 'jobdesc_output', 'param_value': 'stdout.txt'}, {'param_name': 'jobdesc_error', 'param_value': 'stderr.txt'}], 'creation': '2017-07-07T06:42:51Z', 'enabled': True, 'outcome': 'JOB', 'id': '5', 'name': 'Tester application'}, 'arguments': [], 'runtime_data': [], 'input_files': [{'status': 'NEEDED', 'name': 'input.txt'}], 'last_change': '2017-09-19T08:04:22Z'}'
20170919 08:06:51 DEBUG ./fgapiserver.py:241 fgapiserver get_task_app_id - Found app_id: '5' for task_id: '31'
20170919 08:06:51 DEBUG ./fgapiserver.py:350 fgapiserver authorize_user - AuthUser: (begin)
20170919 08:06:51 DEBUG ./fgapiserver.py:361 fgapiserver authorize_user - AuthUser: user_id: '4' - user_name: '00000000-0000-0000-0000-000000000000'
20170919 08:06:51 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:355 fgapiserverdb verify_user_role - select count(*)>0      
from fg_user        u  
    ,fg_group       g  
    ,fg_user_group ug  
    ,fg_group_role gr  
    ,fg_role        r  
where u.id=4          
  and u.id=ug.user_id  
  and g.id=ug.group_id 
  and g.id=gr.group_id 
  and r.id=gr.role_id  
  and r.name = task_view;
20170919 08:06:51 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
role(s) 'task_view' for user_id '4' is True'
20170919 08:06:51 DEBUG ./fgapiserver.py:367 fgapiserver authorize_user - AuthUser: Auth for user '4' with roles 'task_view' is True
20170919 08:06:51 DEBUG ./fgapiserver.py:396 fgapiserver authorize_user - AuthUser: checking for app_id '5'
20170919 08:06:51 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:394 fgapiserverdb verify_user_app - select count(*)>0      
from fg_user        u  
    ,fg_group       g  
    ,application    a  
    ,fg_user_group ug  
    ,fg_group_apps ga  
where u.id=4          
  and u.id=ug.user_id  
  and a.id=5          
  and a.id=ga.app_id   
  and g.id=ug.group_id 
  and g.id=ga.group_id;
20170919 08:06:51 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
User id '4' access to application id '5' is True'
20170919 08:06:51 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:611 fgapiserverdb task_exists - select name from fg_user where id = 4;
20170919 08:06:51 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:1506 fgapiserverdb get_task_list - select id
from task
where status != "PURGED"
  and user = 00000000-0000-0000-0000-000000000000
;
20170919 08:06:51 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
Task list for user '00000000-0000-0000-0000-000000000000', app 'None': '[8L, 9L, 10L, 11L, 12L, 13L, 17L, 20L, 21L, 22L, 23L, 24L, 25L, 26L, 27L, 28L, 29L, 30L, 31L]'
20170919 08:06:51 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
Task '31' exists is True
20170919 08:06:51 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:653 fgapiserverdb get_task_record - select  id
,status
,date_format(creation, '%Y-%m-%dT%TZ') creation
,date_format(last_change, '%Y-%m-%dT%TZ') last_change
,app_id
,description
,status
,user
,iosandbox
from task
where id=31
  and status != "PURGED";
20170919 08:06:51 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:679 fgapiserverdb get_task_record - select argument
from task_arguments
where task_id=31
order by arg_id asc;
20170919 08:06:51 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:695 fgapiserverdb get_task_record - select file
      ,if(path is null or length(path)=0,          'NEEDED',          'READY') status
      ,if(path is NULL,'',path)
from task_input_file
where task_id=31
order by file_id asc;
20170919 08:06:51 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:720 fgapiserverdb get_task_record - select file
      ,if(path is NULL,'',path)
from task_output_file
where task_id=31
order by file_id asc;
20170919 08:06:51 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:747 fgapiserverdb get_task_record - select   data_name
 ,data_value
 ,data_desc
 ,data_type
 ,data_proto
 ,date_format(creation,              '%Y-%m-%dT%TZ') creation
 ,date_format(last_change,              '%Y-%m-%dT%TZ') last_change
from runtime_data
where task_id=31
order by data_id asc;
20170919 08:06:51 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
Task '31' record: '{'status': 'WAITING', 'description': 'tester application run', 'creation': '2017-09-19T08:04:22Z', 'iosandbox': '/tmp/258e35ac-9d11-11e7-a33d-fa163e876b0e', 'user': '00000000-0000-0000-0000-000000000000', 'id': '31', 'output_files': [{'url': '', 'name': 'output.txt'}, {'url': '', 'name': 'stdout.txt'}, {'url': '', 'name': 'stderr.txt'}], 'application': '5', 'arguments': [], 'runtime_data': [], 'input_files': [{'status': 'NEEDED', 'name': 'input.txt'}], 'last_change': '2017-09-19T08:04:22Z'}'
20170919 08:06:51 INFO /home/futuregateway/devel/fgAPIServer/venv/local/lib/python2.7/site-packages/werkzeug/_internal.py:87 _internal _log - 127.0.0.1 - - [19/Sep/2017 08:06:51] "GET /v1.0/tasks/31 HTTP/1.1" 200 -
20170919 08:08:00 DEBUG ./fgapiserver.py:418 fgapiserver load_user - LoadUser: begin
20170919 08:08:00 DEBUG ./fgapiserver.py:430 fgapiserver load_user - LoadUser: using token
20170919 08:08:00 DEBUG ./fgapiserver.py:434 fgapiserver load_user - LoadUser: token is 'Bearer TEST_TOKEN'
20170919 08:08:00 DEBUG ./fgapiserver.py:439 fgapiserver load_user - LoadUser: (PTV)
20170919 08:08:00 DEBUG ./fgapiserver.py:459 fgapiserver load_user - LoadUser: token field is 'TEST_TOKEN'
20170919 08:08:00 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverptv.py:94 fgapiserverptv __init__ - Initializing PTV with:
  Endpoint: 'http://localhost:8889/checktoken'
  Username: 'tokenver_user'
  Password: 'tokenver_pass'

20170919 08:08:00 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverptv.py:114 fgapiserverptv validate_token - Validating token: 'TEST_TOKEN'
20170919 08:08:00 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverptv.py:115 fgapiserverptv validate_token - Connecting PTV service: 'http://localhost:8889/checktoken'
20170919 08:08:00 INFO /home/futuregateway/devel/fgAPIServer/venv/local/lib/python2.7/site-packages/werkzeug/_internal.py:87 _internal _log - 127.0.0.1 - - [19/Sep/2017 08:08:00] "POST /checktoken HTTP/1.1" 200 -
20170919 08:08:00 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverptv.py:129 fgapiserverptv validate_token - Retrieved token info:
{u'error': None, u'_links': [{u'href': u'/checktoken', u'rel': u'self'}], u'groups': [u'Users', u'Developers'], u'subject': u'00000000-0000-0000-0000-000000000000'}
20170919 08:08:00 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverptv.py:150 fgapiserverptv validate_token - Validated token:
{'portal_validate': True, 'portal_group': '', 'portal_user': '', 'portal_groups': [u'Users', u'Developers'], 'portal_subject': u'00000000-0000-0000-0000-000000000000'}
20170919 08:08:00 DEBUG ./fgapiserver.py:464 fgapiserver load_user - LoadUser: validate_token: '{'portal_validate': True, 'portal_group': '', 'portal_user': '', 'portal_groups': [u'Users', u'Developers'], 'portal_subject': u'00000000-0000-0000-0000-000000000000'}'
20170919 08:08:00 DEBUG ./fgapiserver.py:479 fgapiserver load_user - LoadUser: portal_user: 
portal_group: 
portal_groups: [u'Users', u'Developers']
portal_subject: 00000000-0000-0000-0000-000000000000
20170919 08:08:00 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:505 fgapiserverdb get_ptv_groups - select count(*) from fg_group where lower(name)=Users;
20170919 08:08:00 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:505 fgapiserverdb get_ptv_groups - select count(*) from fg_group where lower(name)=Developers;
20170919 08:08:00 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
Passed groups: '[u'Users', u'Developers']' -> valid groups: '[u'Users', u'Developers']'
20170919 08:08:00 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:537 fgapiserverdb register_ptv_subject - select id, name from fg_user where name=00000000-0000-0000-0000-000000000000;
20170919 08:08:00 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
PTV user '00000000-0000-0000-0000-000000000000' record: '(4L, '00000000-0000-0000-0000-000000000000')'
20170919 08:08:00 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:318 fgapiserverdb register_token - insert into 
fg_token (token, subject, user_id, creation, expiry)
select TEST_TOKEN, 00000000-0000-0000-0000-000000000000, 4, now(), NULL
from dual
where (select count(*)
       from fg_token
       where token=TEST_TOKEN) = 0;
20170919 08:08:00 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
token: 'TEST_TOKEN' successfully registered
20170919 08:08:00 DEBUG ./fgapiserver.py:509 fgapiserver load_user - LoadUser: '4' - '00000000-0000-0000-0000-000000000000'
20170919 08:08:00 DEBUG ./fgapiserver.py:510 fgapiserver load_user - LoadUser: (end)
20170919 08:08:00 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserver_user.py:47 fgapiserver_user __init__ - fgUser - id: '4' - name: '00000000-0000-0000-0000-000000000000'
20170919 08:08:00 DEBUG ./fgapiserver.py:1131 fgapiserver task_id_input - task_id_input(POST): {}
20170919 08:08:00 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:653 fgapiserverdb get_task_record - select  id
,status
,date_format(creation, '%Y-%m-%dT%TZ') creation
,date_format(last_change, '%Y-%m-%dT%TZ') last_change
,app_id
,description
,status
,user
,iosandbox
from task
where id=31
  and status != "PURGED";
20170919 08:08:00 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:679 fgapiserverdb get_task_record - select argument
from task_arguments
where task_id=31
order by arg_id asc;
20170919 08:08:00 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:695 fgapiserverdb get_task_record - select file
      ,if(path is null or length(path)=0,          'NEEDED',          'READY') status
      ,if(path is NULL,'',path)
from task_input_file
where task_id=31
order by file_id asc;
20170919 08:08:00 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:720 fgapiserverdb get_task_record - select file
      ,if(path is NULL,'',path)
from task_output_file
where task_id=31
order by file_id asc;
20170919 08:08:00 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:747 fgapiserverdb get_task_record - select   data_name
 ,data_value
 ,data_desc
 ,data_type
 ,data_proto
 ,date_format(creation,              '%Y-%m-%dT%TZ') creation
 ,date_format(last_change,              '%Y-%m-%dT%TZ') last_change
from runtime_data
where task_id=31
order by data_id asc;
20170919 08:08:00 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
Task '31' record: '{'status': 'WAITING', 'description': 'tester application run', 'creation': '2017-09-19T08:04:22Z', 'iosandbox': '/tmp/258e35ac-9d11-11e7-a33d-fa163e876b0e', 'user': '00000000-0000-0000-0000-000000000000', 'id': '31', 'output_files': [{'url': '', 'name': 'output.txt'}, {'url': '', 'name': 'stdout.txt'}, {'url': '', 'name': 'stderr.txt'}], 'application': '5', 'arguments': [], 'runtime_data': [], 'input_files': [{'status': 'NEEDED', 'name': 'input.txt'}], 'last_change': '2017-09-19T08:04:22Z'}'
20170919 08:08:00 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:653 fgapiserverdb get_task_record - select  id
,status
,date_format(creation, '%Y-%m-%dT%TZ') creation
,date_format(last_change, '%Y-%m-%dT%TZ') last_change
,app_id
,description
,status
,user
,iosandbox
from task
where id=31
  and status != "PURGED";
20170919 08:08:00 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:679 fgapiserverdb get_task_record - select argument
from task_arguments
where task_id=31
order by arg_id asc;
20170919 08:08:00 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:695 fgapiserverdb get_task_record - select file
      ,if(path is null or length(path)=0,          'NEEDED',          'READY') status
      ,if(path is NULL,'',path)
from task_input_file
where task_id=31
order by file_id asc;
20170919 08:08:00 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:720 fgapiserverdb get_task_record - select file
      ,if(path is NULL,'',path)
from task_output_file
where task_id=31
order by file_id asc;
20170919 08:08:00 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:747 fgapiserverdb get_task_record - select   data_name
 ,data_value
 ,data_desc
 ,data_type
 ,data_proto
 ,date_format(creation,              '%Y-%m-%dT%TZ') creation
 ,date_format(last_change,              '%Y-%m-%dT%TZ') last_change
from runtime_data
where task_id=31
order by data_id asc;
20170919 08:08:00 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
Task '31' record: '{'status': 'WAITING', 'description': 'tester application run', 'creation': '2017-09-19T08:04:22Z', 'iosandbox': '/tmp/258e35ac-9d11-11e7-a33d-fa163e876b0e', 'user': '00000000-0000-0000-0000-000000000000', 'id': '31', 'output_files': [{'url': '', 'name': 'output.txt'}, {'url': '', 'name': 'stdout.txt'}, {'url': '', 'name': 'stderr.txt'}], 'application': '5', 'arguments': [], 'runtime_data': [], 'input_files': [{'status': 'NEEDED', 'name': 'input.txt'}], 'last_change': '2017-09-19T08:04:22Z'}'
20170919 08:08:00 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:881 fgapiserverdb get_app_detail - select id
      ,name
      ,description
      ,outcome
      ,date_format(creation, '%Y-%m-%dT%TZ') creation
      ,enabled
from application
where id=5;
20170919 08:08:00 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:900 fgapiserverdb get_app_detail - select pname
      ,pvalue
from application_parameter
where app_id=5
order by param_id asc;
20170919 08:08:00 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:921 fgapiserverdb get_app_detail - select id
      ,name
      ,description
      ,date_format(creation, '%Y-%m-%dT%TZ') creation
      ,if(enabled,'enabled','disabled') status
      ,if(vinfra,'virtual','real') status
from infrastructure
where app_id=5;
20170919 08:08:00 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:942 fgapiserverdb get_app_detail - select pname, pvalue
from infrastructure_parameter
where infra_id=6
order by param_id asc;
20170919 08:08:00 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
Details for app '5': '{'infrastructures': [{'status': 'enabled', 'description': 'SSH Test infrastructure for fgtest', 'parameters': [{'name': 'jobservice', 'value': 'ssh://localhost'}, {'name': 'username', 'value': 'fgtest_test'}, {'name': 'password', 'value': 'N9lHmocm'}], 'creation': '2017-07-07T06:42:50Z', 'virtual': 'real', 'id': '6', 'name': 'SSH Test infrastructure'}], 'description': 'FutureGateway tester application', 'parameters': [{'param_name': 'target_executor', 'param_value': 'GridEngine'}, {'param_name': 'jobdesc_executable', 'param_value': 'cp input.txt ouput.txt && hostname | tee -a output.txt'}, {'param_name': 'jobdesc_output', 'param_value': 'stdout.txt'}, {'param_name': 'jobdesc_error', 'param_value': 'stderr.txt'}], 'creation': '2017-07-07T06:42:51Z', 'enabled': True, 'outcome': 'JOB', 'id': '5', 'name': 'Tester application'}'
20170919 08:08:00 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
Task '31' info: '{'status': 'WAITING', 'description': 'tester application run', 'creation': '2017-09-19T08:04:22Z', 'iosandbox': '/tmp/258e35ac-9d11-11e7-a33d-fa163e876b0e', 'user': '00000000-0000-0000-0000-000000000000', 'id': '31', 'output_files': [{'url': '', 'name': 'output.txt'}, {'url': '', 'name': 'stdout.txt'}, {'url': '', 'name': 'stderr.txt'}], 'application': {'infrastructures': [{'status': 'enabled', 'description': 'SSH Test infrastructure for fgtest', 'parameters': [{'name': 'jobservice', 'value': 'ssh://localhost'}, {'name': 'username', 'value': 'fgtest_test'}, {'name': 'password', 'value': 'N9lHmocm'}], 'creation': '2017-07-07T06:42:50Z', 'virtual': 'real', 'id': '6', 'name': 'SSH Test infrastructure'}], 'description': 'FutureGateway tester application', 'parameters': [{'param_name': 'target_executor', 'param_value': 'GridEngine'}, {'param_name': 'jobdesc_executable', 'param_value': 'cp input.txt ouput.txt && hostname | tee -a output.txt'}, {'param_name': 'jobdesc_output', 'param_value': 'stdout.txt'}, {'param_name': 'jobdesc_error', 'param_value': 'stderr.txt'}], 'creation': '2017-07-07T06:42:51Z', 'enabled': True, 'outcome': 'JOB', 'id': '5', 'name': 'Tester application'}, 'arguments': [], 'runtime_data': [], 'input_files': [{'status': 'NEEDED', 'name': 'input.txt'}], 'last_change': '2017-09-19T08:04:22Z'}'
20170919 08:08:00 DEBUG ./fgapiserver.py:241 fgapiserver get_task_app_id - Found app_id: '5' for task_id: '31'
20170919 08:08:00 DEBUG ./fgapiserver.py:350 fgapiserver authorize_user - AuthUser: (begin)
20170919 08:08:00 DEBUG ./fgapiserver.py:361 fgapiserver authorize_user - AuthUser: user_id: '4' - user_name: '00000000-0000-0000-0000-000000000000'
20170919 08:08:00 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:355 fgapiserverdb verify_user_role - select count(*)>0      
from fg_user        u  
    ,fg_group       g  
    ,fg_user_group ug  
    ,fg_group_role gr  
    ,fg_role        r  
where u.id=4          
  and u.id=ug.user_id  
  and g.id=ug.group_id 
  and g.id=gr.group_id 
  and r.id=gr.role_id  
  and r.name = app_run;
20170919 08:08:00 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
role(s) 'app_run' for user_id '4' is True'
20170919 08:08:00 DEBUG ./fgapiserver.py:367 fgapiserver authorize_user - AuthUser: Auth for user '4' with roles 'app_run' is True
20170919 08:08:00 DEBUG ./fgapiserver.py:396 fgapiserver authorize_user - AuthUser: checking for app_id '5'
20170919 08:08:00 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:394 fgapiserverdb verify_user_app - select count(*)>0      
from fg_user        u  
    ,fg_group       g  
    ,application    a  
    ,fg_user_group ug  
    ,fg_group_apps ga  
where u.id=4          
  and u.id=ug.user_id  
  and a.id=5          
  and a.id=ga.app_id   
  and g.id=ug.group_id 
  and g.id=ga.group_id;
20170919 08:08:00 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
User id '4' access to application id '5' is True'
20170919 08:08:00 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:611 fgapiserverdb task_exists - select name from fg_user where id = 4;
20170919 08:08:00 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:1506 fgapiserverdb get_task_list - select id
from task
where status != "PURGED"
  and user = 00000000-0000-0000-0000-000000000000
;
20170919 08:08:00 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
Task list for user '00000000-0000-0000-0000-000000000000', app 'None': '[8L, 9L, 10L, 11L, 12L, 13L, 17L, 20L, 21L, 22L, 23L, 24L, 25L, 26L, 27L, 28L, 29L, 30L, 31L]'
20170919 08:08:00 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
Task '31' exists is True
20170919 08:08:00 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:653 fgapiserverdb get_task_record - select  id
,status
,date_format(creation, '%Y-%m-%dT%TZ') creation
,date_format(last_change, '%Y-%m-%dT%TZ') last_change
,app_id
,description
,status
,user
,iosandbox
from task
where id=31
  and status != "PURGED";
20170919 08:08:00 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:679 fgapiserverdb get_task_record - select argument
from task_arguments
where task_id=31
order by arg_id asc;
20170919 08:08:00 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:695 fgapiserverdb get_task_record - select file
      ,if(path is null or length(path)=0,          'NEEDED',          'READY') status
      ,if(path is NULL,'',path)
from task_input_file
where task_id=31
order by file_id asc;
20170919 08:08:00 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:720 fgapiserverdb get_task_record - select file
      ,if(path is NULL,'',path)
from task_output_file
where task_id=31
order by file_id asc;
20170919 08:08:00 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:747 fgapiserverdb get_task_record - select   data_name
 ,data_value
 ,data_desc
 ,data_type
 ,data_proto
 ,date_format(creation,              '%Y-%m-%dT%TZ') creation
 ,date_format(last_change,              '%Y-%m-%dT%TZ') last_change
from runtime_data
where task_id=31
order by data_id asc;
20170919 08:08:00 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
Task '31' record: '{'status': 'WAITING', 'description': 'tester application run', 'creation': '2017-09-19T08:04:22Z', 'iosandbox': '/tmp/258e35ac-9d11-11e7-a33d-fa163e876b0e', 'user': '00000000-0000-0000-0000-000000000000', 'id': '31', 'output_files': [{'url': '', 'name': 'output.txt'}, {'url': '', 'name': 'stdout.txt'}, {'url': '', 'name': 'stderr.txt'}], 'application': '5', 'arguments': [], 'runtime_data': [], 'input_files': [{'status': 'NEEDED', 'name': 'input.txt'}], 'last_change': '2017-09-19T08:04:22Z'}'
20170919 08:08:00 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:1264 fgapiserverdb get_task_io_sandbox - select iosandbox from task where id=31;
20170919 08:08:00 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
IO sandbox for task '31': '/tmp/258e35ac-9d11-11e7-a33d-fa163e876b0e'
20170919 08:08:00 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:1221 fgapiserverdb setup_default_inputs - select file
      ,path
from application_file
where app_id = (select app_id
                from task
                where id=31)  and path is not NULL;
20170919 08:08:00 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
Default input files for task '31' successfully processed
20170919 08:08:00 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:1296 fgapiserverdb update_input_sandbox_file - update task_input_file
set path=/tmp/258e35ac-9d11-11e7-a33d-fa163e876b0e
where task_id=31
  and file=input.txt;
20170919 08:08:00 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
input sandbox for task '31' successfully updated
20170919 08:08:00 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:1326 fgapiserverdb is_input_sandbox_ready - select   sum(if(path is NULL,0,1))=count(*) or count(*)=0 sb_ready
from task_input_file
where task_id=31;
20170919 08:08:00 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
sandbox ready for task '31' is True
20170919 08:08:00 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:653 fgapiserverdb get_task_record - select  id
,status
,date_format(creation, '%Y-%m-%dT%TZ') creation
,date_format(last_change, '%Y-%m-%dT%TZ') last_change
,app_id
,description
,status
,user
,iosandbox
from task
where id=31
  and status != "PURGED";
20170919 08:08:00 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:679 fgapiserverdb get_task_record - select argument
from task_arguments
where task_id=31
order by arg_id asc;
20170919 08:08:00 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:695 fgapiserverdb get_task_record - select file
      ,if(path is null or length(path)=0,          'NEEDED',          'READY') status
      ,if(path is NULL,'',path)
from task_input_file
where task_id=31
order by file_id asc;
20170919 08:08:00 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:720 fgapiserverdb get_task_record - select file
      ,if(path is NULL,'',path)
from task_output_file
where task_id=31
order by file_id asc;
20170919 08:08:00 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:747 fgapiserverdb get_task_record - select   data_name
 ,data_value
 ,data_desc
 ,data_type
 ,data_proto
 ,date_format(creation,              '%Y-%m-%dT%TZ') creation
 ,date_format(last_change,              '%Y-%m-%dT%TZ') last_change
from runtime_data
where task_id=31
order by data_id asc;
20170919 08:08:00 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
Task '31' record: '{'status': 'WAITING', 'description': 'tester application run', 'creation': '2017-09-19T08:04:22Z', 'iosandbox': '/tmp/258e35ac-9d11-11e7-a33d-fa163e876b0e', 'user': '00000000-0000-0000-0000-000000000000', 'id': '31', 'output_files': [{'url': '', 'name': 'output.txt'}, {'url': '', 'name': 'stdout.txt'}, {'url': '', 'name': 'stderr.txt'}], 'application': '5', 'arguments': [], 'runtime_data': [], 'input_files': [{'status': 'READY', 'url': 'file?path=%2Ftmp%2F258e35ac-9d11-11e7-a33d-fa163e876b0e&name=input.txt', 'name': 'input.txt'}], 'last_change': '2017-09-19T08:04:22Z'}'
20170919 08:08:00 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:653 fgapiserverdb get_task_record - select  id
,status
,date_format(creation, '%Y-%m-%dT%TZ') creation
,date_format(last_change, '%Y-%m-%dT%TZ') last_change
,app_id
,description
,status
,user
,iosandbox
from task
where id=31
  and status != "PURGED";
20170919 08:08:00 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:679 fgapiserverdb get_task_record - select argument
from task_arguments
where task_id=31
order by arg_id asc;
20170919 08:08:00 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:695 fgapiserverdb get_task_record - select file
      ,if(path is null or length(path)=0,          'NEEDED',          'READY') status
      ,if(path is NULL,'',path)
from task_input_file
where task_id=31
order by file_id asc;
20170919 08:08:00 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:720 fgapiserverdb get_task_record - select file
      ,if(path is NULL,'',path)
from task_output_file
where task_id=31
order by file_id asc;
20170919 08:08:00 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:747 fgapiserverdb get_task_record - select   data_name
 ,data_value
 ,data_desc
 ,data_type
 ,data_proto
 ,date_format(creation,              '%Y-%m-%dT%TZ') creation
 ,date_format(last_change,              '%Y-%m-%dT%TZ') last_change
from runtime_data
where task_id=31
order by data_id asc;
20170919 08:08:00 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
Task '31' record: '{'status': 'WAITING', 'description': 'tester application run', 'creation': '2017-09-19T08:04:22Z', 'iosandbox': '/tmp/258e35ac-9d11-11e7-a33d-fa163e876b0e', 'user': '00000000-0000-0000-0000-000000000000', 'id': '31', 'output_files': [{'url': '', 'name': 'output.txt'}, {'url': '', 'name': 'stdout.txt'}, {'url': '', 'name': 'stderr.txt'}], 'application': '5', 'arguments': [], 'runtime_data': [], 'input_files': [{'status': 'READY', 'url': 'file?path=%2Ftmp%2F258e35ac-9d11-11e7-a33d-fa163e876b0e&name=input.txt', 'name': 'input.txt'}], 'last_change': '2017-09-19T08:04:22Z'}'
20170919 08:08:00 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:881 fgapiserverdb get_app_detail - select id
      ,name
      ,description
      ,outcome
      ,date_format(creation, '%Y-%m-%dT%TZ') creation
      ,enabled
from application
where id=5;
20170919 08:08:00 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:900 fgapiserverdb get_app_detail - select pname
      ,pvalue
from application_parameter
where app_id=5
order by param_id asc;
20170919 08:08:00 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:921 fgapiserverdb get_app_detail - select id
      ,name
      ,description
      ,date_format(creation, '%Y-%m-%dT%TZ') creation
      ,if(enabled,'enabled','disabled') status
      ,if(vinfra,'virtual','real') status
from infrastructure
where app_id=5;
20170919 08:08:00 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:942 fgapiserverdb get_app_detail - select pname, pvalue
from infrastructure_parameter
where infra_id=6
order by param_id asc;
20170919 08:08:00 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
Details for app '5': '{'infrastructures': [{'status': 'enabled', 'description': 'SSH Test infrastructure for fgtest', 'parameters': [{'name': 'jobservice', 'value': 'ssh://localhost'}, {'name': 'username', 'value': 'fgtest_test'}, {'name': 'password', 'value': 'N9lHmocm'}], 'creation': '2017-07-07T06:42:50Z', 'virtual': 'real', 'id': '6', 'name': 'SSH Test infrastructure'}], 'description': 'FutureGateway tester application', 'parameters': [{'param_name': 'target_executor', 'param_value': 'GridEngine'}, {'param_name': 'jobdesc_executable', 'param_value': 'cp input.txt ouput.txt && hostname | tee -a output.txt'}, {'param_name': 'jobdesc_output', 'param_value': 'stdout.txt'}, {'param_name': 'jobdesc_error', 'param_value': 'stderr.txt'}], 'creation': '2017-07-07T06:42:51Z', 'enabled': True, 'outcome': 'JOB', 'id': '5', 'name': 'Tester application'}'
20170919 08:08:00 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
Task '31' info: '{'status': 'WAITING', 'description': 'tester application run', 'creation': '2017-09-19T08:04:22Z', 'iosandbox': '/tmp/258e35ac-9d11-11e7-a33d-fa163e876b0e', 'user': '00000000-0000-0000-0000-000000000000', 'id': '31', 'output_files': [{'url': '', 'name': 'output.txt'}, {'url': '', 'name': 'stdout.txt'}, {'url': '', 'name': 'stderr.txt'}], 'application': {'infrastructures': [{'status': 'enabled', 'description': 'SSH Test infrastructure for fgtest', 'parameters': [{'name': 'jobservice', 'value': 'ssh://localhost'}, {'name': 'username', 'value': 'fgtest_test'}, {'name': 'password', 'value': 'N9lHmocm'}], 'creation': '2017-07-07T06:42:50Z', 'virtual': 'real', 'id': '6', 'name': 'SSH Test infrastructure'}], 'description': 'FutureGateway tester application', 'parameters': [{'param_name': 'target_executor', 'param_value': 'GridEngine'}, {'param_name': 'jobdesc_executable', 'param_value': 'cp input.txt ouput.txt && hostname | tee -a output.txt'}, {'param_name': 'jobdesc_output', 'param_value': 'stdout.txt'}, {'param_name': 'jobdesc_error', 'param_value': 'stderr.txt'}], 'creation': '2017-07-07T06:42:51Z', 'enabled': True, 'outcome': 'JOB', 'id': '5', 'name': 'Tester application'}, 'arguments': [], 'runtime_data': [], 'input_files': [{'status': 'READY', 'url': 'file?path=%2Ftmp%2F258e35ac-9d11-11e7-a33d-fa163e876b0e&name=input.txt', 'name': 'input.txt'}], 'last_change': '2017-09-19T08:04:22Z'}'
20170919 08:08:00 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:1433 fgapiserverdb enqueue_task_request - insert into as_queue (
   task_id       
  ,target_id     
  ,target        
  ,action        
  ,status        
  ,target_status 
  ,creation      
  ,last_change   
  ,check_ts      
  ,action_info   
) values (31,
          NULL,
          GridEngine,
          'SUBMIT',
          'QUEUED',
          NULL,
          now(),
          now(),
          now(),
          /tmp/258e35ac-9d11-11e7-a33d-fa163e876b0e);
20170919 08:08:00 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:1439 fgapiserverdb enqueue_task_request - update task set status='SUBMIT', 
last_change=now() where id=31;
20170919 08:08:00 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
Task '{'status': 'WAITING', 'description': 'tester application run', 'creation': '2017-09-19T08:04:22Z', 'iosandbox': '/tmp/258e35ac-9d11-11e7-a33d-fa163e876b0e', 'user': '00000000-0000-0000-0000-000000000000', 'id': '31', 'output_files': [{'url': '', 'name': 'output.txt'}, {'url': '', 'name': 'stdout.txt'}, {'url': '', 'name': 'stderr.txt'}], 'application': {'infrastructures': [{'status': 'enabled', 'description': 'SSH Test infrastructure for fgtest', 'parameters': [{'name': 'jobservice', 'value': 'ssh://localhost'}, {'name': 'username', 'value': 'fgtest_test'}, {'name': 'password', 'value': 'N9lHmocm'}], 'creation': '2017-07-07T06:42:50Z', 'virtual': 'real', 'id': '6', 'name': 'SSH Test infrastructure'}], 'description': 'FutureGateway tester application', 'parameters': [{'param_name': 'target_executor', 'param_value': 'GridEngine'}, {'param_name': 'jobdesc_executable', 'param_value': 'cp input.txt ouput.txt && hostname | tee -a output.txt'}, {'param_name': 'jobdesc_output', 'param_value': 'stdout.txt'}, {'param_name': 'jobdesc_error', 'param_value': 'stderr.txt'}], 'creation': '2017-07-07T06:42:51Z', 'enabled': True, 'outcome': 'JOB', 'id': '5', 'name': 'Tester application'}, 'arguments': [], 'runtime_data': [], 'input_files': [{'status': 'READY', 'url': 'file?path=%2Ftmp%2F258e35ac-9d11-11e7-a33d-fa163e876b0e&name=input.txt', 'name': 'input.txt'}], 'last_change': '2017-09-19T08:04:22Z'}' enqueued successfully
20170919 08:08:00 INFO /home/futuregateway/devel/fgAPIServer/venv/local/lib/python2.7/site-packages/werkzeug/_internal.py:87 _internal _log - 127.0.0.1 - - [19/Sep/2017 08:08:00] "POST /v1.0/tasks/31/input HTTP/1.1" 200 -
20170919 08:13:19 DEBUG ./fgapiserver.py:418 fgapiserver load_user - LoadUser: begin
20170919 08:13:19 DEBUG ./fgapiserver.py:430 fgapiserver load_user - LoadUser: using token
20170919 08:13:19 DEBUG ./fgapiserver.py:434 fgapiserver load_user - LoadUser: token is 'Bearer TEST_TOKEN'
20170919 08:13:19 DEBUG ./fgapiserver.py:439 fgapiserver load_user - LoadUser: (PTV)
20170919 08:13:19 DEBUG ./fgapiserver.py:459 fgapiserver load_user - LoadUser: token field is 'TEST_TOKEN'
20170919 08:13:19 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverptv.py:94 fgapiserverptv __init__ - Initializing PTV with:
  Endpoint: 'http://localhost:8889/checktoken'
  Username: 'tokenver_user'
  Password: 'tokenver_pass'

20170919 08:13:19 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverptv.py:114 fgapiserverptv validate_token - Validating token: 'TEST_TOKEN'
20170919 08:13:19 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverptv.py:115 fgapiserverptv validate_token - Connecting PTV service: 'http://localhost:8889/checktoken'
20170919 08:13:19 INFO /home/futuregateway/devel/fgAPIServer/venv/local/lib/python2.7/site-packages/werkzeug/_internal.py:87 _internal _log - 127.0.0.1 - - [19/Sep/2017 08:13:19] "POST /checktoken HTTP/1.1" 200 -
20170919 08:13:19 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverptv.py:129 fgapiserverptv validate_token - Retrieved token info:
{u'error': None, u'_links': [{u'href': u'/checktoken', u'rel': u'self'}], u'groups': [u'Users', u'Developers'], u'subject': u'00000000-0000-0000-0000-000000000000'}
20170919 08:13:19 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverptv.py:150 fgapiserverptv validate_token - Validated token:
{'portal_validate': True, 'portal_group': '', 'portal_user': '', 'portal_groups': [u'Users', u'Developers'], 'portal_subject': u'00000000-0000-0000-0000-000000000000'}
20170919 08:13:19 DEBUG ./fgapiserver.py:464 fgapiserver load_user - LoadUser: validate_token: '{'portal_validate': True, 'portal_group': '', 'portal_user': '', 'portal_groups': [u'Users', u'Developers'], 'portal_subject': u'00000000-0000-0000-0000-000000000000'}'
20170919 08:13:19 DEBUG ./fgapiserver.py:479 fgapiserver load_user - LoadUser: portal_user: 
portal_group: 
portal_groups: [u'Users', u'Developers']
portal_subject: 00000000-0000-0000-0000-000000000000
20170919 08:13:19 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:505 fgapiserverdb get_ptv_groups - select count(*) from fg_group where lower(name)=Users;
20170919 08:13:19 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:505 fgapiserverdb get_ptv_groups - select count(*) from fg_group where lower(name)=Developers;
20170919 08:13:19 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
Passed groups: '[u'Users', u'Developers']' -> valid groups: '[u'Users', u'Developers']'
20170919 08:13:19 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:537 fgapiserverdb register_ptv_subject - select id, name from fg_user where name=00000000-0000-0000-0000-000000000000;
20170919 08:13:19 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
PTV user '00000000-0000-0000-0000-000000000000' record: '(4L, '00000000-0000-0000-0000-000000000000')'
20170919 08:13:19 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:318 fgapiserverdb register_token - insert into 
fg_token (token, subject, user_id, creation, expiry)
select TEST_TOKEN, 00000000-0000-0000-0000-000000000000, 4, now(), NULL
from dual
where (select count(*)
       from fg_token
       where token=TEST_TOKEN) = 0;
20170919 08:13:19 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
token: 'TEST_TOKEN' successfully registered
20170919 08:13:19 DEBUG ./fgapiserver.py:509 fgapiserver load_user - LoadUser: '4' - '00000000-0000-0000-0000-000000000000'
20170919 08:13:19 DEBUG ./fgapiserver.py:510 fgapiserver load_user - LoadUser: (end)
20170919 08:13:19 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserver_user.py:47 fgapiserver_user __init__ - fgUser - id: '4' - name: '00000000-0000-0000-0000-000000000000'
20170919 08:13:19 DEBUG ./fgapiserver.py:789 fgapiserver tasks - tasks(POST): {}
20170919 08:13:19 DEBUG ./fgapiserver.py:792 fgapiserver tasks - user_name: '00000000-0000-0000-0000-000000000000'
20170919 08:13:19 DEBUG ./fgapiserver.py:793 fgapiserver tasks - user_id: '4'
20170919 08:13:19 DEBUG ./fgapiserver.py:350 fgapiserver authorize_user - AuthUser: (begin)
20170919 08:13:19 DEBUG ./fgapiserver.py:361 fgapiserver authorize_user - AuthUser: user_id: '4' - user_name: '00000000-0000-0000-0000-000000000000'
20170919 08:13:19 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:355 fgapiserverdb verify_user_role - select count(*)>0      
from fg_user        u  
    ,fg_group       g  
    ,fg_user_group ug  
    ,fg_group_role gr  
    ,fg_role        r  
where u.id=4          
  and u.id=ug.user_id  
  and g.id=ug.group_id 
  and g.id=gr.group_id 
  and r.id=gr.role_id  
  and r.name = app_run;
20170919 08:13:19 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
role(s) 'app_run' for user_id '4' is True'
20170919 08:13:19 DEBUG ./fgapiserver.py:367 fgapiserver authorize_user - AuthUser: Auth for user '4' with roles 'app_run' is True
20170919 08:13:19 DEBUG ./fgapiserver.py:880 fgapiserver tasks - [app_run]: auth_state: 'True', auth_msg: ''
20170919 08:13:19 DEBUG ./fgapiserver.py:889 fgapiserver tasks - params: '{u'output_files': [{u'name': u'output.txt'}], u'application': u'5', u'input_files': [{u'name': u'input.txt'}], u'description': u'tester application run', u'arguments': []}'
20170919 08:13:19 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:1006 fgapiserverdb get_app_files - select file
      ,path
      ,override
from application_file
where app_id=5
order by file_id asc;
20170919 08:13:19 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
Files for application '5': '[]'
20170919 08:13:19 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:1035 fgapiserverdb init_task - Application files for app_id 5 are: []
20170919 08:13:19 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:1066 fgapiserverdb init_task - insert into task (id
                 ,creation
                 ,last_change
                 ,app_id
                 ,description
                 ,status
                 ,user
                 ,iosandbox)
select if(max(id) is NULL,1,max(id)+1) -- new id
      ,now()                           -- creation date
      ,now()                           -- last change
      ,5                              -- app_id
      ,tester application run                              -- description
      ,'WAITING'                     -- status WAITING
      ,00000000-0000-0000-0000-000000000000                              -- user
      ,/tmp/658620a6-9d12-11e7-a33d-fa163e876b0e                              -- iosandbox
from task;

20170919 08:13:19 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:1070 fgapiserverdb init_task - select max(id) from task;
20170919 08:13:19 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:1102 fgapiserverdb init_task - Input files processing
20170919 08:13:19 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:1105 fgapiserverdb init_task - file: {u'name': u'input.txt'}
20170919 08:13:19 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:1144 fgapiserverdb init_task - insert into task_input_file (task_id
                            ,file_id
                            ,path
                            ,file)
select 32
      ,if(max(file_id) is NULL,1,max(file_id)+1)
      ,None
      ,input.txt
from task_input_file
where task_id=32
20170919 08:13:19 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:1154 fgapiserverdb init_task - select pvalue
from application_parameter
where app_id=5
 and (   pname='jobdesc_output'
      or pname='jobdesc_error');
20170919 08:13:19 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:1170 fgapiserverdb init_task - insert into task_output_file (task_id
                             ,file_id
                             ,file)
select 32
      ,if(max(file_id) is NULL,1,max(file_id)+1)
      ,output.txt
from task_output_file
where task_id=32
20170919 08:13:19 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:1170 fgapiserverdb init_task - insert into task_output_file (task_id
                             ,file_id
                             ,file)
select 32
      ,if(max(file_id) is NULL,1,max(file_id)+1)
      ,stdout.txt
from task_output_file
where task_id=32
20170919 08:13:19 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:1170 fgapiserverdb init_task - insert into task_output_file (task_id
                             ,file_id
                             ,file)
select 32
      ,if(max(file_id) is NULL,1,max(file_id)+1)
      ,stderr.txt
from task_output_file
where task_id=32
20170919 08:13:19 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
Task successfully inserted with id: '32'
20170919 08:13:19 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:1326 fgapiserverdb is_input_sandbox_ready - select   sum(if(path is NULL,0,1))=count(*) or count(*)=0 sb_ready
from task_input_file
where task_id=32;
20170919 08:13:19 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
sandbox ready for task '32' is False
20170919 08:13:19 DEBUG ./fgapiserver.py:899 fgapiserver tasks - task_id: '32'
20170919 08:13:19 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:653 fgapiserverdb get_task_record - select  id
,status
,date_format(creation, '%Y-%m-%dT%TZ') creation
,date_format(last_change, '%Y-%m-%dT%TZ') last_change
,app_id
,description
,status
,user
,iosandbox
from task
where id=32
  and status != "PURGED";
20170919 08:13:19 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:679 fgapiserverdb get_task_record - select argument
from task_arguments
where task_id=32
order by arg_id asc;
20170919 08:13:19 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:695 fgapiserverdb get_task_record - select file
      ,if(path is null or length(path)=0,          'NEEDED',          'READY') status
      ,if(path is NULL,'',path)
from task_input_file
where task_id=32
order by file_id asc;
20170919 08:13:19 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:720 fgapiserverdb get_task_record - select file
      ,if(path is NULL,'',path)
from task_output_file
where task_id=32
order by file_id asc;
20170919 08:13:19 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:747 fgapiserverdb get_task_record - select   data_name
 ,data_value
 ,data_desc
 ,data_type
 ,data_proto
 ,date_format(creation,              '%Y-%m-%dT%TZ') creation
 ,date_format(last_change,              '%Y-%m-%dT%TZ') last_change
from runtime_data
where task_id=32
order by data_id asc;
20170919 08:13:19 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
Task '32' record: '{'status': 'WAITING', 'description': 'tester application run', 'creation': '2017-09-19T08:13:19Z', 'iosandbox': '/tmp/658620a6-9d12-11e7-a33d-fa163e876b0e', 'user': '00000000-0000-0000-0000-000000000000', 'id': '32', 'output_files': [{'url': '', 'name': 'output.txt'}, {'url': '', 'name': 'stdout.txt'}, {'url': '', 'name': 'stderr.txt'}], 'application': '5', 'arguments': [], 'runtime_data': [], 'input_files': [{'status': 'NEEDED', 'name': 'input.txt'}], 'last_change': '2017-09-19T08:13:19Z'}'
20170919 08:13:19 INFO /home/futuregateway/devel/fgAPIServer/venv/local/lib/python2.7/site-packages/werkzeug/_internal.py:87 _internal _log - 127.0.0.1 - - [19/Sep/2017 08:13:19] "POST /v1.0/tasks HTTP/1.1" 200 -
20170919 08:13:34 DEBUG ./fgapiserver.py:418 fgapiserver load_user - LoadUser: begin
20170919 08:13:34 DEBUG ./fgapiserver.py:430 fgapiserver load_user - LoadUser: using token
20170919 08:13:34 DEBUG ./fgapiserver.py:434 fgapiserver load_user - LoadUser: token is 'Bearer TEST_TOKEN'
20170919 08:13:34 DEBUG ./fgapiserver.py:439 fgapiserver load_user - LoadUser: (PTV)
20170919 08:13:34 DEBUG ./fgapiserver.py:459 fgapiserver load_user - LoadUser: token field is 'TEST_TOKEN'
20170919 08:13:34 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverptv.py:94 fgapiserverptv __init__ - Initializing PTV with:
  Endpoint: 'http://localhost:8889/checktoken'
  Username: 'tokenver_user'
  Password: 'tokenver_pass'

20170919 08:13:34 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverptv.py:114 fgapiserverptv validate_token - Validating token: 'TEST_TOKEN'
20170919 08:13:34 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverptv.py:115 fgapiserverptv validate_token - Connecting PTV service: 'http://localhost:8889/checktoken'
20170919 08:13:34 INFO /home/futuregateway/devel/fgAPIServer/venv/local/lib/python2.7/site-packages/werkzeug/_internal.py:87 _internal _log - 127.0.0.1 - - [19/Sep/2017 08:13:34] "POST /checktoken HTTP/1.1" 200 -
20170919 08:13:34 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverptv.py:129 fgapiserverptv validate_token - Retrieved token info:
{u'error': None, u'_links': [{u'href': u'/checktoken', u'rel': u'self'}], u'groups': [u'Users', u'Developers'], u'subject': u'00000000-0000-0000-0000-000000000000'}
20170919 08:13:34 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverptv.py:150 fgapiserverptv validate_token - Validated token:
{'portal_validate': True, 'portal_group': '', 'portal_user': '', 'portal_groups': [u'Users', u'Developers'], 'portal_subject': u'00000000-0000-0000-0000-000000000000'}
20170919 08:13:34 DEBUG ./fgapiserver.py:464 fgapiserver load_user - LoadUser: validate_token: '{'portal_validate': True, 'portal_group': '', 'portal_user': '', 'portal_groups': [u'Users', u'Developers'], 'portal_subject': u'00000000-0000-0000-0000-000000000000'}'
20170919 08:13:34 DEBUG ./fgapiserver.py:479 fgapiserver load_user - LoadUser: portal_user: 
portal_group: 
portal_groups: [u'Users', u'Developers']
portal_subject: 00000000-0000-0000-0000-000000000000
20170919 08:13:34 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:505 fgapiserverdb get_ptv_groups - select count(*) from fg_group where lower(name)=Users;
20170919 08:13:34 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:505 fgapiserverdb get_ptv_groups - select count(*) from fg_group where lower(name)=Developers;
20170919 08:13:34 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
Passed groups: '[u'Users', u'Developers']' -> valid groups: '[u'Users', u'Developers']'
20170919 08:13:34 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:537 fgapiserverdb register_ptv_subject - select id, name from fg_user where name=00000000-0000-0000-0000-000000000000;
20170919 08:13:34 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
PTV user '00000000-0000-0000-0000-000000000000' record: '(4L, '00000000-0000-0000-0000-000000000000')'
20170919 08:13:34 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:318 fgapiserverdb register_token - insert into 
fg_token (token, subject, user_id, creation, expiry)
select TEST_TOKEN, 00000000-0000-0000-0000-000000000000, 4, now(), NULL
from dual
where (select count(*)
       from fg_token
       where token=TEST_TOKEN) = 0;
20170919 08:13:34 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
token: 'TEST_TOKEN' successfully registered
20170919 08:13:34 DEBUG ./fgapiserver.py:509 fgapiserver load_user - LoadUser: '4' - '00000000-0000-0000-0000-000000000000'
20170919 08:13:34 DEBUG ./fgapiserver.py:510 fgapiserver load_user - LoadUser: (end)
20170919 08:13:34 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserver_user.py:47 fgapiserver_user __init__ - fgUser - id: '4' - name: '00000000-0000-0000-0000-000000000000'
20170919 08:13:34 DEBUG ./fgapiserver.py:1131 fgapiserver task_id_input - task_id_input(POST): {}
20170919 08:13:34 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:653 fgapiserverdb get_task_record - select  id
,status
,date_format(creation, '%Y-%m-%dT%TZ') creation
,date_format(last_change, '%Y-%m-%dT%TZ') last_change
,app_id
,description
,status
,user
,iosandbox
from task
where id=31
  and status != "PURGED";
20170919 08:13:34 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:679 fgapiserverdb get_task_record - select argument
from task_arguments
where task_id=31
order by arg_id asc;
20170919 08:13:34 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:695 fgapiserverdb get_task_record - select file
      ,if(path is null or length(path)=0,          'NEEDED',          'READY') status
      ,if(path is NULL,'',path)
from task_input_file
where task_id=31
order by file_id asc;
20170919 08:13:34 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:720 fgapiserverdb get_task_record - select file
      ,if(path is NULL,'',path)
from task_output_file
where task_id=31
order by file_id asc;
20170919 08:13:34 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:747 fgapiserverdb get_task_record - select   data_name
 ,data_value
 ,data_desc
 ,data_type
 ,data_proto
 ,date_format(creation,              '%Y-%m-%dT%TZ') creation
 ,date_format(last_change,              '%Y-%m-%dT%TZ') last_change
from runtime_data
where task_id=31
order by data_id asc;
20170919 08:13:34 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
Task '31' record: '{'status': 'SUBMIT', 'description': 'tester application run', 'creation': '2017-09-19T08:04:22Z', 'iosandbox': '/tmp/258e35ac-9d11-11e7-a33d-fa163e876b0e', 'user': '00000000-0000-0000-0000-000000000000', 'id': '31', 'output_files': [{'url': '', 'name': 'output.txt'}, {'url': '', 'name': 'stdout.txt'}, {'url': '', 'name': 'stderr.txt'}], 'application': '5', 'arguments': [], 'runtime_data': [], 'input_files': [{'status': 'READY', 'url': 'file?path=%2Ftmp%2F258e35ac-9d11-11e7-a33d-fa163e876b0e&name=input.txt', 'name': 'input.txt'}], 'last_change': '2017-09-19T08:08:00Z'}'
20170919 08:13:34 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:653 fgapiserverdb get_task_record - select  id
,status
,date_format(creation, '%Y-%m-%dT%TZ') creation
,date_format(last_change, '%Y-%m-%dT%TZ') last_change
,app_id
,description
,status
,user
,iosandbox
from task
where id=31
  and status != "PURGED";
20170919 08:13:34 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:679 fgapiserverdb get_task_record - select argument
from task_arguments
where task_id=31
order by arg_id asc;
20170919 08:13:34 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:695 fgapiserverdb get_task_record - select file
      ,if(path is null or length(path)=0,          'NEEDED',          'READY') status
      ,if(path is NULL,'',path)
from task_input_file
where task_id=31
order by file_id asc;
20170919 08:13:34 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:720 fgapiserverdb get_task_record - select file
      ,if(path is NULL,'',path)
from task_output_file
where task_id=31
order by file_id asc;
20170919 08:13:34 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:747 fgapiserverdb get_task_record - select   data_name
 ,data_value
 ,data_desc
 ,data_type
 ,data_proto
 ,date_format(creation,              '%Y-%m-%dT%TZ') creation
 ,date_format(last_change,              '%Y-%m-%dT%TZ') last_change
from runtime_data
where task_id=31
order by data_id asc;
20170919 08:13:34 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
Task '31' record: '{'status': 'SUBMIT', 'description': 'tester application run', 'creation': '2017-09-19T08:04:22Z', 'iosandbox': '/tmp/258e35ac-9d11-11e7-a33d-fa163e876b0e', 'user': '00000000-0000-0000-0000-000000000000', 'id': '31', 'output_files': [{'url': '', 'name': 'output.txt'}, {'url': '', 'name': 'stdout.txt'}, {'url': '', 'name': 'stderr.txt'}], 'application': '5', 'arguments': [], 'runtime_data': [], 'input_files': [{'status': 'READY', 'url': 'file?path=%2Ftmp%2F258e35ac-9d11-11e7-a33d-fa163e876b0e&name=input.txt', 'name': 'input.txt'}], 'last_change': '2017-09-19T08:08:00Z'}'
20170919 08:13:34 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:881 fgapiserverdb get_app_detail - select id
      ,name
      ,description
      ,outcome
      ,date_format(creation, '%Y-%m-%dT%TZ') creation
      ,enabled
from application
where id=5;
20170919 08:13:34 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:900 fgapiserverdb get_app_detail - select pname
      ,pvalue
from application_parameter
where app_id=5
order by param_id asc;
20170919 08:13:34 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:921 fgapiserverdb get_app_detail - select id
      ,name
      ,description
      ,date_format(creation, '%Y-%m-%dT%TZ') creation
      ,if(enabled,'enabled','disabled') status
      ,if(vinfra,'virtual','real') status
from infrastructure
where app_id=5;
20170919 08:13:34 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:942 fgapiserverdb get_app_detail - select pname, pvalue
from infrastructure_parameter
where infra_id=6
order by param_id asc;
20170919 08:13:34 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
Details for app '5': '{'infrastructures': [{'status': 'enabled', 'description': 'SSH Test infrastructure for fgtest', 'parameters': [{'name': 'jobservice', 'value': 'ssh://localhost'}, {'name': 'username', 'value': 'fgtest_test'}, {'name': 'password', 'value': 'N9lHmocm'}], 'creation': '2017-07-07T06:42:50Z', 'virtual': 'real', 'id': '6', 'name': 'SSH Test infrastructure'}], 'description': 'FutureGateway tester application', 'parameters': [{'param_name': 'target_executor', 'param_value': 'GridEngine'}, {'param_name': 'jobdesc_executable', 'param_value': 'cp input.txt ouput.txt && hostname | tee -a output.txt'}, {'param_name': 'jobdesc_output', 'param_value': 'stdout.txt'}, {'param_name': 'jobdesc_error', 'param_value': 'stderr.txt'}], 'creation': '2017-07-07T06:42:51Z', 'enabled': True, 'outcome': 'JOB', 'id': '5', 'name': 'Tester application'}'
20170919 08:13:34 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
Task '31' info: '{'status': 'SUBMIT', 'description': 'tester application run', 'creation': '2017-09-19T08:04:22Z', 'iosandbox': '/tmp/258e35ac-9d11-11e7-a33d-fa163e876b0e', 'user': '00000000-0000-0000-0000-000000000000', 'id': '31', 'output_files': [{'url': '', 'name': 'output.txt'}, {'url': '', 'name': 'stdout.txt'}, {'url': '', 'name': 'stderr.txt'}], 'application': {'infrastructures': [{'status': 'enabled', 'description': 'SSH Test infrastructure for fgtest', 'parameters': [{'name': 'jobservice', 'value': 'ssh://localhost'}, {'name': 'username', 'value': 'fgtest_test'}, {'name': 'password', 'value': 'N9lHmocm'}], 'creation': '2017-07-07T06:42:50Z', 'virtual': 'real', 'id': '6', 'name': 'SSH Test infrastructure'}], 'description': 'FutureGateway tester application', 'parameters': [{'param_name': 'target_executor', 'param_value': 'GridEngine'}, {'param_name': 'jobdesc_executable', 'param_value': 'cp input.txt ouput.txt && hostname | tee -a output.txt'}, {'param_name': 'jobdesc_output', 'param_value': 'stdout.txt'}, {'param_name': 'jobdesc_error', 'param_value': 'stderr.txt'}], 'creation': '2017-07-07T06:42:51Z', 'enabled': True, 'outcome': 'JOB', 'id': '5', 'name': 'Tester application'}, 'arguments': [], 'runtime_data': [], 'input_files': [{'status': 'READY', 'url': 'file?path=%2Ftmp%2F258e35ac-9d11-11e7-a33d-fa163e876b0e&name=input.txt', 'name': 'input.txt'}], 'last_change': '2017-09-19T08:08:00Z'}'
20170919 08:13:34 DEBUG ./fgapiserver.py:241 fgapiserver get_task_app_id - Found app_id: '5' for task_id: '31'
20170919 08:13:34 DEBUG ./fgapiserver.py:350 fgapiserver authorize_user - AuthUser: (begin)
20170919 08:13:34 DEBUG ./fgapiserver.py:361 fgapiserver authorize_user - AuthUser: user_id: '4' - user_name: '00000000-0000-0000-0000-000000000000'
20170919 08:13:34 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:355 fgapiserverdb verify_user_role - select count(*)>0      
from fg_user        u  
    ,fg_group       g  
    ,fg_user_group ug  
    ,fg_group_role gr  
    ,fg_role        r  
where u.id=4          
  and u.id=ug.user_id  
  and g.id=ug.group_id 
  and g.id=gr.group_id 
  and r.id=gr.role_id  
  and r.name = app_run;
20170919 08:13:34 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
role(s) 'app_run' for user_id '4' is True'
20170919 08:13:34 DEBUG ./fgapiserver.py:367 fgapiserver authorize_user - AuthUser: Auth for user '4' with roles 'app_run' is True
20170919 08:13:34 DEBUG ./fgapiserver.py:396 fgapiserver authorize_user - AuthUser: checking for app_id '5'
20170919 08:13:34 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:394 fgapiserverdb verify_user_app - select count(*)>0      
from fg_user        u  
    ,fg_group       g  
    ,application    a  
    ,fg_user_group ug  
    ,fg_group_apps ga  
where u.id=4          
  and u.id=ug.user_id  
  and a.id=5          
  and a.id=ga.app_id   
  and g.id=ug.group_id 
  and g.id=ga.group_id;
20170919 08:13:34 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
User id '4' access to application id '5' is True'
20170919 08:13:34 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:611 fgapiserverdb task_exists - select name from fg_user where id = 4;
20170919 08:13:34 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:1506 fgapiserverdb get_task_list - select id
from task
where status != "PURGED"
  and user = 00000000-0000-0000-0000-000000000000
;
20170919 08:13:34 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
Task list for user '00000000-0000-0000-0000-000000000000', app 'None': '[8L, 9L, 10L, 11L, 12L, 13L, 17L, 20L, 21L, 22L, 23L, 24L, 25L, 26L, 27L, 28L, 29L, 30L, 31L, 32L]'
20170919 08:13:34 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
Task '31' exists is True
20170919 08:13:34 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:653 fgapiserverdb get_task_record - select  id
,status
,date_format(creation, '%Y-%m-%dT%TZ') creation
,date_format(last_change, '%Y-%m-%dT%TZ') last_change
,app_id
,description
,status
,user
,iosandbox
from task
where id=31
  and status != "PURGED";
20170919 08:13:34 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:679 fgapiserverdb get_task_record - select argument
from task_arguments
where task_id=31
order by arg_id asc;
20170919 08:13:34 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:695 fgapiserverdb get_task_record - select file
      ,if(path is null or length(path)=0,          'NEEDED',          'READY') status
      ,if(path is NULL,'',path)
from task_input_file
where task_id=31
order by file_id asc;
20170919 08:13:34 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:720 fgapiserverdb get_task_record - select file
      ,if(path is NULL,'',path)
from task_output_file
where task_id=31
order by file_id asc;
20170919 08:13:34 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:747 fgapiserverdb get_task_record - select   data_name
 ,data_value
 ,data_desc
 ,data_type
 ,data_proto
 ,date_format(creation,              '%Y-%m-%dT%TZ') creation
 ,date_format(last_change,              '%Y-%m-%dT%TZ') last_change
from runtime_data
where task_id=31
order by data_id asc;
20170919 08:13:34 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
Task '31' record: '{'status': 'SUBMIT', 'description': 'tester application run', 'creation': '2017-09-19T08:04:22Z', 'iosandbox': '/tmp/258e35ac-9d11-11e7-a33d-fa163e876b0e', 'user': '00000000-0000-0000-0000-000000000000', 'id': '31', 'output_files': [{'url': '', 'name': 'output.txt'}, {'url': '', 'name': 'stdout.txt'}, {'url': '', 'name': 'stderr.txt'}], 'application': '5', 'arguments': [], 'runtime_data': [], 'input_files': [{'status': 'READY', 'url': 'file?path=%2Ftmp%2F258e35ac-9d11-11e7-a33d-fa163e876b0e&name=input.txt', 'name': 'input.txt'}], 'last_change': '2017-09-19T08:08:00Z'}'
20170919 08:13:34 INFO /home/futuregateway/devel/fgAPIServer/venv/local/lib/python2.7/site-packages/werkzeug/_internal.py:87 _internal _log - 127.0.0.1 - - [19/Sep/2017 08:13:34] "POST /v1.0/tasks/31/input HTTP/1.1" 404 -
20170919 08:13:44 DEBUG ./fgapiserver.py:418 fgapiserver load_user - LoadUser: begin
20170919 08:13:44 DEBUG ./fgapiserver.py:430 fgapiserver load_user - LoadUser: using token
20170919 08:13:44 DEBUG ./fgapiserver.py:434 fgapiserver load_user - LoadUser: token is 'Bearer TEST_TOKEN'
20170919 08:13:44 DEBUG ./fgapiserver.py:439 fgapiserver load_user - LoadUser: (PTV)
20170919 08:13:44 DEBUG ./fgapiserver.py:459 fgapiserver load_user - LoadUser: token field is 'TEST_TOKEN'
20170919 08:13:44 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverptv.py:94 fgapiserverptv __init__ - Initializing PTV with:
  Endpoint: 'http://localhost:8889/checktoken'
  Username: 'tokenver_user'
  Password: 'tokenver_pass'

20170919 08:13:44 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverptv.py:114 fgapiserverptv validate_token - Validating token: 'TEST_TOKEN'
20170919 08:13:44 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverptv.py:115 fgapiserverptv validate_token - Connecting PTV service: 'http://localhost:8889/checktoken'
20170919 08:13:44 INFO /home/futuregateway/devel/fgAPIServer/venv/local/lib/python2.7/site-packages/werkzeug/_internal.py:87 _internal _log - 127.0.0.1 - - [19/Sep/2017 08:13:44] "POST /checktoken HTTP/1.1" 200 -
20170919 08:13:44 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverptv.py:129 fgapiserverptv validate_token - Retrieved token info:
{u'error': None, u'_links': [{u'href': u'/checktoken', u'rel': u'self'}], u'groups': [u'Users', u'Developers'], u'subject': u'00000000-0000-0000-0000-000000000000'}
20170919 08:13:44 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverptv.py:150 fgapiserverptv validate_token - Validated token:
{'portal_validate': True, 'portal_group': '', 'portal_user': '', 'portal_groups': [u'Users', u'Developers'], 'portal_subject': u'00000000-0000-0000-0000-000000000000'}
20170919 08:13:44 DEBUG ./fgapiserver.py:464 fgapiserver load_user - LoadUser: validate_token: '{'portal_validate': True, 'portal_group': '', 'portal_user': '', 'portal_groups': [u'Users', u'Developers'], 'portal_subject': u'00000000-0000-0000-0000-000000000000'}'
20170919 08:13:44 DEBUG ./fgapiserver.py:479 fgapiserver load_user - LoadUser: portal_user: 
portal_group: 
portal_groups: [u'Users', u'Developers']
portal_subject: 00000000-0000-0000-0000-000000000000
20170919 08:13:44 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:505 fgapiserverdb get_ptv_groups - select count(*) from fg_group where lower(name)=Users;
20170919 08:13:44 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:505 fgapiserverdb get_ptv_groups - select count(*) from fg_group where lower(name)=Developers;
20170919 08:13:44 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
Passed groups: '[u'Users', u'Developers']' -> valid groups: '[u'Users', u'Developers']'
20170919 08:13:44 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:537 fgapiserverdb register_ptv_subject - select id, name from fg_user where name=00000000-0000-0000-0000-000000000000;
20170919 08:13:44 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
PTV user '00000000-0000-0000-0000-000000000000' record: '(4L, '00000000-0000-0000-0000-000000000000')'
20170919 08:13:44 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:318 fgapiserverdb register_token - insert into 
fg_token (token, subject, user_id, creation, expiry)
select TEST_TOKEN, 00000000-0000-0000-0000-000000000000, 4, now(), NULL
from dual
where (select count(*)
       from fg_token
       where token=TEST_TOKEN) = 0;
20170919 08:13:44 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
token: 'TEST_TOKEN' successfully registered
20170919 08:13:44 DEBUG ./fgapiserver.py:509 fgapiserver load_user - LoadUser: '4' - '00000000-0000-0000-0000-000000000000'
20170919 08:13:44 DEBUG ./fgapiserver.py:510 fgapiserver load_user - LoadUser: (end)
20170919 08:13:44 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserver_user.py:47 fgapiserver_user __init__ - fgUser - id: '4' - name: '00000000-0000-0000-0000-000000000000'
20170919 08:13:44 DEBUG ./fgapiserver.py:1131 fgapiserver task_id_input - task_id_input(POST): {}
20170919 08:13:44 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:653 fgapiserverdb get_task_record - select  id
,status
,date_format(creation, '%Y-%m-%dT%TZ') creation
,date_format(last_change, '%Y-%m-%dT%TZ') last_change
,app_id
,description
,status
,user
,iosandbox
from task
where id=32
  and status != "PURGED";
20170919 08:13:44 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:679 fgapiserverdb get_task_record - select argument
from task_arguments
where task_id=32
order by arg_id asc;
20170919 08:13:44 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:695 fgapiserverdb get_task_record - select file
      ,if(path is null or length(path)=0,          'NEEDED',          'READY') status
      ,if(path is NULL,'',path)
from task_input_file
where task_id=32
order by file_id asc;
20170919 08:13:44 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:720 fgapiserverdb get_task_record - select file
      ,if(path is NULL,'',path)
from task_output_file
where task_id=32
order by file_id asc;
20170919 08:13:44 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:747 fgapiserverdb get_task_record - select   data_name
 ,data_value
 ,data_desc
 ,data_type
 ,data_proto
 ,date_format(creation,              '%Y-%m-%dT%TZ') creation
 ,date_format(last_change,              '%Y-%m-%dT%TZ') last_change
from runtime_data
where task_id=32
order by data_id asc;
20170919 08:13:44 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
Task '32' record: '{'status': 'WAITING', 'description': 'tester application run', 'creation': '2017-09-19T08:13:19Z', 'iosandbox': '/tmp/658620a6-9d12-11e7-a33d-fa163e876b0e', 'user': '00000000-0000-0000-0000-000000000000', 'id': '32', 'output_files': [{'url': '', 'name': 'output.txt'}, {'url': '', 'name': 'stdout.txt'}, {'url': '', 'name': 'stderr.txt'}], 'application': '5', 'arguments': [], 'runtime_data': [], 'input_files': [{'status': 'NEEDED', 'name': 'input.txt'}], 'last_change': '2017-09-19T08:13:19Z'}'
20170919 08:13:44 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:653 fgapiserverdb get_task_record - select  id
,status
,date_format(creation, '%Y-%m-%dT%TZ') creation
,date_format(last_change, '%Y-%m-%dT%TZ') last_change
,app_id
,description
,status
,user
,iosandbox
from task
where id=32
  and status != "PURGED";
20170919 08:13:44 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:679 fgapiserverdb get_task_record - select argument
from task_arguments
where task_id=32
order by arg_id asc;
20170919 08:13:44 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:695 fgapiserverdb get_task_record - select file
      ,if(path is null or length(path)=0,          'NEEDED',          'READY') status
      ,if(path is NULL,'',path)
from task_input_file
where task_id=32
order by file_id asc;
20170919 08:13:44 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:720 fgapiserverdb get_task_record - select file
      ,if(path is NULL,'',path)
from task_output_file
where task_id=32
order by file_id asc;
20170919 08:13:44 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:747 fgapiserverdb get_task_record - select   data_name
 ,data_value
 ,data_desc
 ,data_type
 ,data_proto
 ,date_format(creation,              '%Y-%m-%dT%TZ') creation
 ,date_format(last_change,              '%Y-%m-%dT%TZ') last_change
from runtime_data
where task_id=32
order by data_id asc;
20170919 08:13:44 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
Task '32' record: '{'status': 'WAITING', 'description': 'tester application run', 'creation': '2017-09-19T08:13:19Z', 'iosandbox': '/tmp/658620a6-9d12-11e7-a33d-fa163e876b0e', 'user': '00000000-0000-0000-0000-000000000000', 'id': '32', 'output_files': [{'url': '', 'name': 'output.txt'}, {'url': '', 'name': 'stdout.txt'}, {'url': '', 'name': 'stderr.txt'}], 'application': '5', 'arguments': [], 'runtime_data': [], 'input_files': [{'status': 'NEEDED', 'name': 'input.txt'}], 'last_change': '2017-09-19T08:13:19Z'}'
20170919 08:13:44 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:881 fgapiserverdb get_app_detail - select id
      ,name
      ,description
      ,outcome
      ,date_format(creation, '%Y-%m-%dT%TZ') creation
      ,enabled
from application
where id=5;
20170919 08:13:44 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:900 fgapiserverdb get_app_detail - select pname
      ,pvalue
from application_parameter
where app_id=5
order by param_id asc;
20170919 08:13:44 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:921 fgapiserverdb get_app_detail - select id
      ,name
      ,description
      ,date_format(creation, '%Y-%m-%dT%TZ') creation
      ,if(enabled,'enabled','disabled') status
      ,if(vinfra,'virtual','real') status
from infrastructure
where app_id=5;
20170919 08:13:44 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:942 fgapiserverdb get_app_detail - select pname, pvalue
from infrastructure_parameter
where infra_id=6
order by param_id asc;
20170919 08:13:44 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
Details for app '5': '{'infrastructures': [{'status': 'enabled', 'description': 'SSH Test infrastructure for fgtest', 'parameters': [{'name': 'jobservice', 'value': 'ssh://localhost'}, {'name': 'username', 'value': 'fgtest_test'}, {'name': 'password', 'value': 'N9lHmocm'}], 'creation': '2017-07-07T06:42:50Z', 'virtual': 'real', 'id': '6', 'name': 'SSH Test infrastructure'}], 'description': 'FutureGateway tester application', 'parameters': [{'param_name': 'target_executor', 'param_value': 'GridEngine'}, {'param_name': 'jobdesc_executable', 'param_value': 'cp input.txt ouput.txt && hostname | tee -a output.txt'}, {'param_name': 'jobdesc_output', 'param_value': 'stdout.txt'}, {'param_name': 'jobdesc_error', 'param_value': 'stderr.txt'}], 'creation': '2017-07-07T06:42:51Z', 'enabled': True, 'outcome': 'JOB', 'id': '5', 'name': 'Tester application'}'
20170919 08:13:44 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
Task '32' info: '{'status': 'WAITING', 'description': 'tester application run', 'creation': '2017-09-19T08:13:19Z', 'iosandbox': '/tmp/658620a6-9d12-11e7-a33d-fa163e876b0e', 'user': '00000000-0000-0000-0000-000000000000', 'id': '32', 'output_files': [{'url': '', 'name': 'output.txt'}, {'url': '', 'name': 'stdout.txt'}, {'url': '', 'name': 'stderr.txt'}], 'application': {'infrastructures': [{'status': 'enabled', 'description': 'SSH Test infrastructure for fgtest', 'parameters': [{'name': 'jobservice', 'value': 'ssh://localhost'}, {'name': 'username', 'value': 'fgtest_test'}, {'name': 'password', 'value': 'N9lHmocm'}], 'creation': '2017-07-07T06:42:50Z', 'virtual': 'real', 'id': '6', 'name': 'SSH Test infrastructure'}], 'description': 'FutureGateway tester application', 'parameters': [{'param_name': 'target_executor', 'param_value': 'GridEngine'}, {'param_name': 'jobdesc_executable', 'param_value': 'cp input.txt ouput.txt && hostname | tee -a output.txt'}, {'param_name': 'jobdesc_output', 'param_value': 'stdout.txt'}, {'param_name': 'jobdesc_error', 'param_value': 'stderr.txt'}], 'creation': '2017-07-07T06:42:51Z', 'enabled': True, 'outcome': 'JOB', 'id': '5', 'name': 'Tester application'}, 'arguments': [], 'runtime_data': [], 'input_files': [{'status': 'NEEDED', 'name': 'input.txt'}], 'last_change': '2017-09-19T08:13:19Z'}'
20170919 08:13:44 DEBUG ./fgapiserver.py:241 fgapiserver get_task_app_id - Found app_id: '5' for task_id: '32'
20170919 08:13:44 DEBUG ./fgapiserver.py:350 fgapiserver authorize_user - AuthUser: (begin)
20170919 08:13:44 DEBUG ./fgapiserver.py:361 fgapiserver authorize_user - AuthUser: user_id: '4' - user_name: '00000000-0000-0000-0000-000000000000'
20170919 08:13:44 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:355 fgapiserverdb verify_user_role - select count(*)>0      
from fg_user        u  
    ,fg_group       g  
    ,fg_user_group ug  
    ,fg_group_role gr  
    ,fg_role        r  
where u.id=4          
  and u.id=ug.user_id  
  and g.id=ug.group_id 
  and g.id=gr.group_id 
  and r.id=gr.role_id  
  and r.name = app_run;
20170919 08:13:44 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
role(s) 'app_run' for user_id '4' is True'
20170919 08:13:44 DEBUG ./fgapiserver.py:367 fgapiserver authorize_user - AuthUser: Auth for user '4' with roles 'app_run' is True
20170919 08:13:44 DEBUG ./fgapiserver.py:396 fgapiserver authorize_user - AuthUser: checking for app_id '5'
20170919 08:13:44 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:394 fgapiserverdb verify_user_app - select count(*)>0      
from fg_user        u  
    ,fg_group       g  
    ,application    a  
    ,fg_user_group ug  
    ,fg_group_apps ga  
where u.id=4          
  and u.id=ug.user_id  
  and a.id=5          
  and a.id=ga.app_id   
  and g.id=ug.group_id 
  and g.id=ga.group_id;
20170919 08:13:44 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
User id '4' access to application id '5' is True'
20170919 08:13:44 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:611 fgapiserverdb task_exists - select name from fg_user where id = 4;
20170919 08:13:44 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:1506 fgapiserverdb get_task_list - select id
from task
where status != "PURGED"
  and user = 00000000-0000-0000-0000-000000000000
;
20170919 08:13:44 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
Task list for user '00000000-0000-0000-0000-000000000000', app 'None': '[8L, 9L, 10L, 11L, 12L, 13L, 17L, 20L, 21L, 22L, 23L, 24L, 25L, 26L, 27L, 28L, 29L, 30L, 31L, 32L]'
20170919 08:13:44 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
Task '32' exists is True
20170919 08:13:44 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:653 fgapiserverdb get_task_record - select  id
,status
,date_format(creation, '%Y-%m-%dT%TZ') creation
,date_format(last_change, '%Y-%m-%dT%TZ') last_change
,app_id
,description
,status
,user
,iosandbox
from task
where id=32
  and status != "PURGED";
20170919 08:13:44 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:679 fgapiserverdb get_task_record - select argument
from task_arguments
where task_id=32
order by arg_id asc;
20170919 08:13:44 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:695 fgapiserverdb get_task_record - select file
      ,if(path is null or length(path)=0,          'NEEDED',          'READY') status
      ,if(path is NULL,'',path)
from task_input_file
where task_id=32
order by file_id asc;
20170919 08:13:44 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:720 fgapiserverdb get_task_record - select file
      ,if(path is NULL,'',path)
from task_output_file
where task_id=32
order by file_id asc;
20170919 08:13:44 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:747 fgapiserverdb get_task_record - select   data_name
 ,data_value
 ,data_desc
 ,data_type
 ,data_proto
 ,date_format(creation,              '%Y-%m-%dT%TZ') creation
 ,date_format(last_change,              '%Y-%m-%dT%TZ') last_change
from runtime_data
where task_id=32
order by data_id asc;
20170919 08:13:44 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
Task '32' record: '{'status': 'WAITING', 'description': 'tester application run', 'creation': '2017-09-19T08:13:19Z', 'iosandbox': '/tmp/658620a6-9d12-11e7-a33d-fa163e876b0e', 'user': '00000000-0000-0000-0000-000000000000', 'id': '32', 'output_files': [{'url': '', 'name': 'output.txt'}, {'url': '', 'name': 'stdout.txt'}, {'url': '', 'name': 'stderr.txt'}], 'application': '5', 'arguments': [], 'runtime_data': [], 'input_files': [{'status': 'NEEDED', 'name': 'input.txt'}], 'last_change': '2017-09-19T08:13:19Z'}'
20170919 08:13:44 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:1264 fgapiserverdb get_task_io_sandbox - select iosandbox from task where id=32;
20170919 08:13:44 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
IO sandbox for task '32': '/tmp/658620a6-9d12-11e7-a33d-fa163e876b0e'
20170919 08:13:44 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:1221 fgapiserverdb setup_default_inputs - select file
      ,path
from application_file
where app_id = (select app_id
                from task
                where id=32)  and path is not NULL;
20170919 08:13:44 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
Default input files for task '32' successfully processed
20170919 08:13:44 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:1296 fgapiserverdb update_input_sandbox_file - update task_input_file
set path=/tmp/658620a6-9d12-11e7-a33d-fa163e876b0e
where task_id=32
  and file=file.txt;
20170919 08:13:44 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
input sandbox for task '32' successfully updated
20170919 08:13:44 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:1326 fgapiserverdb is_input_sandbox_ready - select   sum(if(path is NULL,0,1))=count(*) or count(*)=0 sb_ready
from task_input_file
where task_id=32;
20170919 08:13:44 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
sandbox ready for task '32' is False
20170919 08:13:44 INFO /home/futuregateway/devel/fgAPIServer/venv/local/lib/python2.7/site-packages/werkzeug/_internal.py:87 _internal _log - 127.0.0.1 - - [19/Sep/2017 08:13:44] "POST /v1.0/tasks/32/input HTTP/1.1" 200 -
20170919 08:15:20 DEBUG ./fgapiserver.py:418 fgapiserver load_user - LoadUser: begin
20170919 08:15:20 DEBUG ./fgapiserver.py:430 fgapiserver load_user - LoadUser: using token
20170919 08:15:20 DEBUG ./fgapiserver.py:434 fgapiserver load_user - LoadUser: token is 'Bearer TEST_TOKEN'
20170919 08:15:20 DEBUG ./fgapiserver.py:439 fgapiserver load_user - LoadUser: (PTV)
20170919 08:15:20 DEBUG ./fgapiserver.py:459 fgapiserver load_user - LoadUser: token field is 'TEST_TOKEN'
20170919 08:15:20 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverptv.py:94 fgapiserverptv __init__ - Initializing PTV with:
  Endpoint: 'http://localhost:8889/checktoken'
  Username: 'tokenver_user'
  Password: 'tokenver_pass'

20170919 08:15:20 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverptv.py:114 fgapiserverptv validate_token - Validating token: 'TEST_TOKEN'
20170919 08:15:20 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverptv.py:115 fgapiserverptv validate_token - Connecting PTV service: 'http://localhost:8889/checktoken'
20170919 08:15:20 INFO /home/futuregateway/devel/fgAPIServer/venv/local/lib/python2.7/site-packages/werkzeug/_internal.py:87 _internal _log - 127.0.0.1 - - [19/Sep/2017 08:15:20] "POST /checktoken HTTP/1.1" 200 -
20170919 08:15:20 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverptv.py:129 fgapiserverptv validate_token - Retrieved token info:
{u'error': None, u'_links': [{u'href': u'/checktoken', u'rel': u'self'}], u'groups': [u'Users', u'Developers'], u'subject': u'00000000-0000-0000-0000-000000000000'}
20170919 08:15:20 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverptv.py:150 fgapiserverptv validate_token - Validated token:
{'portal_validate': True, 'portal_group': '', 'portal_user': '', 'portal_groups': [u'Users', u'Developers'], 'portal_subject': u'00000000-0000-0000-0000-000000000000'}
20170919 08:15:20 DEBUG ./fgapiserver.py:464 fgapiserver load_user - LoadUser: validate_token: '{'portal_validate': True, 'portal_group': '', 'portal_user': '', 'portal_groups': [u'Users', u'Developers'], 'portal_subject': u'00000000-0000-0000-0000-000000000000'}'
20170919 08:15:20 DEBUG ./fgapiserver.py:479 fgapiserver load_user - LoadUser: portal_user: 
portal_group: 
portal_groups: [u'Users', u'Developers']
portal_subject: 00000000-0000-0000-0000-000000000000
20170919 08:15:20 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:505 fgapiserverdb get_ptv_groups - select count(*) from fg_group where lower(name)=Users;
20170919 08:15:20 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:505 fgapiserverdb get_ptv_groups - select count(*) from fg_group where lower(name)=Developers;
20170919 08:15:20 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
Passed groups: '[u'Users', u'Developers']' -> valid groups: '[u'Users', u'Developers']'
20170919 08:15:20 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:537 fgapiserverdb register_ptv_subject - select id, name from fg_user where name=00000000-0000-0000-0000-000000000000;
20170919 08:15:20 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
PTV user '00000000-0000-0000-0000-000000000000' record: '(4L, '00000000-0000-0000-0000-000000000000')'
20170919 08:15:20 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:318 fgapiserverdb register_token - insert into 
fg_token (token, subject, user_id, creation, expiry)
select TEST_TOKEN, 00000000-0000-0000-0000-000000000000, 4, now(), NULL
from dual
where (select count(*)
       from fg_token
       where token=TEST_TOKEN) = 0;
20170919 08:15:20 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
token: 'TEST_TOKEN' successfully registered
20170919 08:15:20 DEBUG ./fgapiserver.py:509 fgapiserver load_user - LoadUser: '4' - '00000000-0000-0000-0000-000000000000'
20170919 08:15:20 DEBUG ./fgapiserver.py:510 fgapiserver load_user - LoadUser: (end)
20170919 08:15:20 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserver_user.py:47 fgapiserver_user __init__ - fgUser - id: '4' - name: '00000000-0000-0000-0000-000000000000'
20170919 08:15:20 DEBUG ./fgapiserver.py:965 fgapiserver task_id - tasks(GET)/32: {}
20170919 08:15:20 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:653 fgapiserverdb get_task_record - select  id
,status
,date_format(creation, '%Y-%m-%dT%TZ') creation
,date_format(last_change, '%Y-%m-%dT%TZ') last_change
,app_id
,description
,status
,user
,iosandbox
from task
where id=32
  and status != "PURGED";
20170919 08:15:20 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:679 fgapiserverdb get_task_record - select argument
from task_arguments
where task_id=32
order by arg_id asc;
20170919 08:15:20 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:695 fgapiserverdb get_task_record - select file
      ,if(path is null or length(path)=0,          'NEEDED',          'READY') status
      ,if(path is NULL,'',path)
from task_input_file
where task_id=32
order by file_id asc;
20170919 08:15:20 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:720 fgapiserverdb get_task_record - select file
      ,if(path is NULL,'',path)
from task_output_file
where task_id=32
order by file_id asc;
20170919 08:15:20 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:747 fgapiserverdb get_task_record - select   data_name
 ,data_value
 ,data_desc
 ,data_type
 ,data_proto
 ,date_format(creation,              '%Y-%m-%dT%TZ') creation
 ,date_format(last_change,              '%Y-%m-%dT%TZ') last_change
from runtime_data
where task_id=32
order by data_id asc;
20170919 08:15:20 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
Task '32' record: '{'status': 'WAITING', 'description': 'tester application run', 'creation': '2017-09-19T08:13:19Z', 'iosandbox': '/tmp/658620a6-9d12-11e7-a33d-fa163e876b0e', 'user': '00000000-0000-0000-0000-000000000000', 'id': '32', 'output_files': [{'url': '', 'name': 'output.txt'}, {'url': '', 'name': 'stdout.txt'}, {'url': '', 'name': 'stderr.txt'}], 'application': '5', 'arguments': [], 'runtime_data': [], 'input_files': [{'status': 'NEEDED', 'name': 'input.txt'}], 'last_change': '2017-09-19T08:13:19Z'}'
20170919 08:15:20 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:653 fgapiserverdb get_task_record - select  id
,status
,date_format(creation, '%Y-%m-%dT%TZ') creation
,date_format(last_change, '%Y-%m-%dT%TZ') last_change
,app_id
,description
,status
,user
,iosandbox
from task
where id=32
  and status != "PURGED";
20170919 08:15:20 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:679 fgapiserverdb get_task_record - select argument
from task_arguments
where task_id=32
order by arg_id asc;
20170919 08:15:20 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:695 fgapiserverdb get_task_record - select file
      ,if(path is null or length(path)=0,          'NEEDED',          'READY') status
      ,if(path is NULL,'',path)
from task_input_file
where task_id=32
order by file_id asc;
20170919 08:15:20 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:720 fgapiserverdb get_task_record - select file
      ,if(path is NULL,'',path)
from task_output_file
where task_id=32
order by file_id asc;
20170919 08:15:20 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:747 fgapiserverdb get_task_record - select   data_name
 ,data_value
 ,data_desc
 ,data_type
 ,data_proto
 ,date_format(creation,              '%Y-%m-%dT%TZ') creation
 ,date_format(last_change,              '%Y-%m-%dT%TZ') last_change
from runtime_data
where task_id=32
order by data_id asc;
20170919 08:15:20 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
Task '32' record: '{'status': 'WAITING', 'description': 'tester application run', 'creation': '2017-09-19T08:13:19Z', 'iosandbox': '/tmp/658620a6-9d12-11e7-a33d-fa163e876b0e', 'user': '00000000-0000-0000-0000-000000000000', 'id': '32', 'output_files': [{'url': '', 'name': 'output.txt'}, {'url': '', 'name': 'stdout.txt'}, {'url': '', 'name': 'stderr.txt'}], 'application': '5', 'arguments': [], 'runtime_data': [], 'input_files': [{'status': 'NEEDED', 'name': 'input.txt'}], 'last_change': '2017-09-19T08:13:19Z'}'
20170919 08:15:20 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:881 fgapiserverdb get_app_detail - select id
      ,name
      ,description
      ,outcome
      ,date_format(creation, '%Y-%m-%dT%TZ') creation
      ,enabled
from application
where id=5;
20170919 08:15:20 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:900 fgapiserverdb get_app_detail - select pname
      ,pvalue
from application_parameter
where app_id=5
order by param_id asc;
20170919 08:15:20 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:921 fgapiserverdb get_app_detail - select id
      ,name
      ,description
      ,date_format(creation, '%Y-%m-%dT%TZ') creation
      ,if(enabled,'enabled','disabled') status
      ,if(vinfra,'virtual','real') status
from infrastructure
where app_id=5;
20170919 08:15:20 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:942 fgapiserverdb get_app_detail - select pname, pvalue
from infrastructure_parameter
where infra_id=6
order by param_id asc;
20170919 08:15:20 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
Details for app '5': '{'infrastructures': [{'status': 'enabled', 'description': 'SSH Test infrastructure for fgtest', 'parameters': [{'name': 'jobservice', 'value': 'ssh://localhost'}, {'name': 'username', 'value': 'fgtest_test'}, {'name': 'password', 'value': 'N9lHmocm'}], 'creation': '2017-07-07T06:42:50Z', 'virtual': 'real', 'id': '6', 'name': 'SSH Test infrastructure'}], 'description': 'FutureGateway tester application', 'parameters': [{'param_name': 'target_executor', 'param_value': 'GridEngine'}, {'param_name': 'jobdesc_executable', 'param_value': 'cp input.txt ouput.txt && hostname | tee -a output.txt'}, {'param_name': 'jobdesc_output', 'param_value': 'stdout.txt'}, {'param_name': 'jobdesc_error', 'param_value': 'stderr.txt'}], 'creation': '2017-07-07T06:42:51Z', 'enabled': True, 'outcome': 'JOB', 'id': '5', 'name': 'Tester application'}'
20170919 08:15:20 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
Task '32' info: '{'status': 'WAITING', 'description': 'tester application run', 'creation': '2017-09-19T08:13:19Z', 'iosandbox': '/tmp/658620a6-9d12-11e7-a33d-fa163e876b0e', 'user': '00000000-0000-0000-0000-000000000000', 'id': '32', 'output_files': [{'url': '', 'name': 'output.txt'}, {'url': '', 'name': 'stdout.txt'}, {'url': '', 'name': 'stderr.txt'}], 'application': {'infrastructures': [{'status': 'enabled', 'description': 'SSH Test infrastructure for fgtest', 'parameters': [{'name': 'jobservice', 'value': 'ssh://localhost'}, {'name': 'username', 'value': 'fgtest_test'}, {'name': 'password', 'value': 'N9lHmocm'}], 'creation': '2017-07-07T06:42:50Z', 'virtual': 'real', 'id': '6', 'name': 'SSH Test infrastructure'}], 'description': 'FutureGateway tester application', 'parameters': [{'param_name': 'target_executor', 'param_value': 'GridEngine'}, {'param_name': 'jobdesc_executable', 'param_value': 'cp input.txt ouput.txt && hostname | tee -a output.txt'}, {'param_name': 'jobdesc_output', 'param_value': 'stdout.txt'}, {'param_name': 'jobdesc_error', 'param_value': 'stderr.txt'}], 'creation': '2017-07-07T06:42:51Z', 'enabled': True, 'outcome': 'JOB', 'id': '5', 'name': 'Tester application'}, 'arguments': [], 'runtime_data': [], 'input_files': [{'status': 'NEEDED', 'name': 'input.txt'}], 'last_change': '2017-09-19T08:13:19Z'}'
20170919 08:15:20 DEBUG ./fgapiserver.py:241 fgapiserver get_task_app_id - Found app_id: '5' for task_id: '32'
20170919 08:15:20 DEBUG ./fgapiserver.py:350 fgapiserver authorize_user - AuthUser: (begin)
20170919 08:15:20 DEBUG ./fgapiserver.py:361 fgapiserver authorize_user - AuthUser: user_id: '4' - user_name: '00000000-0000-0000-0000-000000000000'
20170919 08:15:20 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:355 fgapiserverdb verify_user_role - select count(*)>0      
from fg_user        u  
    ,fg_group       g  
    ,fg_user_group ug  
    ,fg_group_role gr  
    ,fg_role        r  
where u.id=4          
  and u.id=ug.user_id  
  and g.id=ug.group_id 
  and g.id=gr.group_id 
  and r.id=gr.role_id  
  and r.name = task_view;
20170919 08:15:20 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
role(s) 'task_view' for user_id '4' is True'
20170919 08:15:20 DEBUG ./fgapiserver.py:367 fgapiserver authorize_user - AuthUser: Auth for user '4' with roles 'task_view' is True
20170919 08:15:20 DEBUG ./fgapiserver.py:396 fgapiserver authorize_user - AuthUser: checking for app_id '5'
20170919 08:15:20 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:394 fgapiserverdb verify_user_app - select count(*)>0      
from fg_user        u  
    ,fg_group       g  
    ,application    a  
    ,fg_user_group ug  
    ,fg_group_apps ga  
where u.id=4          
  and u.id=ug.user_id  
  and a.id=5          
  and a.id=ga.app_id   
  and g.id=ug.group_id 
  and g.id=ga.group_id;
20170919 08:15:20 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
User id '4' access to application id '5' is True'
20170919 08:15:20 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:611 fgapiserverdb task_exists - select name from fg_user where id = 4;
20170919 08:15:20 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:1506 fgapiserverdb get_task_list - select id
from task
where status != "PURGED"
  and user = 00000000-0000-0000-0000-000000000000
;
20170919 08:15:20 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
Task list for user '00000000-0000-0000-0000-000000000000', app 'None': '[8L, 9L, 10L, 11L, 12L, 13L, 17L, 20L, 21L, 22L, 23L, 24L, 25L, 26L, 27L, 28L, 29L, 30L, 31L, 32L]'
20170919 08:15:20 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
Task '32' exists is True
20170919 08:15:20 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:653 fgapiserverdb get_task_record - select  id
,status
,date_format(creation, '%Y-%m-%dT%TZ') creation
,date_format(last_change, '%Y-%m-%dT%TZ') last_change
,app_id
,description
,status
,user
,iosandbox
from task
where id=32
  and status != "PURGED";
20170919 08:15:20 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:679 fgapiserverdb get_task_record - select argument
from task_arguments
where task_id=32
order by arg_id asc;
20170919 08:15:20 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:695 fgapiserverdb get_task_record - select file
      ,if(path is null or length(path)=0,          'NEEDED',          'READY') status
      ,if(path is NULL,'',path)
from task_input_file
where task_id=32
order by file_id asc;
20170919 08:15:20 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:720 fgapiserverdb get_task_record - select file
      ,if(path is NULL,'',path)
from task_output_file
where task_id=32
order by file_id asc;
20170919 08:15:20 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:747 fgapiserverdb get_task_record - select   data_name
 ,data_value
 ,data_desc
 ,data_type
 ,data_proto
 ,date_format(creation,              '%Y-%m-%dT%TZ') creation
 ,date_format(last_change,              '%Y-%m-%dT%TZ') last_change
from runtime_data
where task_id=32
order by data_id asc;
20170919 08:15:20 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
Task '32' record: '{'status': 'WAITING', 'description': 'tester application run', 'creation': '2017-09-19T08:13:19Z', 'iosandbox': '/tmp/658620a6-9d12-11e7-a33d-fa163e876b0e', 'user': '00000000-0000-0000-0000-000000000000', 'id': '32', 'output_files': [{'url': '', 'name': 'output.txt'}, {'url': '', 'name': 'stdout.txt'}, {'url': '', 'name': 'stderr.txt'}], 'application': '5', 'arguments': [], 'runtime_data': [], 'input_files': [{'status': 'NEEDED', 'name': 'input.txt'}], 'last_change': '2017-09-19T08:13:19Z'}'
20170919 08:15:20 INFO /home/futuregateway/devel/fgAPIServer/venv/local/lib/python2.7/site-packages/werkzeug/_internal.py:87 _internal _log - 127.0.0.1 - - [19/Sep/2017 08:15:20] "GET /v1.0/tasks/32 HTTP/1.1" 200 -
20170919 08:15:35 DEBUG ./fgapiserver.py:418 fgapiserver load_user - LoadUser: begin
20170919 08:15:35 DEBUG ./fgapiserver.py:430 fgapiserver load_user - LoadUser: using token
20170919 08:15:35 DEBUG ./fgapiserver.py:434 fgapiserver load_user - LoadUser: token is 'Bearer TEST_TOKEN'
20170919 08:15:35 DEBUG ./fgapiserver.py:439 fgapiserver load_user - LoadUser: (PTV)
20170919 08:15:35 DEBUG ./fgapiserver.py:459 fgapiserver load_user - LoadUser: token field is 'TEST_TOKEN'
20170919 08:15:35 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverptv.py:94 fgapiserverptv __init__ - Initializing PTV with:
  Endpoint: 'http://localhost:8889/checktoken'
  Username: 'tokenver_user'
  Password: 'tokenver_pass'

20170919 08:15:35 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverptv.py:114 fgapiserverptv validate_token - Validating token: 'TEST_TOKEN'
20170919 08:15:35 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverptv.py:115 fgapiserverptv validate_token - Connecting PTV service: 'http://localhost:8889/checktoken'
20170919 08:15:35 INFO /home/futuregateway/devel/fgAPIServer/venv/local/lib/python2.7/site-packages/werkzeug/_internal.py:87 _internal _log - 127.0.0.1 - - [19/Sep/2017 08:15:35] "POST /checktoken HTTP/1.1" 200 -
20170919 08:15:35 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverptv.py:129 fgapiserverptv validate_token - Retrieved token info:
{u'error': None, u'_links': [{u'href': u'/checktoken', u'rel': u'self'}], u'groups': [u'Users', u'Developers'], u'subject': u'00000000-0000-0000-0000-000000000000'}
20170919 08:15:35 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverptv.py:150 fgapiserverptv validate_token - Validated token:
{'portal_validate': True, 'portal_group': '', 'portal_user': '', 'portal_groups': [u'Users', u'Developers'], 'portal_subject': u'00000000-0000-0000-0000-000000000000'}
20170919 08:15:35 DEBUG ./fgapiserver.py:464 fgapiserver load_user - LoadUser: validate_token: '{'portal_validate': True, 'portal_group': '', 'portal_user': '', 'portal_groups': [u'Users', u'Developers'], 'portal_subject': u'00000000-0000-0000-0000-000000000000'}'
20170919 08:15:35 DEBUG ./fgapiserver.py:479 fgapiserver load_user - LoadUser: portal_user: 
portal_group: 
portal_groups: [u'Users', u'Developers']
portal_subject: 00000000-0000-0000-0000-000000000000
20170919 08:15:35 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:505 fgapiserverdb get_ptv_groups - select count(*) from fg_group where lower(name)=Users;
20170919 08:15:35 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:505 fgapiserverdb get_ptv_groups - select count(*) from fg_group where lower(name)=Developers;
20170919 08:15:35 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
Passed groups: '[u'Users', u'Developers']' -> valid groups: '[u'Users', u'Developers']'
20170919 08:15:35 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:537 fgapiserverdb register_ptv_subject - select id, name from fg_user where name=00000000-0000-0000-0000-000000000000;
20170919 08:15:35 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
PTV user '00000000-0000-0000-0000-000000000000' record: '(4L, '00000000-0000-0000-0000-000000000000')'
20170919 08:15:35 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:318 fgapiserverdb register_token - insert into 
fg_token (token, subject, user_id, creation, expiry)
select TEST_TOKEN, 00000000-0000-0000-0000-000000000000, 4, now(), NULL
from dual
where (select count(*)
       from fg_token
       where token=TEST_TOKEN) = 0;
20170919 08:15:35 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
token: 'TEST_TOKEN' successfully registered
20170919 08:15:35 DEBUG ./fgapiserver.py:509 fgapiserver load_user - LoadUser: '4' - '00000000-0000-0000-0000-000000000000'
20170919 08:15:35 DEBUG ./fgapiserver.py:510 fgapiserver load_user - LoadUser: (end)
20170919 08:15:35 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserver_user.py:47 fgapiserver_user __init__ - fgUser - id: '4' - name: '00000000-0000-0000-0000-000000000000'
20170919 08:15:35 DEBUG ./fgapiserver.py:965 fgapiserver task_id - tasks(GET)/31: {}
20170919 08:15:35 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:653 fgapiserverdb get_task_record - select  id
,status
,date_format(creation, '%Y-%m-%dT%TZ') creation
,date_format(last_change, '%Y-%m-%dT%TZ') last_change
,app_id
,description
,status
,user
,iosandbox
from task
where id=31
  and status != "PURGED";
20170919 08:15:35 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:679 fgapiserverdb get_task_record - select argument
from task_arguments
where task_id=31
order by arg_id asc;
20170919 08:15:35 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:695 fgapiserverdb get_task_record - select file
      ,if(path is null or length(path)=0,          'NEEDED',          'READY') status
      ,if(path is NULL,'',path)
from task_input_file
where task_id=31
order by file_id asc;
20170919 08:15:35 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:720 fgapiserverdb get_task_record - select file
      ,if(path is NULL,'',path)
from task_output_file
where task_id=31
order by file_id asc;
20170919 08:15:35 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:747 fgapiserverdb get_task_record - select   data_name
 ,data_value
 ,data_desc
 ,data_type
 ,data_proto
 ,date_format(creation,              '%Y-%m-%dT%TZ') creation
 ,date_format(last_change,              '%Y-%m-%dT%TZ') last_change
from runtime_data
where task_id=31
order by data_id asc;
20170919 08:15:35 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
Task '31' record: '{'status': 'SUBMIT', 'description': 'tester application run', 'creation': '2017-09-19T08:04:22Z', 'iosandbox': '/tmp/258e35ac-9d11-11e7-a33d-fa163e876b0e', 'user': '00000000-0000-0000-0000-000000000000', 'id': '31', 'output_files': [{'url': '', 'name': 'output.txt'}, {'url': '', 'name': 'stdout.txt'}, {'url': '', 'name': 'stderr.txt'}], 'application': '5', 'arguments': [], 'runtime_data': [], 'input_files': [{'status': 'READY', 'url': 'file?path=%2Ftmp%2F258e35ac-9d11-11e7-a33d-fa163e876b0e&name=input.txt', 'name': 'input.txt'}], 'last_change': '2017-09-19T08:08:00Z'}'
20170919 08:15:35 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:653 fgapiserverdb get_task_record - select  id
,status
,date_format(creation, '%Y-%m-%dT%TZ') creation
,date_format(last_change, '%Y-%m-%dT%TZ') last_change
,app_id
,description
,status
,user
,iosandbox
from task
where id=31
  and status != "PURGED";
20170919 08:15:35 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:679 fgapiserverdb get_task_record - select argument
from task_arguments
where task_id=31
order by arg_id asc;
20170919 08:15:35 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:695 fgapiserverdb get_task_record - select file
      ,if(path is null or length(path)=0,          'NEEDED',          'READY') status
      ,if(path is NULL,'',path)
from task_input_file
where task_id=31
order by file_id asc;
20170919 08:15:35 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:720 fgapiserverdb get_task_record - select file
      ,if(path is NULL,'',path)
from task_output_file
where task_id=31
order by file_id asc;
20170919 08:15:35 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:747 fgapiserverdb get_task_record - select   data_name
 ,data_value
 ,data_desc
 ,data_type
 ,data_proto
 ,date_format(creation,              '%Y-%m-%dT%TZ') creation
 ,date_format(last_change,              '%Y-%m-%dT%TZ') last_change
from runtime_data
where task_id=31
order by data_id asc;
20170919 08:15:35 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
Task '31' record: '{'status': 'SUBMIT', 'description': 'tester application run', 'creation': '2017-09-19T08:04:22Z', 'iosandbox': '/tmp/258e35ac-9d11-11e7-a33d-fa163e876b0e', 'user': '00000000-0000-0000-0000-000000000000', 'id': '31', 'output_files': [{'url': '', 'name': 'output.txt'}, {'url': '', 'name': 'stdout.txt'}, {'url': '', 'name': 'stderr.txt'}], 'application': '5', 'arguments': [], 'runtime_data': [], 'input_files': [{'status': 'READY', 'url': 'file?path=%2Ftmp%2F258e35ac-9d11-11e7-a33d-fa163e876b0e&name=input.txt', 'name': 'input.txt'}], 'last_change': '2017-09-19T08:08:00Z'}'
20170919 08:15:35 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:881 fgapiserverdb get_app_detail - select id
      ,name
      ,description
      ,outcome
      ,date_format(creation, '%Y-%m-%dT%TZ') creation
      ,enabled
from application
where id=5;
20170919 08:15:35 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:900 fgapiserverdb get_app_detail - select pname
      ,pvalue
from application_parameter
where app_id=5
order by param_id asc;
20170919 08:15:35 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:921 fgapiserverdb get_app_detail - select id
      ,name
      ,description
      ,date_format(creation, '%Y-%m-%dT%TZ') creation
      ,if(enabled,'enabled','disabled') status
      ,if(vinfra,'virtual','real') status
from infrastructure
where app_id=5;
20170919 08:15:35 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:942 fgapiserverdb get_app_detail - select pname, pvalue
from infrastructure_parameter
where infra_id=6
order by param_id asc;
20170919 08:15:35 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
Details for app '5': '{'infrastructures': [{'status': 'enabled', 'description': 'SSH Test infrastructure for fgtest', 'parameters': [{'name': 'jobservice', 'value': 'ssh://localhost'}, {'name': 'username', 'value': 'fgtest_test'}, {'name': 'password', 'value': 'N9lHmocm'}], 'creation': '2017-07-07T06:42:50Z', 'virtual': 'real', 'id': '6', 'name': 'SSH Test infrastructure'}], 'description': 'FutureGateway tester application', 'parameters': [{'param_name': 'target_executor', 'param_value': 'GridEngine'}, {'param_name': 'jobdesc_executable', 'param_value': 'cp input.txt ouput.txt && hostname | tee -a output.txt'}, {'param_name': 'jobdesc_output', 'param_value': 'stdout.txt'}, {'param_name': 'jobdesc_error', 'param_value': 'stderr.txt'}], 'creation': '2017-07-07T06:42:51Z', 'enabled': True, 'outcome': 'JOB', 'id': '5', 'name': 'Tester application'}'
20170919 08:15:35 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
Task '31' info: '{'status': 'SUBMIT', 'description': 'tester application run', 'creation': '2017-09-19T08:04:22Z', 'iosandbox': '/tmp/258e35ac-9d11-11e7-a33d-fa163e876b0e', 'user': '00000000-0000-0000-0000-000000000000', 'id': '31', 'output_files': [{'url': '', 'name': 'output.txt'}, {'url': '', 'name': 'stdout.txt'}, {'url': '', 'name': 'stderr.txt'}], 'application': {'infrastructures': [{'status': 'enabled', 'description': 'SSH Test infrastructure for fgtest', 'parameters': [{'name': 'jobservice', 'value': 'ssh://localhost'}, {'name': 'username', 'value': 'fgtest_test'}, {'name': 'password', 'value': 'N9lHmocm'}], 'creation': '2017-07-07T06:42:50Z', 'virtual': 'real', 'id': '6', 'name': 'SSH Test infrastructure'}], 'description': 'FutureGateway tester application', 'parameters': [{'param_name': 'target_executor', 'param_value': 'GridEngine'}, {'param_name': 'jobdesc_executable', 'param_value': 'cp input.txt ouput.txt && hostname | tee -a output.txt'}, {'param_name': 'jobdesc_output', 'param_value': 'stdout.txt'}, {'param_name': 'jobdesc_error', 'param_value': 'stderr.txt'}], 'creation': '2017-07-07T06:42:51Z', 'enabled': True, 'outcome': 'JOB', 'id': '5', 'name': 'Tester application'}, 'arguments': [], 'runtime_data': [], 'input_files': [{'status': 'READY', 'url': 'file?path=%2Ftmp%2F258e35ac-9d11-11e7-a33d-fa163e876b0e&name=input.txt', 'name': 'input.txt'}], 'last_change': '2017-09-19T08:08:00Z'}'
20170919 08:15:35 DEBUG ./fgapiserver.py:241 fgapiserver get_task_app_id - Found app_id: '5' for task_id: '31'
20170919 08:15:35 DEBUG ./fgapiserver.py:350 fgapiserver authorize_user - AuthUser: (begin)
20170919 08:15:35 DEBUG ./fgapiserver.py:361 fgapiserver authorize_user - AuthUser: user_id: '4' - user_name: '00000000-0000-0000-0000-000000000000'
20170919 08:15:35 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:355 fgapiserverdb verify_user_role - select count(*)>0      
from fg_user        u  
    ,fg_group       g  
    ,fg_user_group ug  
    ,fg_group_role gr  
    ,fg_role        r  
where u.id=4          
  and u.id=ug.user_id  
  and g.id=ug.group_id 
  and g.id=gr.group_id 
  and r.id=gr.role_id  
  and r.name = task_view;
20170919 08:15:35 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
role(s) 'task_view' for user_id '4' is True'
20170919 08:15:35 DEBUG ./fgapiserver.py:367 fgapiserver authorize_user - AuthUser: Auth for user '4' with roles 'task_view' is True
20170919 08:15:35 DEBUG ./fgapiserver.py:396 fgapiserver authorize_user - AuthUser: checking for app_id '5'
20170919 08:15:35 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:394 fgapiserverdb verify_user_app - select count(*)>0      
from fg_user        u  
    ,fg_group       g  
    ,application    a  
    ,fg_user_group ug  
    ,fg_group_apps ga  
where u.id=4          
  and u.id=ug.user_id  
  and a.id=5          
  and a.id=ga.app_id   
  and g.id=ug.group_id 
  and g.id=ga.group_id;
20170919 08:15:35 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
User id '4' access to application id '5' is True'
20170919 08:15:35 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:611 fgapiserverdb task_exists - select name from fg_user where id = 4;
20170919 08:15:35 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:1506 fgapiserverdb get_task_list - select id
from task
where status != "PURGED"
  and user = 00000000-0000-0000-0000-000000000000
;
20170919 08:15:35 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
Task list for user '00000000-0000-0000-0000-000000000000', app 'None': '[8L, 9L, 10L, 11L, 12L, 13L, 17L, 20L, 21L, 22L, 23L, 24L, 25L, 26L, 27L, 28L, 29L, 30L, 31L, 32L]'
20170919 08:15:35 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
Task '31' exists is True
20170919 08:15:35 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:653 fgapiserverdb get_task_record - select  id
,status
,date_format(creation, '%Y-%m-%dT%TZ') creation
,date_format(last_change, '%Y-%m-%dT%TZ') last_change
,app_id
,description
,status
,user
,iosandbox
from task
where id=31
  and status != "PURGED";
20170919 08:15:35 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:679 fgapiserverdb get_task_record - select argument
from task_arguments
where task_id=31
order by arg_id asc;
20170919 08:15:35 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:695 fgapiserverdb get_task_record - select file
      ,if(path is null or length(path)=0,          'NEEDED',          'READY') status
      ,if(path is NULL,'',path)
from task_input_file
where task_id=31
order by file_id asc;
20170919 08:15:35 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:720 fgapiserverdb get_task_record - select file
      ,if(path is NULL,'',path)
from task_output_file
where task_id=31
order by file_id asc;
20170919 08:15:35 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:747 fgapiserverdb get_task_record - select   data_name
 ,data_value
 ,data_desc
 ,data_type
 ,data_proto
 ,date_format(creation,              '%Y-%m-%dT%TZ') creation
 ,date_format(last_change,              '%Y-%m-%dT%TZ') last_change
from runtime_data
where task_id=31
order by data_id asc;
20170919 08:15:35 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
Task '31' record: '{'status': 'SUBMIT', 'description': 'tester application run', 'creation': '2017-09-19T08:04:22Z', 'iosandbox': '/tmp/258e35ac-9d11-11e7-a33d-fa163e876b0e', 'user': '00000000-0000-0000-0000-000000000000', 'id': '31', 'output_files': [{'url': '', 'name': 'output.txt'}, {'url': '', 'name': 'stdout.txt'}, {'url': '', 'name': 'stderr.txt'}], 'application': '5', 'arguments': [], 'runtime_data': [], 'input_files': [{'status': 'READY', 'url': 'file?path=%2Ftmp%2F258e35ac-9d11-11e7-a33d-fa163e876b0e&name=input.txt', 'name': 'input.txt'}], 'last_change': '2017-09-19T08:08:00Z'}'
20170919 08:15:35 INFO /home/futuregateway/devel/fgAPIServer/venv/local/lib/python2.7/site-packages/werkzeug/_internal.py:87 _internal _log - 127.0.0.1 - - [19/Sep/2017 08:15:35] "GET /v1.0/tasks/31 HTTP/1.1" 200 -
20170919 08:15:52 DEBUG ./fgapiserver.py:418 fgapiserver load_user - LoadUser: begin
20170919 08:15:52 DEBUG ./fgapiserver.py:430 fgapiserver load_user - LoadUser: using token
20170919 08:15:52 DEBUG ./fgapiserver.py:434 fgapiserver load_user - LoadUser: token is 'Bearer TEST_TOKEN'
20170919 08:15:52 DEBUG ./fgapiserver.py:439 fgapiserver load_user - LoadUser: (PTV)
20170919 08:15:52 DEBUG ./fgapiserver.py:459 fgapiserver load_user - LoadUser: token field is 'TEST_TOKEN'
20170919 08:15:52 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverptv.py:94 fgapiserverptv __init__ - Initializing PTV with:
  Endpoint: 'http://localhost:8889/checktoken'
  Username: 'tokenver_user'
  Password: 'tokenver_pass'

20170919 08:15:52 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverptv.py:114 fgapiserverptv validate_token - Validating token: 'TEST_TOKEN'
20170919 08:15:52 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverptv.py:115 fgapiserverptv validate_token - Connecting PTV service: 'http://localhost:8889/checktoken'
20170919 08:15:52 INFO /home/futuregateway/devel/fgAPIServer/venv/local/lib/python2.7/site-packages/werkzeug/_internal.py:87 _internal _log - 127.0.0.1 - - [19/Sep/2017 08:15:52] "POST /checktoken HTTP/1.1" 200 -
20170919 08:15:52 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverptv.py:129 fgapiserverptv validate_token - Retrieved token info:
{u'error': None, u'_links': [{u'href': u'/checktoken', u'rel': u'self'}], u'groups': [u'Users', u'Developers'], u'subject': u'00000000-0000-0000-0000-000000000000'}
20170919 08:15:52 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverptv.py:150 fgapiserverptv validate_token - Validated token:
{'portal_validate': True, 'portal_group': '', 'portal_user': '', 'portal_groups': [u'Users', u'Developers'], 'portal_subject': u'00000000-0000-0000-0000-000000000000'}
20170919 08:15:52 DEBUG ./fgapiserver.py:464 fgapiserver load_user - LoadUser: validate_token: '{'portal_validate': True, 'portal_group': '', 'portal_user': '', 'portal_groups': [u'Users', u'Developers'], 'portal_subject': u'00000000-0000-0000-0000-000000000000'}'
20170919 08:15:52 DEBUG ./fgapiserver.py:479 fgapiserver load_user - LoadUser: portal_user: 
portal_group: 
portal_groups: [u'Users', u'Developers']
portal_subject: 00000000-0000-0000-0000-000000000000
20170919 08:15:52 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:505 fgapiserverdb get_ptv_groups - select count(*) from fg_group where lower(name)=Users;
20170919 08:15:52 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:505 fgapiserverdb get_ptv_groups - select count(*) from fg_group where lower(name)=Developers;
20170919 08:15:52 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
Passed groups: '[u'Users', u'Developers']' -> valid groups: '[u'Users', u'Developers']'
20170919 08:15:52 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:537 fgapiserverdb register_ptv_subject - select id, name from fg_user where name=00000000-0000-0000-0000-000000000000;
20170919 08:15:52 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
PTV user '00000000-0000-0000-0000-000000000000' record: '(4L, '00000000-0000-0000-0000-000000000000')'
20170919 08:15:52 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:318 fgapiserverdb register_token - insert into 
fg_token (token, subject, user_id, creation, expiry)
select TEST_TOKEN, 00000000-0000-0000-0000-000000000000, 4, now(), NULL
from dual
where (select count(*)
       from fg_token
       where token=TEST_TOKEN) = 0;
20170919 08:15:52 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
token: 'TEST_TOKEN' successfully registered
20170919 08:15:52 DEBUG ./fgapiserver.py:509 fgapiserver load_user - LoadUser: '4' - '00000000-0000-0000-0000-000000000000'
20170919 08:15:52 DEBUG ./fgapiserver.py:510 fgapiserver load_user - LoadUser: (end)
20170919 08:15:52 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserver_user.py:47 fgapiserver_user __init__ - fgUser - id: '4' - name: '00000000-0000-0000-0000-000000000000'
20170919 08:15:52 DEBUG ./fgapiserver.py:1235 fgapiserver file - file(GET): {'path': u'/tmp/258e35ac-9d11-11e7-a33d-fa163e876b0e'}
20170919 08:15:52 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:1723 fgapiserverdb get_file_task_id - select task_id from task_output_file
where file=None and path=/tmp/258e35ac-9d11-11e7-a33d-fa163e876b0e
union all
select task_id from task_input_file
where file=None and path=/tmp/258e35ac-9d11-11e7-a33d-fa163e876b0e
union all
select null;
20170919 08:15:52 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
task_id for file name 'None' having path '/tmp/258e35ac-9d11-11e7-a33d-fa163e876b0e' is: 'None'
20170919 08:15:52 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:1753 fgapiserverdb get_file_app_id - select app_id from application_file
where file=None and path=/tmp/258e35ac-9d11-11e7-a33d-fa163e876b0e
union all
select null;
20170919 08:15:52 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
app_id for file name 'None' having path '/tmp/258e35ac-9d11-11e7-a33d-fa163e876b0e' is: 'None'
20170919 08:15:52 INFO /home/futuregateway/devel/fgAPIServer/venv/local/lib/python2.7/site-packages/werkzeug/_internal.py:87 _internal _log - 127.0.0.1 - - [19/Sep/2017 08:15:52] "GET /v1.0/file?path=%2Ftmp%2F258e35ac-9d11-11e7-a33d-fa163e876b0e HTTP/1.1" 404 -
20170919 08:16:16 DEBUG ./fgapiserver.py:418 fgapiserver load_user - LoadUser: begin
20170919 08:16:16 DEBUG ./fgapiserver.py:430 fgapiserver load_user - LoadUser: using token
20170919 08:16:16 DEBUG ./fgapiserver.py:434 fgapiserver load_user - LoadUser: token is 'Bearer TEST_TOKEN'
20170919 08:16:16 DEBUG ./fgapiserver.py:439 fgapiserver load_user - LoadUser: (PTV)
20170919 08:16:16 DEBUG ./fgapiserver.py:459 fgapiserver load_user - LoadUser: token field is 'TEST_TOKEN'
20170919 08:16:16 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverptv.py:94 fgapiserverptv __init__ - Initializing PTV with:
  Endpoint: 'http://localhost:8889/checktoken'
  Username: 'tokenver_user'
  Password: 'tokenver_pass'

20170919 08:16:16 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverptv.py:114 fgapiserverptv validate_token - Validating token: 'TEST_TOKEN'
20170919 08:16:16 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverptv.py:115 fgapiserverptv validate_token - Connecting PTV service: 'http://localhost:8889/checktoken'
20170919 08:16:16 INFO /home/futuregateway/devel/fgAPIServer/venv/local/lib/python2.7/site-packages/werkzeug/_internal.py:87 _internal _log - 127.0.0.1 - - [19/Sep/2017 08:16:16] "POST /checktoken HTTP/1.1" 200 -
20170919 08:16:16 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverptv.py:129 fgapiserverptv validate_token - Retrieved token info:
{u'error': None, u'_links': [{u'href': u'/checktoken', u'rel': u'self'}], u'groups': [u'Users', u'Developers'], u'subject': u'00000000-0000-0000-0000-000000000000'}
20170919 08:16:16 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverptv.py:150 fgapiserverptv validate_token - Validated token:
{'portal_validate': True, 'portal_group': '', 'portal_user': '', 'portal_groups': [u'Users', u'Developers'], 'portal_subject': u'00000000-0000-0000-0000-000000000000'}
20170919 08:16:16 DEBUG ./fgapiserver.py:464 fgapiserver load_user - LoadUser: validate_token: '{'portal_validate': True, 'portal_group': '', 'portal_user': '', 'portal_groups': [u'Users', u'Developers'], 'portal_subject': u'00000000-0000-0000-0000-000000000000'}'
20170919 08:16:16 DEBUG ./fgapiserver.py:479 fgapiserver load_user - LoadUser: portal_user: 
portal_group: 
portal_groups: [u'Users', u'Developers']
portal_subject: 00000000-0000-0000-0000-000000000000
20170919 08:16:16 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:505 fgapiserverdb get_ptv_groups - select count(*) from fg_group where lower(name)=Users;
20170919 08:16:16 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:505 fgapiserverdb get_ptv_groups - select count(*) from fg_group where lower(name)=Developers;
20170919 08:16:16 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
Passed groups: '[u'Users', u'Developers']' -> valid groups: '[u'Users', u'Developers']'
20170919 08:16:16 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:537 fgapiserverdb register_ptv_subject - select id, name from fg_user where name=00000000-0000-0000-0000-000000000000;
20170919 08:16:16 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
PTV user '00000000-0000-0000-0000-000000000000' record: '(4L, '00000000-0000-0000-0000-000000000000')'
20170919 08:16:16 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:318 fgapiserverdb register_token - insert into 
fg_token (token, subject, user_id, creation, expiry)
select TEST_TOKEN, 00000000-0000-0000-0000-000000000000, 4, now(), NULL
from dual
where (select count(*)
       from fg_token
       where token=TEST_TOKEN) = 0;
20170919 08:16:16 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
token: 'TEST_TOKEN' successfully registered
20170919 08:16:16 DEBUG ./fgapiserver.py:509 fgapiserver load_user - LoadUser: '4' - '00000000-0000-0000-0000-000000000000'
20170919 08:16:16 DEBUG ./fgapiserver.py:510 fgapiserver load_user - LoadUser: (end)
20170919 08:16:16 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserver_user.py:47 fgapiserver_user __init__ - fgUser - id: '4' - name: '00000000-0000-0000-0000-000000000000'
20170919 08:16:16 DEBUG ./fgapiserver.py:1235 fgapiserver file - file(GET): {'path': u'/tmp/258e35ac-9d11-11e7-a33d-fa163e876b0e', 'name': u'input.txt'}
20170919 08:16:16 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:1723 fgapiserverdb get_file_task_id - select task_id from task_output_file
where file=input.txt and path=/tmp/258e35ac-9d11-11e7-a33d-fa163e876b0e
union all
select task_id from task_input_file
where file=input.txt and path=/tmp/258e35ac-9d11-11e7-a33d-fa163e876b0e
union all
select null;
20170919 08:16:16 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
task_id for file name 'input.txt' having path '/tmp/258e35ac-9d11-11e7-a33d-fa163e876b0e' is: '31'
20170919 08:16:16 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:653 fgapiserverdb get_task_record - select  id
,status
,date_format(creation, '%Y-%m-%dT%TZ') creation
,date_format(last_change, '%Y-%m-%dT%TZ') last_change
,app_id
,description
,status
,user
,iosandbox
from task
where id=31
  and status != "PURGED";
20170919 08:16:16 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:679 fgapiserverdb get_task_record - select argument
from task_arguments
where task_id=31
order by arg_id asc;
20170919 08:16:16 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:695 fgapiserverdb get_task_record - select file
      ,if(path is null or length(path)=0,          'NEEDED',          'READY') status
      ,if(path is NULL,'',path)
from task_input_file
where task_id=31
order by file_id asc;
20170919 08:16:16 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:720 fgapiserverdb get_task_record - select file
      ,if(path is NULL,'',path)
from task_output_file
where task_id=31
order by file_id asc;
20170919 08:16:16 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:747 fgapiserverdb get_task_record - select   data_name
 ,data_value
 ,data_desc
 ,data_type
 ,data_proto
 ,date_format(creation,              '%Y-%m-%dT%TZ') creation
 ,date_format(last_change,              '%Y-%m-%dT%TZ') last_change
from runtime_data
where task_id=31
order by data_id asc;
20170919 08:16:16 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
Task '31' record: '{'status': 'SUBMIT', 'description': 'tester application run', 'creation': '2017-09-19T08:04:22Z', 'iosandbox': '/tmp/258e35ac-9d11-11e7-a33d-fa163e876b0e', 'user': '00000000-0000-0000-0000-000000000000', 'id': '31', 'output_files': [{'url': '', 'name': 'output.txt'}, {'url': '', 'name': 'stdout.txt'}, {'url': '', 'name': 'stderr.txt'}], 'application': '5', 'arguments': [], 'runtime_data': [], 'input_files': [{'status': 'READY', 'url': 'file?path=%2Ftmp%2F258e35ac-9d11-11e7-a33d-fa163e876b0e&name=input.txt', 'name': 'input.txt'}], 'last_change': '2017-09-19T08:08:00Z'}'
20170919 08:16:16 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:653 fgapiserverdb get_task_record - select  id
,status
,date_format(creation, '%Y-%m-%dT%TZ') creation
,date_format(last_change, '%Y-%m-%dT%TZ') last_change
,app_id
,description
,status
,user
,iosandbox
from task
where id=31
  and status != "PURGED";
20170919 08:16:16 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:679 fgapiserverdb get_task_record - select argument
from task_arguments
where task_id=31
order by arg_id asc;
20170919 08:16:16 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:695 fgapiserverdb get_task_record - select file
      ,if(path is null or length(path)=0,          'NEEDED',          'READY') status
      ,if(path is NULL,'',path)
from task_input_file
where task_id=31
order by file_id asc;
20170919 08:16:16 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:720 fgapiserverdb get_task_record - select file
      ,if(path is NULL,'',path)
from task_output_file
where task_id=31
order by file_id asc;
20170919 08:16:16 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:747 fgapiserverdb get_task_record - select   data_name
 ,data_value
 ,data_desc
 ,data_type
 ,data_proto
 ,date_format(creation,              '%Y-%m-%dT%TZ') creation
 ,date_format(last_change,              '%Y-%m-%dT%TZ') last_change
from runtime_data
where task_id=31
order by data_id asc;
20170919 08:16:16 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
Task '31' record: '{'status': 'SUBMIT', 'description': 'tester application run', 'creation': '2017-09-19T08:04:22Z', 'iosandbox': '/tmp/258e35ac-9d11-11e7-a33d-fa163e876b0e', 'user': '00000000-0000-0000-0000-000000000000', 'id': '31', 'output_files': [{'url': '', 'name': 'output.txt'}, {'url': '', 'name': 'stdout.txt'}, {'url': '', 'name': 'stderr.txt'}], 'application': '5', 'arguments': [], 'runtime_data': [], 'input_files': [{'status': 'READY', 'url': 'file?path=%2Ftmp%2F258e35ac-9d11-11e7-a33d-fa163e876b0e&name=input.txt', 'name': 'input.txt'}], 'last_change': '2017-09-19T08:08:00Z'}'
20170919 08:16:16 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:881 fgapiserverdb get_app_detail - select id
      ,name
      ,description
      ,outcome
      ,date_format(creation, '%Y-%m-%dT%TZ') creation
      ,enabled
from application
where id=5;
20170919 08:16:16 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:900 fgapiserverdb get_app_detail - select pname
      ,pvalue
from application_parameter
where app_id=5
order by param_id asc;
20170919 08:16:16 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:921 fgapiserverdb get_app_detail - select id
      ,name
      ,description
      ,date_format(creation, '%Y-%m-%dT%TZ') creation
      ,if(enabled,'enabled','disabled') status
      ,if(vinfra,'virtual','real') status
from infrastructure
where app_id=5;
20170919 08:16:16 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:942 fgapiserverdb get_app_detail - select pname, pvalue
from infrastructure_parameter
where infra_id=6
order by param_id asc;
20170919 08:16:16 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
Details for app '5': '{'infrastructures': [{'status': 'enabled', 'description': 'SSH Test infrastructure for fgtest', 'parameters': [{'name': 'jobservice', 'value': 'ssh://localhost'}, {'name': 'username', 'value': 'fgtest_test'}, {'name': 'password', 'value': 'N9lHmocm'}], 'creation': '2017-07-07T06:42:50Z', 'virtual': 'real', 'id': '6', 'name': 'SSH Test infrastructure'}], 'description': 'FutureGateway tester application', 'parameters': [{'param_name': 'target_executor', 'param_value': 'GridEngine'}, {'param_name': 'jobdesc_executable', 'param_value': 'cp input.txt ouput.txt && hostname | tee -a output.txt'}, {'param_name': 'jobdesc_output', 'param_value': 'stdout.txt'}, {'param_name': 'jobdesc_error', 'param_value': 'stderr.txt'}], 'creation': '2017-07-07T06:42:51Z', 'enabled': True, 'outcome': 'JOB', 'id': '5', 'name': 'Tester application'}'
20170919 08:16:16 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
Task '31' info: '{'status': 'SUBMIT', 'description': 'tester application run', 'creation': '2017-09-19T08:04:22Z', 'iosandbox': '/tmp/258e35ac-9d11-11e7-a33d-fa163e876b0e', 'user': '00000000-0000-0000-0000-000000000000', 'id': '31', 'output_files': [{'url': '', 'name': 'output.txt'}, {'url': '', 'name': 'stdout.txt'}, {'url': '', 'name': 'stderr.txt'}], 'application': {'infrastructures': [{'status': 'enabled', 'description': 'SSH Test infrastructure for fgtest', 'parameters': [{'name': 'jobservice', 'value': 'ssh://localhost'}, {'name': 'username', 'value': 'fgtest_test'}, {'name': 'password', 'value': 'N9lHmocm'}], 'creation': '2017-07-07T06:42:50Z', 'virtual': 'real', 'id': '6', 'name': 'SSH Test infrastructure'}], 'description': 'FutureGateway tester application', 'parameters': [{'param_name': 'target_executor', 'param_value': 'GridEngine'}, {'param_name': 'jobdesc_executable', 'param_value': 'cp input.txt ouput.txt && hostname | tee -a output.txt'}, {'param_name': 'jobdesc_output', 'param_value': 'stdout.txt'}, {'param_name': 'jobdesc_error', 'param_value': 'stderr.txt'}], 'creation': '2017-07-07T06:42:51Z', 'enabled': True, 'outcome': 'JOB', 'id': '5', 'name': 'Tester application'}, 'arguments': [], 'runtime_data': [], 'input_files': [{'status': 'READY', 'url': 'file?path=%2Ftmp%2F258e35ac-9d11-11e7-a33d-fa163e876b0e&name=input.txt', 'name': 'input.txt'}], 'last_change': '2017-09-19T08:08:00Z'}'
20170919 08:16:16 DEBUG ./fgapiserver.py:241 fgapiserver get_task_app_id - Found app_id: '5' for task_id: '31'
20170919 08:16:16 DEBUG ./fgapiserver.py:350 fgapiserver authorize_user - AuthUser: (begin)
20170919 08:16:16 DEBUG ./fgapiserver.py:361 fgapiserver authorize_user - AuthUser: user_id: '4' - user_name: '00000000-0000-0000-0000-000000000000'
20170919 08:16:16 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:355 fgapiserverdb verify_user_role - select count(*)>0      
from fg_user        u  
    ,fg_group       g  
    ,fg_user_group ug  
    ,fg_group_role gr  
    ,fg_role        r  
where u.id=4          
  and u.id=ug.user_id  
  and g.id=ug.group_id 
  and g.id=gr.group_id 
  and r.id=gr.role_id  
  and r.name = app_run;
20170919 08:16:16 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
role(s) 'app_run' for user_id '4' is True'
20170919 08:16:16 DEBUG ./fgapiserver.py:367 fgapiserver authorize_user - AuthUser: Auth for user '4' with roles 'app_run' is True
20170919 08:16:16 DEBUG ./fgapiserver.py:396 fgapiserver authorize_user - AuthUser: checking for app_id '5'
20170919 08:16:16 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:394 fgapiserverdb verify_user_app - select count(*)>0      
from fg_user        u  
    ,fg_group       g  
    ,application    a  
    ,fg_user_group ug  
    ,fg_group_apps ga  
where u.id=4          
  and u.id=ug.user_id  
  and a.id=5          
  and a.id=ga.app_id   
  and g.id=ug.group_id 
  and g.id=ga.group_id;
20170919 08:16:16 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
User id '4' access to application id '5' is True'
20170919 08:16:16 INFO /home/futuregateway/devel/fgAPIServer/venv/local/lib/python2.7/site-packages/werkzeug/_internal.py:87 _internal _log - 127.0.0.1 - - [19/Sep/2017 08:16:16] "GET /v1.0/file?path=%2Ftmp%2F258e35ac-9d11-11e7-a33d-fa163e876b0e&name=input.txt HTTP/1.1" 200 -
20170919 08:22:29 DEBUG ./fgapiserver.py:418 fgapiserver load_user - LoadUser: begin
20170919 08:22:29 DEBUG ./fgapiserver.py:430 fgapiserver load_user - LoadUser: using token
20170919 08:22:29 DEBUG ./fgapiserver.py:434 fgapiserver load_user - LoadUser: token is 'Bearer TEST_TOKEN'
20170919 08:22:29 DEBUG ./fgapiserver.py:439 fgapiserver load_user - LoadUser: (PTV)
20170919 08:22:29 DEBUG ./fgapiserver.py:459 fgapiserver load_user - LoadUser: token field is 'TEST_TOKEN'
20170919 08:22:29 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverptv.py:94 fgapiserverptv __init__ - Initializing PTV with:
  Endpoint: 'http://localhost:8889/checktoken'
  Username: 'tokenver_user'
  Password: 'tokenver_pass'

20170919 08:22:29 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverptv.py:114 fgapiserverptv validate_token - Validating token: 'TEST_TOKEN'
20170919 08:22:29 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverptv.py:115 fgapiserverptv validate_token - Connecting PTV service: 'http://localhost:8889/checktoken'
20170919 08:22:29 INFO /home/futuregateway/devel/fgAPIServer/venv/local/lib/python2.7/site-packages/werkzeug/_internal.py:87 _internal _log - 127.0.0.1 - - [19/Sep/2017 08:22:29] "POST /checktoken HTTP/1.1" 200 -
20170919 08:22:29 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverptv.py:129 fgapiserverptv validate_token - Retrieved token info:
{u'error': None, u'_links': [{u'href': u'/checktoken', u'rel': u'self'}], u'groups': [u'Users', u'Developers'], u'subject': u'00000000-0000-0000-0000-000000000000'}
20170919 08:22:29 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverptv.py:150 fgapiserverptv validate_token - Validated token:
{'portal_validate': True, 'portal_group': '', 'portal_user': '', 'portal_groups': [u'Users', u'Developers'], 'portal_subject': u'00000000-0000-0000-0000-000000000000'}
20170919 08:22:29 DEBUG ./fgapiserver.py:464 fgapiserver load_user - LoadUser: validate_token: '{'portal_validate': True, 'portal_group': '', 'portal_user': '', 'portal_groups': [u'Users', u'Developers'], 'portal_subject': u'00000000-0000-0000-0000-000000000000'}'
20170919 08:22:29 DEBUG ./fgapiserver.py:479 fgapiserver load_user - LoadUser: portal_user: 
portal_group: 
portal_groups: [u'Users', u'Developers']
portal_subject: 00000000-0000-0000-0000-000000000000
20170919 08:22:29 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:505 fgapiserverdb get_ptv_groups - select count(*) from fg_group where lower(name)=Users;
20170919 08:22:29 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:505 fgapiserverdb get_ptv_groups - select count(*) from fg_group where lower(name)=Developers;
20170919 08:22:29 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
Passed groups: '[u'Users', u'Developers']' -> valid groups: '[u'Users', u'Developers']'
20170919 08:22:29 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:537 fgapiserverdb register_ptv_subject - select id, name from fg_user where name=00000000-0000-0000-0000-000000000000;
20170919 08:22:29 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
PTV user '00000000-0000-0000-0000-000000000000' record: '(4L, '00000000-0000-0000-0000-000000000000')'
20170919 08:22:29 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:318 fgapiserverdb register_token - insert into 
fg_token (token, subject, user_id, creation, expiry)
select TEST_TOKEN, 00000000-0000-0000-0000-000000000000, 4, now(), NULL
from dual
where (select count(*)
       from fg_token
       where token=TEST_TOKEN) = 0;
20170919 08:22:29 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
token: 'TEST_TOKEN' successfully registered
20170919 08:22:29 DEBUG ./fgapiserver.py:509 fgapiserver load_user - LoadUser: '4' - '00000000-0000-0000-0000-000000000000'
20170919 08:22:29 DEBUG ./fgapiserver.py:510 fgapiserver load_user - LoadUser: (end)
20170919 08:22:29 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserver_user.py:47 fgapiserver_user __init__ - fgUser - id: '4' - name: '00000000-0000-0000-0000-000000000000'
20170919 08:22:29 DEBUG ./fgapiserver.py:965 fgapiserver task_id - tasks(GET)/31: {}
20170919 08:22:29 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:653 fgapiserverdb get_task_record - select  id
,status
,date_format(creation, '%Y-%m-%dT%TZ') creation
,date_format(last_change, '%Y-%m-%dT%TZ') last_change
,app_id
,description
,status
,user
,iosandbox
from task
where id=31
  and status != "PURGED";
20170919 08:22:29 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:679 fgapiserverdb get_task_record - select argument
from task_arguments
where task_id=31
order by arg_id asc;
20170919 08:22:29 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:695 fgapiserverdb get_task_record - select file
      ,if(path is null or length(path)=0,          'NEEDED',          'READY') status
      ,if(path is NULL,'',path)
from task_input_file
where task_id=31
order by file_id asc;
20170919 08:22:29 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:720 fgapiserverdb get_task_record - select file
      ,if(path is NULL,'',path)
from task_output_file
where task_id=31
order by file_id asc;
20170919 08:22:29 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:747 fgapiserverdb get_task_record - select   data_name
 ,data_value
 ,data_desc
 ,data_type
 ,data_proto
 ,date_format(creation,              '%Y-%m-%dT%TZ') creation
 ,date_format(last_change,              '%Y-%m-%dT%TZ') last_change
from runtime_data
where task_id=31
order by data_id asc;
20170919 08:22:29 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
Task '31' record: '{'status': 'SUBMIT', 'description': 'tester application run', 'creation': '2017-09-19T08:04:22Z', 'iosandbox': '/tmp/258e35ac-9d11-11e7-a33d-fa163e876b0e', 'user': '00000000-0000-0000-0000-000000000000', 'id': '31', 'output_files': [{'url': '', 'name': 'output.txt'}, {'url': '', 'name': 'stdout.txt'}, {'url': '', 'name': 'stderr.txt'}], 'application': '5', 'arguments': [], 'runtime_data': [], 'input_files': [{'status': 'READY', 'url': 'file?path=%2Ftmp%2F258e35ac-9d11-11e7-a33d-fa163e876b0e&name=input.txt', 'name': 'input.txt'}], 'last_change': '2017-09-19T08:08:00Z'}'
20170919 08:22:29 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:653 fgapiserverdb get_task_record - select  id
,status
,date_format(creation, '%Y-%m-%dT%TZ') creation
,date_format(last_change, '%Y-%m-%dT%TZ') last_change
,app_id
,description
,status
,user
,iosandbox
from task
where id=31
  and status != "PURGED";
20170919 08:22:29 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:679 fgapiserverdb get_task_record - select argument
from task_arguments
where task_id=31
order by arg_id asc;
20170919 08:22:29 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:695 fgapiserverdb get_task_record - select file
      ,if(path is null or length(path)=0,          'NEEDED',          'READY') status
      ,if(path is NULL,'',path)
from task_input_file
where task_id=31
order by file_id asc;
20170919 08:22:29 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:720 fgapiserverdb get_task_record - select file
      ,if(path is NULL,'',path)
from task_output_file
where task_id=31
order by file_id asc;
20170919 08:22:29 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:747 fgapiserverdb get_task_record - select   data_name
 ,data_value
 ,data_desc
 ,data_type
 ,data_proto
 ,date_format(creation,              '%Y-%m-%dT%TZ') creation
 ,date_format(last_change,              '%Y-%m-%dT%TZ') last_change
from runtime_data
where task_id=31
order by data_id asc;
20170919 08:22:29 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
Task '31' record: '{'status': 'SUBMIT', 'description': 'tester application run', 'creation': '2017-09-19T08:04:22Z', 'iosandbox': '/tmp/258e35ac-9d11-11e7-a33d-fa163e876b0e', 'user': '00000000-0000-0000-0000-000000000000', 'id': '31', 'output_files': [{'url': '', 'name': 'output.txt'}, {'url': '', 'name': 'stdout.txt'}, {'url': '', 'name': 'stderr.txt'}], 'application': '5', 'arguments': [], 'runtime_data': [], 'input_files': [{'status': 'READY', 'url': 'file?path=%2Ftmp%2F258e35ac-9d11-11e7-a33d-fa163e876b0e&name=input.txt', 'name': 'input.txt'}], 'last_change': '2017-09-19T08:08:00Z'}'
20170919 08:22:29 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:881 fgapiserverdb get_app_detail - select id
      ,name
      ,description
      ,outcome
      ,date_format(creation, '%Y-%m-%dT%TZ') creation
      ,enabled
from application
where id=5;
20170919 08:22:29 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:900 fgapiserverdb get_app_detail - select pname
      ,pvalue
from application_parameter
where app_id=5
order by param_id asc;
20170919 08:22:29 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:921 fgapiserverdb get_app_detail - select id
      ,name
      ,description
      ,date_format(creation, '%Y-%m-%dT%TZ') creation
      ,if(enabled,'enabled','disabled') status
      ,if(vinfra,'virtual','real') status
from infrastructure
where app_id=5;
20170919 08:22:29 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:942 fgapiserverdb get_app_detail - select pname, pvalue
from infrastructure_parameter
where infra_id=6
order by param_id asc;
20170919 08:22:29 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
Details for app '5': '{'infrastructures': [{'status': 'enabled', 'description': 'SSH Test infrastructure for fgtest', 'parameters': [{'name': 'jobservice', 'value': 'ssh://localhost'}, {'name': 'username', 'value': 'fgtest_test'}, {'name': 'password', 'value': 'N9lHmocm'}], 'creation': '2017-07-07T06:42:50Z', 'virtual': 'real', 'id': '6', 'name': 'SSH Test infrastructure'}], 'description': 'FutureGateway tester application', 'parameters': [{'param_name': 'target_executor', 'param_value': 'GridEngine'}, {'param_name': 'jobdesc_executable', 'param_value': 'cp input.txt ouput.txt && hostname | tee -a output.txt'}, {'param_name': 'jobdesc_output', 'param_value': 'stdout.txt'}, {'param_name': 'jobdesc_error', 'param_value': 'stderr.txt'}], 'creation': '2017-07-07T06:42:51Z', 'enabled': True, 'outcome': 'JOB', 'id': '5', 'name': 'Tester application'}'
20170919 08:22:29 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
Task '31' info: '{'status': 'SUBMIT', 'description': 'tester application run', 'creation': '2017-09-19T08:04:22Z', 'iosandbox': '/tmp/258e35ac-9d11-11e7-a33d-fa163e876b0e', 'user': '00000000-0000-0000-0000-000000000000', 'id': '31', 'output_files': [{'url': '', 'name': 'output.txt'}, {'url': '', 'name': 'stdout.txt'}, {'url': '', 'name': 'stderr.txt'}], 'application': {'infrastructures': [{'status': 'enabled', 'description': 'SSH Test infrastructure for fgtest', 'parameters': [{'name': 'jobservice', 'value': 'ssh://localhost'}, {'name': 'username', 'value': 'fgtest_test'}, {'name': 'password', 'value': 'N9lHmocm'}], 'creation': '2017-07-07T06:42:50Z', 'virtual': 'real', 'id': '6', 'name': 'SSH Test infrastructure'}], 'description': 'FutureGateway tester application', 'parameters': [{'param_name': 'target_executor', 'param_value': 'GridEngine'}, {'param_name': 'jobdesc_executable', 'param_value': 'cp input.txt ouput.txt && hostname | tee -a output.txt'}, {'param_name': 'jobdesc_output', 'param_value': 'stdout.txt'}, {'param_name': 'jobdesc_error', 'param_value': 'stderr.txt'}], 'creation': '2017-07-07T06:42:51Z', 'enabled': True, 'outcome': 'JOB', 'id': '5', 'name': 'Tester application'}, 'arguments': [], 'runtime_data': [], 'input_files': [{'status': 'READY', 'url': 'file?path=%2Ftmp%2F258e35ac-9d11-11e7-a33d-fa163e876b0e&name=input.txt', 'name': 'input.txt'}], 'last_change': '2017-09-19T08:08:00Z'}'
20170919 08:22:29 DEBUG ./fgapiserver.py:241 fgapiserver get_task_app_id - Found app_id: '5' for task_id: '31'
20170919 08:22:29 DEBUG ./fgapiserver.py:350 fgapiserver authorize_user - AuthUser: (begin)
20170919 08:22:29 DEBUG ./fgapiserver.py:361 fgapiserver authorize_user - AuthUser: user_id: '4' - user_name: '00000000-0000-0000-0000-000000000000'
20170919 08:22:29 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:355 fgapiserverdb verify_user_role - select count(*)>0      
from fg_user        u  
    ,fg_group       g  
    ,fg_user_group ug  
    ,fg_group_role gr  
    ,fg_role        r  
where u.id=4          
  and u.id=ug.user_id  
  and g.id=ug.group_id 
  and g.id=gr.group_id 
  and r.id=gr.role_id  
  and r.name = task_view;
20170919 08:22:29 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
role(s) 'task_view' for user_id '4' is True'
20170919 08:22:29 DEBUG ./fgapiserver.py:367 fgapiserver authorize_user - AuthUser: Auth for user '4' with roles 'task_view' is True
20170919 08:22:29 DEBUG ./fgapiserver.py:396 fgapiserver authorize_user - AuthUser: checking for app_id '5'
20170919 08:22:29 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:394 fgapiserverdb verify_user_app - select count(*)>0      
from fg_user        u  
    ,fg_group       g  
    ,application    a  
    ,fg_user_group ug  
    ,fg_group_apps ga  
where u.id=4          
  and u.id=ug.user_id  
  and a.id=5          
  and a.id=ga.app_id   
  and g.id=ug.group_id 
  and g.id=ga.group_id;
20170919 08:22:29 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
User id '4' access to application id '5' is True'
20170919 08:22:29 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:611 fgapiserverdb task_exists - select name from fg_user where id = 4;
20170919 08:22:29 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:1506 fgapiserverdb get_task_list - select id
from task
where status != "PURGED"
  and user = 00000000-0000-0000-0000-000000000000
;
20170919 08:22:29 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
Task list for user '00000000-0000-0000-0000-000000000000', app 'None': '[8L, 9L, 10L, 11L, 12L, 13L, 17L, 20L, 21L, 22L, 23L, 24L, 25L, 26L, 27L, 28L, 29L, 30L, 31L, 32L]'
20170919 08:22:29 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
Task '31' exists is True
20170919 08:22:29 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:653 fgapiserverdb get_task_record - select  id
,status
,date_format(creation, '%Y-%m-%dT%TZ') creation
,date_format(last_change, '%Y-%m-%dT%TZ') last_change
,app_id
,description
,status
,user
,iosandbox
from task
where id=31
  and status != "PURGED";
20170919 08:22:29 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:679 fgapiserverdb get_task_record - select argument
from task_arguments
where task_id=31
order by arg_id asc;
20170919 08:22:29 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:695 fgapiserverdb get_task_record - select file
      ,if(path is null or length(path)=0,          'NEEDED',          'READY') status
      ,if(path is NULL,'',path)
from task_input_file
where task_id=31
order by file_id asc;
20170919 08:22:29 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:720 fgapiserverdb get_task_record - select file
      ,if(path is NULL,'',path)
from task_output_file
where task_id=31
order by file_id asc;
20170919 08:22:29 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:747 fgapiserverdb get_task_record - select   data_name
 ,data_value
 ,data_desc
 ,data_type
 ,data_proto
 ,date_format(creation,              '%Y-%m-%dT%TZ') creation
 ,date_format(last_change,              '%Y-%m-%dT%TZ') last_change
from runtime_data
where task_id=31
order by data_id asc;
20170919 08:22:29 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
Task '31' record: '{'status': 'SUBMIT', 'description': 'tester application run', 'creation': '2017-09-19T08:04:22Z', 'iosandbox': '/tmp/258e35ac-9d11-11e7-a33d-fa163e876b0e', 'user': '00000000-0000-0000-0000-000000000000', 'id': '31', 'output_files': [{'url': '', 'name': 'output.txt'}, {'url': '', 'name': 'stdout.txt'}, {'url': '', 'name': 'stderr.txt'}], 'application': '5', 'arguments': [], 'runtime_data': [], 'input_files': [{'status': 'READY', 'url': 'file?path=%2Ftmp%2F258e35ac-9d11-11e7-a33d-fa163e876b0e&name=input.txt', 'name': 'input.txt'}], 'last_change': '2017-09-19T08:08:00Z'}'
20170919 08:22:29 INFO /home/futuregateway/devel/fgAPIServer/venv/local/lib/python2.7/site-packages/werkzeug/_internal.py:87 _internal _log - 127.0.0.1 - - [19/Sep/2017 08:22:29] "GET /v1.0/tasks/31 HTTP/1.1" 200 -
20170919 08:22:32 DEBUG ./fgapiserver.py:418 fgapiserver load_user - LoadUser: begin
20170919 08:22:32 DEBUG ./fgapiserver.py:430 fgapiserver load_user - LoadUser: using token
20170919 08:22:32 DEBUG ./fgapiserver.py:434 fgapiserver load_user - LoadUser: token is 'Bearer TEST_TOKEN'
20170919 08:22:32 DEBUG ./fgapiserver.py:439 fgapiserver load_user - LoadUser: (PTV)
20170919 08:22:32 DEBUG ./fgapiserver.py:459 fgapiserver load_user - LoadUser: token field is 'TEST_TOKEN'
20170919 08:22:32 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverptv.py:94 fgapiserverptv __init__ - Initializing PTV with:
  Endpoint: 'http://localhost:8889/checktoken'
  Username: 'tokenver_user'
  Password: 'tokenver_pass'

20170919 08:22:32 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverptv.py:114 fgapiserverptv validate_token - Validating token: 'TEST_TOKEN'
20170919 08:22:32 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverptv.py:115 fgapiserverptv validate_token - Connecting PTV service: 'http://localhost:8889/checktoken'
20170919 08:22:32 INFO /home/futuregateway/devel/fgAPIServer/venv/local/lib/python2.7/site-packages/werkzeug/_internal.py:87 _internal _log - 127.0.0.1 - - [19/Sep/2017 08:22:32] "POST /checktoken HTTP/1.1" 200 -
20170919 08:22:32 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverptv.py:129 fgapiserverptv validate_token - Retrieved token info:
{u'error': None, u'_links': [{u'href': u'/checktoken', u'rel': u'self'}], u'groups': [u'Users', u'Developers'], u'subject': u'00000000-0000-0000-0000-000000000000'}
20170919 08:22:32 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverptv.py:150 fgapiserverptv validate_token - Validated token:
{'portal_validate': True, 'portal_group': '', 'portal_user': '', 'portal_groups': [u'Users', u'Developers'], 'portal_subject': u'00000000-0000-0000-0000-000000000000'}
20170919 08:22:32 DEBUG ./fgapiserver.py:464 fgapiserver load_user - LoadUser: validate_token: '{'portal_validate': True, 'portal_group': '', 'portal_user': '', 'portal_groups': [u'Users', u'Developers'], 'portal_subject': u'00000000-0000-0000-0000-000000000000'}'
20170919 08:22:32 DEBUG ./fgapiserver.py:479 fgapiserver load_user - LoadUser: portal_user: 
portal_group: 
portal_groups: [u'Users', u'Developers']
portal_subject: 00000000-0000-0000-0000-000000000000
20170919 08:22:32 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:505 fgapiserverdb get_ptv_groups - select count(*) from fg_group where lower(name)=Users;
20170919 08:22:32 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:505 fgapiserverdb get_ptv_groups - select count(*) from fg_group where lower(name)=Developers;
20170919 08:22:32 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
Passed groups: '[u'Users', u'Developers']' -> valid groups: '[u'Users', u'Developers']'
20170919 08:22:32 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:537 fgapiserverdb register_ptv_subject - select id, name from fg_user where name=00000000-0000-0000-0000-000000000000;
20170919 08:22:32 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
PTV user '00000000-0000-0000-0000-000000000000' record: '(4L, '00000000-0000-0000-0000-000000000000')'
20170919 08:22:32 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:318 fgapiserverdb register_token - insert into 
fg_token (token, subject, user_id, creation, expiry)
select TEST_TOKEN, 00000000-0000-0000-0000-000000000000, 4, now(), NULL
from dual
where (select count(*)
       from fg_token
       where token=TEST_TOKEN) = 0;
20170919 08:22:32 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
token: 'TEST_TOKEN' successfully registered
20170919 08:22:32 DEBUG ./fgapiserver.py:509 fgapiserver load_user - LoadUser: '4' - '00000000-0000-0000-0000-000000000000'
20170919 08:22:32 DEBUG ./fgapiserver.py:510 fgapiserver load_user - LoadUser: (end)
20170919 08:22:32 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserver_user.py:47 fgapiserver_user __init__ - fgUser - id: '4' - name: '00000000-0000-0000-0000-000000000000'
20170919 08:22:32 DEBUG ./fgapiserver.py:965 fgapiserver task_id - tasks(GET)/32: {}
20170919 08:22:32 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:653 fgapiserverdb get_task_record - select  id
,status
,date_format(creation, '%Y-%m-%dT%TZ') creation
,date_format(last_change, '%Y-%m-%dT%TZ') last_change
,app_id
,description
,status
,user
,iosandbox
from task
where id=32
  and status != "PURGED";
20170919 08:22:32 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:679 fgapiserverdb get_task_record - select argument
from task_arguments
where task_id=32
order by arg_id asc;
20170919 08:22:32 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:695 fgapiserverdb get_task_record - select file
      ,if(path is null or length(path)=0,          'NEEDED',          'READY') status
      ,if(path is NULL,'',path)
from task_input_file
where task_id=32
order by file_id asc;
20170919 08:22:32 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:720 fgapiserverdb get_task_record - select file
      ,if(path is NULL,'',path)
from task_output_file
where task_id=32
order by file_id asc;
20170919 08:22:32 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:747 fgapiserverdb get_task_record - select   data_name
 ,data_value
 ,data_desc
 ,data_type
 ,data_proto
 ,date_format(creation,              '%Y-%m-%dT%TZ') creation
 ,date_format(last_change,              '%Y-%m-%dT%TZ') last_change
from runtime_data
where task_id=32
order by data_id asc;
20170919 08:22:32 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
Task '32' record: '{'status': 'WAITING', 'description': 'tester application run', 'creation': '2017-09-19T08:13:19Z', 'iosandbox': '/tmp/658620a6-9d12-11e7-a33d-fa163e876b0e', 'user': '00000000-0000-0000-0000-000000000000', 'id': '32', 'output_files': [{'url': '', 'name': 'output.txt'}, {'url': '', 'name': 'stdout.txt'}, {'url': '', 'name': 'stderr.txt'}], 'application': '5', 'arguments': [], 'runtime_data': [], 'input_files': [{'status': 'NEEDED', 'name': 'input.txt'}], 'last_change': '2017-09-19T08:13:19Z'}'
20170919 08:22:32 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:653 fgapiserverdb get_task_record - select  id
,status
,date_format(creation, '%Y-%m-%dT%TZ') creation
,date_format(last_change, '%Y-%m-%dT%TZ') last_change
,app_id
,description
,status
,user
,iosandbox
from task
where id=32
  and status != "PURGED";
20170919 08:22:32 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:679 fgapiserverdb get_task_record - select argument
from task_arguments
where task_id=32
order by arg_id asc;
20170919 08:22:32 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:695 fgapiserverdb get_task_record - select file
      ,if(path is null or length(path)=0,          'NEEDED',          'READY') status
      ,if(path is NULL,'',path)
from task_input_file
where task_id=32
order by file_id asc;
20170919 08:22:32 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:720 fgapiserverdb get_task_record - select file
      ,if(path is NULL,'',path)
from task_output_file
where task_id=32
order by file_id asc;
20170919 08:22:32 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:747 fgapiserverdb get_task_record - select   data_name
 ,data_value
 ,data_desc
 ,data_type
 ,data_proto
 ,date_format(creation,              '%Y-%m-%dT%TZ') creation
 ,date_format(last_change,              '%Y-%m-%dT%TZ') last_change
from runtime_data
where task_id=32
order by data_id asc;
20170919 08:22:32 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
Task '32' record: '{'status': 'WAITING', 'description': 'tester application run', 'creation': '2017-09-19T08:13:19Z', 'iosandbox': '/tmp/658620a6-9d12-11e7-a33d-fa163e876b0e', 'user': '00000000-0000-0000-0000-000000000000', 'id': '32', 'output_files': [{'url': '', 'name': 'output.txt'}, {'url': '', 'name': 'stdout.txt'}, {'url': '', 'name': 'stderr.txt'}], 'application': '5', 'arguments': [], 'runtime_data': [], 'input_files': [{'status': 'NEEDED', 'name': 'input.txt'}], 'last_change': '2017-09-19T08:13:19Z'}'
20170919 08:22:32 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:881 fgapiserverdb get_app_detail - select id
      ,name
      ,description
      ,outcome
      ,date_format(creation, '%Y-%m-%dT%TZ') creation
      ,enabled
from application
where id=5;
20170919 08:22:32 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:900 fgapiserverdb get_app_detail - select pname
      ,pvalue
from application_parameter
where app_id=5
order by param_id asc;
20170919 08:22:32 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:921 fgapiserverdb get_app_detail - select id
      ,name
      ,description
      ,date_format(creation, '%Y-%m-%dT%TZ') creation
      ,if(enabled,'enabled','disabled') status
      ,if(vinfra,'virtual','real') status
from infrastructure
where app_id=5;
20170919 08:22:32 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:942 fgapiserverdb get_app_detail - select pname, pvalue
from infrastructure_parameter
where infra_id=6
order by param_id asc;
20170919 08:22:32 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
Details for app '5': '{'infrastructures': [{'status': 'enabled', 'description': 'SSH Test infrastructure for fgtest', 'parameters': [{'name': 'jobservice', 'value': 'ssh://localhost'}, {'name': 'username', 'value': 'fgtest_test'}, {'name': 'password', 'value': 'N9lHmocm'}], 'creation': '2017-07-07T06:42:50Z', 'virtual': 'real', 'id': '6', 'name': 'SSH Test infrastructure'}], 'description': 'FutureGateway tester application', 'parameters': [{'param_name': 'target_executor', 'param_value': 'GridEngine'}, {'param_name': 'jobdesc_executable', 'param_value': 'cp input.txt ouput.txt && hostname | tee -a output.txt'}, {'param_name': 'jobdesc_output', 'param_value': 'stdout.txt'}, {'param_name': 'jobdesc_error', 'param_value': 'stderr.txt'}], 'creation': '2017-07-07T06:42:51Z', 'enabled': True, 'outcome': 'JOB', 'id': '5', 'name': 'Tester application'}'
20170919 08:22:32 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
Task '32' info: '{'status': 'WAITING', 'description': 'tester application run', 'creation': '2017-09-19T08:13:19Z', 'iosandbox': '/tmp/658620a6-9d12-11e7-a33d-fa163e876b0e', 'user': '00000000-0000-0000-0000-000000000000', 'id': '32', 'output_files': [{'url': '', 'name': 'output.txt'}, {'url': '', 'name': 'stdout.txt'}, {'url': '', 'name': 'stderr.txt'}], 'application': {'infrastructures': [{'status': 'enabled', 'description': 'SSH Test infrastructure for fgtest', 'parameters': [{'name': 'jobservice', 'value': 'ssh://localhost'}, {'name': 'username', 'value': 'fgtest_test'}, {'name': 'password', 'value': 'N9lHmocm'}], 'creation': '2017-07-07T06:42:50Z', 'virtual': 'real', 'id': '6', 'name': 'SSH Test infrastructure'}], 'description': 'FutureGateway tester application', 'parameters': [{'param_name': 'target_executor', 'param_value': 'GridEngine'}, {'param_name': 'jobdesc_executable', 'param_value': 'cp input.txt ouput.txt && hostname | tee -a output.txt'}, {'param_name': 'jobdesc_output', 'param_value': 'stdout.txt'}, {'param_name': 'jobdesc_error', 'param_value': 'stderr.txt'}], 'creation': '2017-07-07T06:42:51Z', 'enabled': True, 'outcome': 'JOB', 'id': '5', 'name': 'Tester application'}, 'arguments': [], 'runtime_data': [], 'input_files': [{'status': 'NEEDED', 'name': 'input.txt'}], 'last_change': '2017-09-19T08:13:19Z'}'
20170919 08:22:32 DEBUG ./fgapiserver.py:241 fgapiserver get_task_app_id - Found app_id: '5' for task_id: '32'
20170919 08:22:32 DEBUG ./fgapiserver.py:350 fgapiserver authorize_user - AuthUser: (begin)
20170919 08:22:32 DEBUG ./fgapiserver.py:361 fgapiserver authorize_user - AuthUser: user_id: '4' - user_name: '00000000-0000-0000-0000-000000000000'
20170919 08:22:32 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:355 fgapiserverdb verify_user_role - select count(*)>0      
from fg_user        u  
    ,fg_group       g  
    ,fg_user_group ug  
    ,fg_group_role gr  
    ,fg_role        r  
where u.id=4          
  and u.id=ug.user_id  
  and g.id=ug.group_id 
  and g.id=gr.group_id 
  and r.id=gr.role_id  
  and r.name = task_view;
20170919 08:22:32 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
role(s) 'task_view' for user_id '4' is True'
20170919 08:22:32 DEBUG ./fgapiserver.py:367 fgapiserver authorize_user - AuthUser: Auth for user '4' with roles 'task_view' is True
20170919 08:22:32 DEBUG ./fgapiserver.py:396 fgapiserver authorize_user - AuthUser: checking for app_id '5'
20170919 08:22:32 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:394 fgapiserverdb verify_user_app - select count(*)>0      
from fg_user        u  
    ,fg_group       g  
    ,application    a  
    ,fg_user_group ug  
    ,fg_group_apps ga  
where u.id=4          
  and u.id=ug.user_id  
  and a.id=5          
  and a.id=ga.app_id   
  and g.id=ug.group_id 
  and g.id=ga.group_id;
20170919 08:22:32 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
User id '4' access to application id '5' is True'
20170919 08:22:32 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:611 fgapiserverdb task_exists - select name from fg_user where id = 4;
20170919 08:22:32 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:1506 fgapiserverdb get_task_list - select id
from task
where status != "PURGED"
  and user = 00000000-0000-0000-0000-000000000000
;
20170919 08:22:32 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
Task list for user '00000000-0000-0000-0000-000000000000', app 'None': '[8L, 9L, 10L, 11L, 12L, 13L, 17L, 20L, 21L, 22L, 23L, 24L, 25L, 26L, 27L, 28L, 29L, 30L, 31L, 32L]'
20170919 08:22:32 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
Task '32' exists is True
20170919 08:22:32 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:653 fgapiserverdb get_task_record - select  id
,status
,date_format(creation, '%Y-%m-%dT%TZ') creation
,date_format(last_change, '%Y-%m-%dT%TZ') last_change
,app_id
,description
,status
,user
,iosandbox
from task
where id=32
  and status != "PURGED";
20170919 08:22:32 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:679 fgapiserverdb get_task_record - select argument
from task_arguments
where task_id=32
order by arg_id asc;
20170919 08:22:32 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:695 fgapiserverdb get_task_record - select file
      ,if(path is null or length(path)=0,          'NEEDED',          'READY') status
      ,if(path is NULL,'',path)
from task_input_file
where task_id=32
order by file_id asc;
20170919 08:22:32 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:720 fgapiserverdb get_task_record - select file
      ,if(path is NULL,'',path)
from task_output_file
where task_id=32
order by file_id asc;
20170919 08:22:32 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:747 fgapiserverdb get_task_record - select   data_name
 ,data_value
 ,data_desc
 ,data_type
 ,data_proto
 ,date_format(creation,              '%Y-%m-%dT%TZ') creation
 ,date_format(last_change,              '%Y-%m-%dT%TZ') last_change
from runtime_data
where task_id=32
order by data_id asc;
20170919 08:22:32 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
Task '32' record: '{'status': 'WAITING', 'description': 'tester application run', 'creation': '2017-09-19T08:13:19Z', 'iosandbox': '/tmp/658620a6-9d12-11e7-a33d-fa163e876b0e', 'user': '00000000-0000-0000-0000-000000000000', 'id': '32', 'output_files': [{'url': '', 'name': 'output.txt'}, {'url': '', 'name': 'stdout.txt'}, {'url': '', 'name': 'stderr.txt'}], 'application': '5', 'arguments': [], 'runtime_data': [], 'input_files': [{'status': 'NEEDED', 'name': 'input.txt'}], 'last_change': '2017-09-19T08:13:19Z'}'
20170919 08:22:32 INFO /home/futuregateway/devel/fgAPIServer/venv/local/lib/python2.7/site-packages/werkzeug/_internal.py:87 _internal _log - 127.0.0.1 - - [19/Sep/2017 08:22:32] "GET /v1.0/tasks/32 HTTP/1.1" 200 -
20170919 08:22:37 DEBUG ./fgapiserver.py:418 fgapiserver load_user - LoadUser: begin
20170919 08:22:37 DEBUG ./fgapiserver.py:430 fgapiserver load_user - LoadUser: using token
20170919 08:22:37 DEBUG ./fgapiserver.py:434 fgapiserver load_user - LoadUser: token is 'Bearer TEST_TOKEN'
20170919 08:22:37 DEBUG ./fgapiserver.py:439 fgapiserver load_user - LoadUser: (PTV)
20170919 08:22:37 DEBUG ./fgapiserver.py:459 fgapiserver load_user - LoadUser: token field is 'TEST_TOKEN'
20170919 08:22:37 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverptv.py:94 fgapiserverptv __init__ - Initializing PTV with:
  Endpoint: 'http://localhost:8889/checktoken'
  Username: 'tokenver_user'
  Password: 'tokenver_pass'

20170919 08:22:37 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverptv.py:114 fgapiserverptv validate_token - Validating token: 'TEST_TOKEN'
20170919 08:22:37 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverptv.py:115 fgapiserverptv validate_token - Connecting PTV service: 'http://localhost:8889/checktoken'
20170919 08:22:37 INFO /home/futuregateway/devel/fgAPIServer/venv/local/lib/python2.7/site-packages/werkzeug/_internal.py:87 _internal _log - 127.0.0.1 - - [19/Sep/2017 08:22:37] "POST /checktoken HTTP/1.1" 200 -
20170919 08:22:37 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverptv.py:129 fgapiserverptv validate_token - Retrieved token info:
{u'error': None, u'_links': [{u'href': u'/checktoken', u'rel': u'self'}], u'groups': [u'Users', u'Developers'], u'subject': u'00000000-0000-0000-0000-000000000000'}
20170919 08:22:37 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverptv.py:150 fgapiserverptv validate_token - Validated token:
{'portal_validate': True, 'portal_group': '', 'portal_user': '', 'portal_groups': [u'Users', u'Developers'], 'portal_subject': u'00000000-0000-0000-0000-000000000000'}
20170919 08:22:37 DEBUG ./fgapiserver.py:464 fgapiserver load_user - LoadUser: validate_token: '{'portal_validate': True, 'portal_group': '', 'portal_user': '', 'portal_groups': [u'Users', u'Developers'], 'portal_subject': u'00000000-0000-0000-0000-000000000000'}'
20170919 08:22:37 DEBUG ./fgapiserver.py:479 fgapiserver load_user - LoadUser: portal_user: 
portal_group: 
portal_groups: [u'Users', u'Developers']
portal_subject: 00000000-0000-0000-0000-000000000000
20170919 08:22:37 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:505 fgapiserverdb get_ptv_groups - select count(*) from fg_group where lower(name)=Users;
20170919 08:22:37 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:505 fgapiserverdb get_ptv_groups - select count(*) from fg_group where lower(name)=Developers;
20170919 08:22:37 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
Passed groups: '[u'Users', u'Developers']' -> valid groups: '[u'Users', u'Developers']'
20170919 08:22:37 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:537 fgapiserverdb register_ptv_subject - select id, name from fg_user where name=00000000-0000-0000-0000-000000000000;
20170919 08:22:37 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
PTV user '00000000-0000-0000-0000-000000000000' record: '(4L, '00000000-0000-0000-0000-000000000000')'
20170919 08:22:37 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:318 fgapiserverdb register_token - insert into 
fg_token (token, subject, user_id, creation, expiry)
select TEST_TOKEN, 00000000-0000-0000-0000-000000000000, 4, now(), NULL
from dual
where (select count(*)
       from fg_token
       where token=TEST_TOKEN) = 0;
20170919 08:22:37 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
token: 'TEST_TOKEN' successfully registered
20170919 08:22:37 DEBUG ./fgapiserver.py:509 fgapiserver load_user - LoadUser: '4' - '00000000-0000-0000-0000-000000000000'
20170919 08:22:37 DEBUG ./fgapiserver.py:510 fgapiserver load_user - LoadUser: (end)
20170919 08:22:37 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserver_user.py:47 fgapiserver_user __init__ - fgUser - id: '4' - name: '00000000-0000-0000-0000-000000000000'
20170919 08:22:37 DEBUG ./fgapiserver.py:965 fgapiserver task_id - tasks(GET)/31: {}
20170919 08:22:37 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:653 fgapiserverdb get_task_record - select  id
,status
,date_format(creation, '%Y-%m-%dT%TZ') creation
,date_format(last_change, '%Y-%m-%dT%TZ') last_change
,app_id
,description
,status
,user
,iosandbox
from task
where id=31
  and status != "PURGED";
20170919 08:22:37 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:679 fgapiserverdb get_task_record - select argument
from task_arguments
where task_id=31
order by arg_id asc;
20170919 08:22:37 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:695 fgapiserverdb get_task_record - select file
      ,if(path is null or length(path)=0,          'NEEDED',          'READY') status
      ,if(path is NULL,'',path)
from task_input_file
where task_id=31
order by file_id asc;
20170919 08:22:37 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:720 fgapiserverdb get_task_record - select file
      ,if(path is NULL,'',path)
from task_output_file
where task_id=31
order by file_id asc;
20170919 08:22:37 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:747 fgapiserverdb get_task_record - select   data_name
 ,data_value
 ,data_desc
 ,data_type
 ,data_proto
 ,date_format(creation,              '%Y-%m-%dT%TZ') creation
 ,date_format(last_change,              '%Y-%m-%dT%TZ') last_change
from runtime_data
where task_id=31
order by data_id asc;
20170919 08:22:37 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
Task '31' record: '{'status': 'SUBMIT', 'description': 'tester application run', 'creation': '2017-09-19T08:04:22Z', 'iosandbox': '/tmp/258e35ac-9d11-11e7-a33d-fa163e876b0e', 'user': '00000000-0000-0000-0000-000000000000', 'id': '31', 'output_files': [{'url': '', 'name': 'output.txt'}, {'url': '', 'name': 'stdout.txt'}, {'url': '', 'name': 'stderr.txt'}], 'application': '5', 'arguments': [], 'runtime_data': [], 'input_files': [{'status': 'READY', 'url': 'file?path=%2Ftmp%2F258e35ac-9d11-11e7-a33d-fa163e876b0e&name=input.txt', 'name': 'input.txt'}], 'last_change': '2017-09-19T08:08:00Z'}'
20170919 08:22:37 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:653 fgapiserverdb get_task_record - select  id
,status
,date_format(creation, '%Y-%m-%dT%TZ') creation
,date_format(last_change, '%Y-%m-%dT%TZ') last_change
,app_id
,description
,status
,user
,iosandbox
from task
where id=31
  and status != "PURGED";
20170919 08:22:37 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:679 fgapiserverdb get_task_record - select argument
from task_arguments
where task_id=31
order by arg_id asc;
20170919 08:22:37 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:695 fgapiserverdb get_task_record - select file
      ,if(path is null or length(path)=0,          'NEEDED',          'READY') status
      ,if(path is NULL,'',path)
from task_input_file
where task_id=31
order by file_id asc;
20170919 08:22:37 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:720 fgapiserverdb get_task_record - select file
      ,if(path is NULL,'',path)
from task_output_file
where task_id=31
order by file_id asc;
20170919 08:22:37 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:747 fgapiserverdb get_task_record - select   data_name
 ,data_value
 ,data_desc
 ,data_type
 ,data_proto
 ,date_format(creation,              '%Y-%m-%dT%TZ') creation
 ,date_format(last_change,              '%Y-%m-%dT%TZ') last_change
from runtime_data
where task_id=31
order by data_id asc;
20170919 08:22:37 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
Task '31' record: '{'status': 'SUBMIT', 'description': 'tester application run', 'creation': '2017-09-19T08:04:22Z', 'iosandbox': '/tmp/258e35ac-9d11-11e7-a33d-fa163e876b0e', 'user': '00000000-0000-0000-0000-000000000000', 'id': '31', 'output_files': [{'url': '', 'name': 'output.txt'}, {'url': '', 'name': 'stdout.txt'}, {'url': '', 'name': 'stderr.txt'}], 'application': '5', 'arguments': [], 'runtime_data': [], 'input_files': [{'status': 'READY', 'url': 'file?path=%2Ftmp%2F258e35ac-9d11-11e7-a33d-fa163e876b0e&name=input.txt', 'name': 'input.txt'}], 'last_change': '2017-09-19T08:08:00Z'}'
20170919 08:22:37 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:881 fgapiserverdb get_app_detail - select id
      ,name
      ,description
      ,outcome
      ,date_format(creation, '%Y-%m-%dT%TZ') creation
      ,enabled
from application
where id=5;
20170919 08:22:37 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:900 fgapiserverdb get_app_detail - select pname
      ,pvalue
from application_parameter
where app_id=5
order by param_id asc;
20170919 08:22:37 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:921 fgapiserverdb get_app_detail - select id
      ,name
      ,description
      ,date_format(creation, '%Y-%m-%dT%TZ') creation
      ,if(enabled,'enabled','disabled') status
      ,if(vinfra,'virtual','real') status
from infrastructure
where app_id=5;
20170919 08:22:37 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:942 fgapiserverdb get_app_detail - select pname, pvalue
from infrastructure_parameter
where infra_id=6
order by param_id asc;
20170919 08:22:37 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
Details for app '5': '{'infrastructures': [{'status': 'enabled', 'description': 'SSH Test infrastructure for fgtest', 'parameters': [{'name': 'jobservice', 'value': 'ssh://localhost'}, {'name': 'username', 'value': 'fgtest_test'}, {'name': 'password', 'value': 'N9lHmocm'}], 'creation': '2017-07-07T06:42:50Z', 'virtual': 'real', 'id': '6', 'name': 'SSH Test infrastructure'}], 'description': 'FutureGateway tester application', 'parameters': [{'param_name': 'target_executor', 'param_value': 'GridEngine'}, {'param_name': 'jobdesc_executable', 'param_value': 'cp input.txt ouput.txt && hostname | tee -a output.txt'}, {'param_name': 'jobdesc_output', 'param_value': 'stdout.txt'}, {'param_name': 'jobdesc_error', 'param_value': 'stderr.txt'}], 'creation': '2017-07-07T06:42:51Z', 'enabled': True, 'outcome': 'JOB', 'id': '5', 'name': 'Tester application'}'
20170919 08:22:37 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
Task '31' info: '{'status': 'SUBMIT', 'description': 'tester application run', 'creation': '2017-09-19T08:04:22Z', 'iosandbox': '/tmp/258e35ac-9d11-11e7-a33d-fa163e876b0e', 'user': '00000000-0000-0000-0000-000000000000', 'id': '31', 'output_files': [{'url': '', 'name': 'output.txt'}, {'url': '', 'name': 'stdout.txt'}, {'url': '', 'name': 'stderr.txt'}], 'application': {'infrastructures': [{'status': 'enabled', 'description': 'SSH Test infrastructure for fgtest', 'parameters': [{'name': 'jobservice', 'value': 'ssh://localhost'}, {'name': 'username', 'value': 'fgtest_test'}, {'name': 'password', 'value': 'N9lHmocm'}], 'creation': '2017-07-07T06:42:50Z', 'virtual': 'real', 'id': '6', 'name': 'SSH Test infrastructure'}], 'description': 'FutureGateway tester application', 'parameters': [{'param_name': 'target_executor', 'param_value': 'GridEngine'}, {'param_name': 'jobdesc_executable', 'param_value': 'cp input.txt ouput.txt && hostname | tee -a output.txt'}, {'param_name': 'jobdesc_output', 'param_value': 'stdout.txt'}, {'param_name': 'jobdesc_error', 'param_value': 'stderr.txt'}], 'creation': '2017-07-07T06:42:51Z', 'enabled': True, 'outcome': 'JOB', 'id': '5', 'name': 'Tester application'}, 'arguments': [], 'runtime_data': [], 'input_files': [{'status': 'READY', 'url': 'file?path=%2Ftmp%2F258e35ac-9d11-11e7-a33d-fa163e876b0e&name=input.txt', 'name': 'input.txt'}], 'last_change': '2017-09-19T08:08:00Z'}'
20170919 08:22:37 DEBUG ./fgapiserver.py:241 fgapiserver get_task_app_id - Found app_id: '5' for task_id: '31'
20170919 08:22:37 DEBUG ./fgapiserver.py:350 fgapiserver authorize_user - AuthUser: (begin)
20170919 08:22:37 DEBUG ./fgapiserver.py:361 fgapiserver authorize_user - AuthUser: user_id: '4' - user_name: '00000000-0000-0000-0000-000000000000'
20170919 08:22:37 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:355 fgapiserverdb verify_user_role - select count(*)>0      
from fg_user        u  
    ,fg_group       g  
    ,fg_user_group ug  
    ,fg_group_role gr  
    ,fg_role        r  
where u.id=4          
  and u.id=ug.user_id  
  and g.id=ug.group_id 
  and g.id=gr.group_id 
  and r.id=gr.role_id  
  and r.name = task_view;
20170919 08:22:37 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
role(s) 'task_view' for user_id '4' is True'
20170919 08:22:37 DEBUG ./fgapiserver.py:367 fgapiserver authorize_user - AuthUser: Auth for user '4' with roles 'task_view' is True
20170919 08:22:37 DEBUG ./fgapiserver.py:396 fgapiserver authorize_user - AuthUser: checking for app_id '5'
20170919 08:22:37 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:394 fgapiserverdb verify_user_app - select count(*)>0      
from fg_user        u  
    ,fg_group       g  
    ,application    a  
    ,fg_user_group ug  
    ,fg_group_apps ga  
where u.id=4          
  and u.id=ug.user_id  
  and a.id=5          
  and a.id=ga.app_id   
  and g.id=ug.group_id 
  and g.id=ga.group_id;
20170919 08:22:37 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
User id '4' access to application id '5' is True'
20170919 08:22:37 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:611 fgapiserverdb task_exists - select name from fg_user where id = 4;
20170919 08:22:37 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:1506 fgapiserverdb get_task_list - select id
from task
where status != "PURGED"
  and user = 00000000-0000-0000-0000-000000000000
;
20170919 08:22:37 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
Task list for user '00000000-0000-0000-0000-000000000000', app 'None': '[8L, 9L, 10L, 11L, 12L, 13L, 17L, 20L, 21L, 22L, 23L, 24L, 25L, 26L, 27L, 28L, 29L, 30L, 31L, 32L]'
20170919 08:22:37 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
Task '31' exists is True
20170919 08:22:37 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:653 fgapiserverdb get_task_record - select  id
,status
,date_format(creation, '%Y-%m-%dT%TZ') creation
,date_format(last_change, '%Y-%m-%dT%TZ') last_change
,app_id
,description
,status
,user
,iosandbox
from task
where id=31
  and status != "PURGED";
20170919 08:22:37 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:679 fgapiserverdb get_task_record - select argument
from task_arguments
where task_id=31
order by arg_id asc;
20170919 08:22:37 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:695 fgapiserverdb get_task_record - select file
      ,if(path is null or length(path)=0,          'NEEDED',          'READY') status
      ,if(path is NULL,'',path)
from task_input_file
where task_id=31
order by file_id asc;
20170919 08:22:37 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:720 fgapiserverdb get_task_record - select file
      ,if(path is NULL,'',path)
from task_output_file
where task_id=31
order by file_id asc;
20170919 08:22:37 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:747 fgapiserverdb get_task_record - select   data_name
 ,data_value
 ,data_desc
 ,data_type
 ,data_proto
 ,date_format(creation,              '%Y-%m-%dT%TZ') creation
 ,date_format(last_change,              '%Y-%m-%dT%TZ') last_change
from runtime_data
where task_id=31
order by data_id asc;
20170919 08:22:37 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
Task '31' record: '{'status': 'SUBMIT', 'description': 'tester application run', 'creation': '2017-09-19T08:04:22Z', 'iosandbox': '/tmp/258e35ac-9d11-11e7-a33d-fa163e876b0e', 'user': '00000000-0000-0000-0000-000000000000', 'id': '31', 'output_files': [{'url': '', 'name': 'output.txt'}, {'url': '', 'name': 'stdout.txt'}, {'url': '', 'name': 'stderr.txt'}], 'application': '5', 'arguments': [], 'runtime_data': [], 'input_files': [{'status': 'READY', 'url': 'file?path=%2Ftmp%2F258e35ac-9d11-11e7-a33d-fa163e876b0e&name=input.txt', 'name': 'input.txt'}], 'last_change': '2017-09-19T08:08:00Z'}'
20170919 08:22:37 INFO /home/futuregateway/devel/fgAPIServer/venv/local/lib/python2.7/site-packages/werkzeug/_internal.py:87 _internal _log - 127.0.0.1 - - [19/Sep/2017 08:22:37] "GET /v1.0/tasks/31 HTTP/1.1" 200 -
20170919 08:32:11 DEBUG ./fgapiserver.py:101 fgapiserver <module> - fgAPIServer is starting ...
20170919 08:32:11 DEBUG ./fgapiserver.py:102 fgapiserver <module> - Configuration messages ...
FutureGateway API Server config
----------------------------------
{
    "fgapisrv_lnkptvflag": "True", 
    "fgapisrv_secret": "0123456789ABCDEF", 
    "fgjson_indent": "4", 
    "fgapisrv_ptvuser": "tokenver_user", 
    "fgapisrv_host": "0.0.0.0", 
    "fgapisrv_db_host": "localhost", 
    "fgapisrv_notoken": "False", 
    "fgapisrv_key": "", 
    "fgapisrv_db_name": "fgapiserver", 
    "fgapisrv_debug": "True", 
    "fgapisrv_crt": "", 
    "fgapisrv_ptvdefgrp": "administrator", 
    "fgapiserver_name": "FutureGateway API Server", 
    "fgapisrv_geappid": "10000", 
    "fgapiver": "v1.0", 
    "fgapisrv_ptvdefusr": "futuregateway", 
    "fgapisrv_logcfg": "fgapiserver_log.conf", 
    "fgapisrv_port": "8888", 
    "fgapisrv_ptvendpoint": "http://localhost:8889/checktoken", 
    "fgapisrv_iosandbox": "/tmp", 
    "fgapisrv_db_port": "3306", 
    "fgapisrv_dbver": "0.0.10", 
    "fgapisrv_ptvpass": "tokenver_pass", 
    "fgapisrv_db_pass": "fgapiserver_password", 
    "fgapisrv_ptvmapfile": "fgapiserver_ptvmap.json", 
    "fgapisrv_notokenusr": "test", 
    "fgapisrv_db_user": "fgapiserver"
}

20170919 08:32:11 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:115 fgapiserverdb __init__ - [DB settings]
 host: 'localhost'
 port: '3306'
 user: 'fgapiserver'
 pass: 'fgapiserver_password'
 name: 'fgapiserver'
 iosandbox_dir: '/tmp'
 geapiserverappid: '10000'

20170919 08:32:11 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:205 fgapiserverdb get_db_version - select version from db_patches order by id desc limit 1;
20170919 08:32:11 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
fgapiserver DB schema version: '0.0.10'
20170919 08:32:11 DEBUG ./fgapiserver.py:180 fgapiserver check_db_ver - Check database version passed
20170919 08:32:11 INFO /home/futuregateway/devel/fgAPIServer/venv/local/lib/python2.7/site-packages/werkzeug/_internal.py:87 _internal _log -  * Running on http://0.0.0.0:8888/ (Press CTRL+C to quit)
20170919 08:32:11 INFO /home/futuregateway/devel/fgAPIServer/venv/local/lib/python2.7/site-packages/werkzeug/_internal.py:87 _internal _log -  * Restarting with stat
20170919 08:32:12 DEBUG ./fgapiserver.py:101 fgapiserver <module> - fgAPIServer is starting ...
20170919 08:32:12 DEBUG ./fgapiserver.py:102 fgapiserver <module> - Configuration messages ...
FutureGateway API Server config
----------------------------------
{
    "fgapisrv_lnkptvflag": "True", 
    "fgapisrv_secret": "0123456789ABCDEF", 
    "fgjson_indent": "4", 
    "fgapisrv_ptvuser": "tokenver_user", 
    "fgapisrv_host": "0.0.0.0", 
    "fgapisrv_db_host": "localhost", 
    "fgapisrv_notoken": "False", 
    "fgapisrv_key": "", 
    "fgapisrv_db_name": "fgapiserver", 
    "fgapisrv_debug": "True", 
    "fgapisrv_crt": "", 
    "fgapisrv_ptvdefgrp": "administrator", 
    "fgapiserver_name": "FutureGateway API Server", 
    "fgapisrv_geappid": "10000", 
    "fgapiver": "v1.0", 
    "fgapisrv_ptvdefusr": "futuregateway", 
    "fgapisrv_logcfg": "fgapiserver_log.conf", 
    "fgapisrv_port": "8888", 
    "fgapisrv_ptvendpoint": "http://localhost:8889/checktoken", 
    "fgapisrv_iosandbox": "/tmp", 
    "fgapisrv_db_port": "3306", 
    "fgapisrv_dbver": "0.0.10", 
    "fgapisrv_ptvpass": "tokenver_pass", 
    "fgapisrv_db_pass": "fgapiserver_password", 
    "fgapisrv_ptvmapfile": "fgapiserver_ptvmap.json", 
    "fgapisrv_notokenusr": "test", 
    "fgapisrv_db_user": "fgapiserver"
}

20170919 08:32:12 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:115 fgapiserverdb __init__ - [DB settings]
 host: 'localhost'
 port: '3306'
 user: 'fgapiserver'
 pass: 'fgapiserver_password'
 name: 'fgapiserver'
 iosandbox_dir: '/tmp'
 geapiserverappid: '10000'

20170919 08:32:12 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:205 fgapiserverdb get_db_version - select version from db_patches order by id desc limit 1;
20170919 08:32:12 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
fgapiserver DB schema version: '0.0.10'
20170919 08:32:12 DEBUG ./fgapiserver.py:180 fgapiserver check_db_ver - Check database version passed
20170919 08:32:12 WARNING /home/futuregateway/devel/fgAPIServer/venv/local/lib/python2.7/site-packages/werkzeug/_internal.py:87 _internal _log -  * Debugger is active!
20170919 08:32:12 INFO /home/futuregateway/devel/fgAPIServer/venv/local/lib/python2.7/site-packages/werkzeug/_internal.py:87 _internal _log -  * Debugger PIN: 313-879-212
20170919 08:32:42 DEBUG ./fgapiserver_ptv.py:87 fgapiserver_ptv <module> - Configuration messages ...
FutureGateway API Server config
----------------------------------
{
    "fgapisrv_lnkptvflag": "True", 
    "fgapisrv_secret": "0123456789ABCDEF", 
    "fgjson_indent": "4", 
    "fgapisrv_ptvuser": "tokenver_user", 
    "fgapisrv_host": "0.0.0.0", 
    "fgapisrv_db_host": "localhost", 
    "fgapisrv_notoken": "False", 
    "fgapisrv_key": "", 
    "fgapisrv_db_name": "fgapiserver", 
    "fgapisrv_debug": "True", 
    "fgapisrv_crt": "", 
    "fgapisrv_ptvdefgrp": "administrator", 
    "fgapiserver_name": "FutureGateway API Server", 
    "fgapisrv_geappid": "10000", 
    "fgapiver": "v1.0", 
    "fgapisrv_ptvdefusr": "futuregateway", 
    "fgapisrv_logcfg": "fgapiserver_log.conf", 
    "fgapisrv_port": "8888", 
    "fgapisrv_ptvendpoint": "http://localhost:8889/checktoken", 
    "fgapisrv_iosandbox": "/tmp", 
    "fgapisrv_db_port": "3306", 
    "fgapisrv_dbver": "0.0.10", 
    "fgapisrv_ptvpass": "tokenver_pass", 
    "fgapisrv_db_pass": "fgapiserver_password", 
    "fgapisrv_ptvmapfile": "fgapiserver_ptvmap.json", 
    "fgapisrv_notokenusr": "test", 
    "fgapisrv_db_user": "fgapiserver"
}

20170919 08:32:42 INFO /home/futuregateway/fgAPIServer/venv/local/lib/python2.7/site-packages/werkzeug/_internal.py:87 _internal _log -  * Running on http://0.0.0.0:8889/ (Press CTRL+C to quit)
20170919 08:32:42 INFO /home/futuregateway/fgAPIServer/venv/local/lib/python2.7/site-packages/werkzeug/_internal.py:87 _internal _log -  * Restarting with stat
20170919 08:32:43 DEBUG ./fgapiserver_ptv.py:87 fgapiserver_ptv <module> - Configuration messages ...
FutureGateway API Server config
----------------------------------
{
    "fgapisrv_lnkptvflag": "True", 
    "fgapisrv_secret": "0123456789ABCDEF", 
    "fgjson_indent": "4", 
    "fgapisrv_ptvuser": "tokenver_user", 
    "fgapisrv_host": "0.0.0.0", 
    "fgapisrv_db_host": "localhost", 
    "fgapisrv_notoken": "False", 
    "fgapisrv_key": "", 
    "fgapisrv_db_name": "fgapiserver", 
    "fgapisrv_debug": "True", 
    "fgapisrv_crt": "", 
    "fgapisrv_ptvdefgrp": "administrator", 
    "fgapiserver_name": "FutureGateway API Server", 
    "fgapisrv_geappid": "10000", 
    "fgapiver": "v1.0", 
    "fgapisrv_ptvdefusr": "futuregateway", 
    "fgapisrv_logcfg": "fgapiserver_log.conf", 
    "fgapisrv_port": "8888", 
    "fgapisrv_ptvendpoint": "http://localhost:8889/checktoken", 
    "fgapisrv_iosandbox": "/tmp", 
    "fgapisrv_db_port": "3306", 
    "fgapisrv_dbver": "0.0.10", 
    "fgapisrv_ptvpass": "tokenver_pass", 
    "fgapisrv_db_pass": "fgapiserver_password", 
    "fgapisrv_ptvmapfile": "fgapiserver_ptvmap.json", 
    "fgapisrv_notokenusr": "test", 
    "fgapisrv_db_user": "fgapiserver"
}

20170919 08:32:43 WARNING /home/futuregateway/fgAPIServer/venv/local/lib/python2.7/site-packages/werkzeug/_internal.py:87 _internal _log -  * Debugger is active!
20170919 08:32:43 INFO /home/futuregateway/fgAPIServer/venv/local/lib/python2.7/site-packages/werkzeug/_internal.py:87 _internal _log -  * Debugger PIN: 117-152-255
20170925 08:00:39 INFO /home/futuregateway/devel/fgAPIServer/venv/local/lib/python2.7/site-packages/werkzeug/_internal.py:87 _internal _log -  * Detected change in '/home/futuregateway/devel/fgAPIServer/fgapiserver.py', reloading
20170925 08:00:39 INFO /home/futuregateway/devel/fgAPIServer/venv/local/lib/python2.7/site-packages/werkzeug/_internal.py:87 _internal _log -  * Restarting with stat
20170925 08:00:40 DEBUG ./fgapiserver.py:101 fgapiserver <module> - fgAPIServer is starting ...
20170925 08:00:40 DEBUG ./fgapiserver.py:102 fgapiserver <module> - Configuration messages ...
FutureGateway API Server config
----------------------------------
{
    "fgapisrv_lnkptvflag": "True", 
    "fgapisrv_secret": "0123456789ABCDEF", 
    "fgjson_indent": "4", 
    "fgapisrv_ptvuser": "tokenver_user", 
    "fgapisrv_host": "0.0.0.0", 
    "fgapisrv_db_host": "localhost", 
    "fgapisrv_notoken": "False", 
    "fgapisrv_key": "", 
    "fgapisrv_db_name": "fgapiserver", 
    "fgapisrv_debug": "True", 
    "fgapisrv_crt": "", 
    "fgapisrv_ptvdefgrp": "administrator", 
    "fgapiserver_name": "FutureGateway API Server", 
    "fgapisrv_geappid": "10000", 
    "fgapiver": "v1.0", 
    "fgapisrv_ptvdefusr": "futuregateway", 
    "fgapisrv_logcfg": "fgapiserver_log.conf", 
    "fgapisrv_port": "8888", 
    "fgapisrv_ptvendpoint": "http://localhost:8889/checktoken", 
    "fgapisrv_iosandbox": "/tmp", 
    "fgapisrv_db_port": "3306", 
    "fgapisrv_dbver": "0.0.10", 
    "fgapisrv_ptvpass": "tokenver_pass", 
    "fgapisrv_db_pass": "fgapiserver_password", 
    "fgapisrv_ptvmapfile": "fgapiserver_ptvmap.json", 
    "fgapisrv_notokenusr": "test", 
    "fgapisrv_db_user": "fgapiserver"
}

20170925 08:00:40 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:115 fgapiserverdb __init__ - [DB settings]
 host: 'localhost'
 port: '3306'
 user: 'fgapiserver'
 pass: 'fgapiserver_password'
 name: 'fgapiserver'
 iosandbox_dir: '/tmp'
 geapiserverappid: '10000'

20170925 08:00:40 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:205 fgapiserverdb get_db_version - select version from db_patches order by id desc limit 1;
20170925 08:00:40 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
fgapiserver DB schema version: '0.0.10'
20170925 08:00:40 DEBUG ./fgapiserver.py:180 fgapiserver check_db_ver - Check database version passed
20170925 08:00:40 WARNING /home/futuregateway/devel/fgAPIServer/venv/local/lib/python2.7/site-packages/werkzeug/_internal.py:87 _internal _log -  * Debugger is active!
20170925 08:00:40 INFO /home/futuregateway/devel/fgAPIServer/venv/local/lib/python2.7/site-packages/werkzeug/_internal.py:87 _internal _log -  * Debugger PIN: 313-879-212
20170925 08:05:07 INFO /home/futuregateway/devel/fgAPIServer/venv/local/lib/python2.7/site-packages/werkzeug/_internal.py:87 _internal _log -  * Detected change in '/home/futuregateway/devel/fgAPIServer/fgapiserverdb.py', reloading
20170925 08:05:07 INFO /home/futuregateway/devel/fgAPIServer/venv/local/lib/python2.7/site-packages/werkzeug/_internal.py:87 _internal _log -  * Restarting with stat
20170925 08:05:07 DEBUG ./fgapiserver.py:101 fgapiserver <module> - fgAPIServer is starting ...
20170925 08:05:07 DEBUG ./fgapiserver.py:102 fgapiserver <module> - Configuration messages ...
FutureGateway API Server config
----------------------------------
{
    "fgapisrv_lnkptvflag": "True", 
    "fgapisrv_secret": "0123456789ABCDEF", 
    "fgjson_indent": "4", 
    "fgapisrv_ptvuser": "tokenver_user", 
    "fgapisrv_host": "0.0.0.0", 
    "fgapisrv_db_host": "localhost", 
    "fgapisrv_notoken": "False", 
    "fgapisrv_key": "", 
    "fgapisrv_db_name": "fgapiserver", 
    "fgapisrv_debug": "True", 
    "fgapisrv_crt": "", 
    "fgapisrv_ptvdefgrp": "administrator", 
    "fgapiserver_name": "FutureGateway API Server", 
    "fgapisrv_geappid": "10000", 
    "fgapiver": "v1.0", 
    "fgapisrv_ptvdefusr": "futuregateway", 
    "fgapisrv_logcfg": "fgapiserver_log.conf", 
    "fgapisrv_port": "8888", 
    "fgapisrv_ptvendpoint": "http://localhost:8889/checktoken", 
    "fgapisrv_iosandbox": "/tmp", 
    "fgapisrv_db_port": "3306", 
    "fgapisrv_dbver": "0.0.10", 
    "fgapisrv_ptvpass": "tokenver_pass", 
    "fgapisrv_db_pass": "fgapiserver_password", 
    "fgapisrv_ptvmapfile": "fgapiserver_ptvmap.json", 
    "fgapisrv_notokenusr": "test", 
    "fgapisrv_db_user": "fgapiserver"
}

20170925 08:05:07 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:115 fgapiserverdb __init__ - [DB settings]
 host: 'localhost'
 port: '3306'
 user: 'fgapiserver'
 pass: 'fgapiserver_password'
 name: 'fgapiserver'
 iosandbox_dir: '/tmp'
 geapiserverappid: '10000'

20170925 08:05:07 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:205 fgapiserverdb get_db_version - select version from db_patches order by id desc limit 1;
20170925 08:05:07 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
fgapiserver DB schema version: '0.0.10'
20170925 08:05:07 DEBUG ./fgapiserver.py:180 fgapiserver check_db_ver - Check database version passed
20170925 08:05:07 WARNING /home/futuregateway/devel/fgAPIServer/venv/local/lib/python2.7/site-packages/werkzeug/_internal.py:87 _internal _log -  * Debugger is active!
20170925 08:05:07 INFO /home/futuregateway/devel/fgAPIServer/venv/local/lib/python2.7/site-packages/werkzeug/_internal.py:87 _internal _log -  * Debugger PIN: 313-879-212
20170925 14:56:20 INFO /home/futuregateway/devel/fgAPIServer/venv/local/lib/python2.7/site-packages/werkzeug/_internal.py:87 _internal _log -  * Detected change in '/home/futuregateway/devel/fgAPIServer/fgapiserver.py', reloading
20170925 14:56:20 INFO /home/futuregateway/devel/fgAPIServer/venv/local/lib/python2.7/site-packages/werkzeug/_internal.py:87 _internal _log -  * Restarting with stat
20170925 14:56:21 DEBUG ./fgapiserver.py:101 fgapiserver <module> - fgAPIServer is starting ...
20170925 14:56:21 DEBUG ./fgapiserver.py:102 fgapiserver <module> - Configuration messages ...
FutureGateway API Server config
----------------------------------
{
    "fgapisrv_lnkptvflag": "True", 
    "fgapisrv_secret": "0123456789ABCDEF", 
    "fgjson_indent": "4", 
    "fgapisrv_ptvuser": "tokenver_user", 
    "fgapisrv_host": "0.0.0.0", 
    "fgapisrv_db_host": "localhost", 
    "fgapisrv_notoken": "False", 
    "fgapisrv_key": "", 
    "fgapisrv_db_name": "fgapiserver", 
    "fgapisrv_debug": "True", 
    "fgapisrv_crt": "", 
    "fgapisrv_ptvdefgrp": "administrator", 
    "fgapiserver_name": "FutureGateway API Server", 
    "fgapisrv_geappid": "10000", 
    "fgapiver": "v1.0", 
    "fgapisrv_ptvdefusr": "futuregateway", 
    "fgapisrv_logcfg": "fgapiserver_log.conf", 
    "fgapisrv_port": "8888", 
    "fgapisrv_ptvendpoint": "http://localhost:8889/checktoken", 
    "fgapisrv_iosandbox": "/tmp", 
    "fgapisrv_db_port": "3306", 
    "fgapisrv_dbver": "0.0.10", 
    "fgapisrv_ptvpass": "tokenver_pass", 
    "fgapisrv_db_pass": "fgapiserver_password", 
    "fgapisrv_ptvmapfile": "fgapiserver_ptvmap.json", 
    "fgapisrv_notokenusr": "test", 
    "fgapisrv_db_user": "fgapiserver"
}

20170925 14:56:21 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:115 fgapiserverdb __init__ - [DB settings]
 host: 'localhost'
 port: '3306'
 user: 'fgapiserver'
 pass: 'fgapiserver_password'
 name: 'fgapiserver'
 iosandbox_dir: '/tmp'
 geapiserverappid: '10000'

20170925 14:56:21 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:205 fgapiserverdb get_db_version - select version from db_patches order by id desc limit 1;
20170925 14:56:21 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
fgapiserver DB schema version: '0.0.10'
20170925 14:56:21 DEBUG ./fgapiserver.py:180 fgapiserver check_db_ver - Check database version passed
20170925 14:56:21 WARNING /home/futuregateway/devel/fgAPIServer/venv/local/lib/python2.7/site-packages/werkzeug/_internal.py:87 _internal _log -  * Debugger is active!
20170925 14:56:21 INFO /home/futuregateway/devel/fgAPIServer/venv/local/lib/python2.7/site-packages/werkzeug/_internal.py:87 _internal _log -  * Debugger PIN: 313-879-212
20170925 14:58:28 INFO /home/futuregateway/devel/fgAPIServer/venv/local/lib/python2.7/site-packages/werkzeug/_internal.py:87 _internal _log -  * Detected change in '/home/futuregateway/devel/fgAPIServer/fgapiserverdb.py', reloading
20170925 14:58:28 INFO /home/futuregateway/devel/fgAPIServer/venv/local/lib/python2.7/site-packages/werkzeug/_internal.py:87 _internal _log -  * Restarting with stat
20170925 14:58:29 DEBUG ./fgapiserver.py:101 fgapiserver <module> - fgAPIServer is starting ...
20170925 14:58:29 DEBUG ./fgapiserver.py:102 fgapiserver <module> - Configuration messages ...
FutureGateway API Server config
----------------------------------
{
    "fgapisrv_lnkptvflag": "True", 
    "fgapisrv_secret": "0123456789ABCDEF", 
    "fgjson_indent": "4", 
    "fgapisrv_ptvuser": "tokenver_user", 
    "fgapisrv_host": "0.0.0.0", 
    "fgapisrv_db_host": "localhost", 
    "fgapisrv_notoken": "False", 
    "fgapisrv_key": "", 
    "fgapisrv_db_name": "fgapiserver", 
    "fgapisrv_debug": "True", 
    "fgapisrv_crt": "", 
    "fgapisrv_ptvdefgrp": "administrator", 
    "fgapiserver_name": "FutureGateway API Server", 
    "fgapisrv_geappid": "10000", 
    "fgapiver": "v1.0", 
    "fgapisrv_ptvdefusr": "futuregateway", 
    "fgapisrv_logcfg": "fgapiserver_log.conf", 
    "fgapisrv_port": "8888", 
    "fgapisrv_ptvendpoint": "http://localhost:8889/checktoken", 
    "fgapisrv_iosandbox": "/tmp", 
    "fgapisrv_db_port": "3306", 
    "fgapisrv_dbver": "0.0.10", 
    "fgapisrv_ptvpass": "tokenver_pass", 
    "fgapisrv_db_pass": "fgapiserver_password", 
    "fgapisrv_ptvmapfile": "fgapiserver_ptvmap.json", 
    "fgapisrv_notokenusr": "test", 
    "fgapisrv_db_user": "fgapiserver"
}

20170925 14:58:29 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:115 fgapiserverdb __init__ - [DB settings]
 host: 'localhost'
 port: '3306'
 user: 'fgapiserver'
 pass: 'fgapiserver_password'
 name: 'fgapiserver'
 iosandbox_dir: '/tmp'
 geapiserverappid: '10000'

20170925 14:58:29 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:205 fgapiserverdb get_db_version - select version from db_patches order by id desc limit 1;
20170925 14:58:29 DEBUG /home/futuregateway/devel/fgAPIServer/fgapiserverdb.py:150 fgapiserverdb query_done - Query done message:
fgapiserver DB schema version: '0.0.10'
20170925 14:58:29 DEBUG ./fgapiserver.py:180 fgapiserver check_db_ver - Check database version passed
20170925 14:58:29 WARNING /home/futuregateway/devel/fgAPIServer/venv/local/lib/python2.7/site-packages/werkzeug/_internal.py:87 _internal _log -  * Debugger is active!
20170925 14:58:29 INFO /home/futuregateway/devel/fgAPIServer/venv/local/lib/python2.7/site-packages/werkzeug/_internal.py:87 _internal _log -  * Debugger PIN: 313-879-212
