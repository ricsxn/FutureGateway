# fgtest
The script `fgtest.sh` is bash script that autimatically performs a set of functional tests normally executed against a baseline installation of the FutureGateway. In the baseline instalaltions test results will be automatically published under `http://<futuregateway_host>/fgtest/`
The final report generated by this test could be also useful as an usage reference for all FutureGateway APIs.

## Execution
This script must be executed as *super-user* with **sudo** or using **root** account. The execution of the `fgtest.sh` script have to be done inside the `fgAPIServer/fgtest directory`
Below an example:
```
     # cd /home/futuregateway/fgAPIServer/fgtest
     # ./fgtest.sh
```
The script will perform all defined tests and for each of them will create reports as HTML pages under the `fgtest/www` directory. All tests are collected and listed in the fgtest' **index** page. Optionally it is possible to generate a PDF document containing the whole tests switching on a flag inside the fgtest.sh script.

## Publishing results
The HTML reports available under the fgtest/www directory can be published by any web server. To improve the graphic layout the installation of bootstrap and jquery is higly suggested; see **Pre-requisites** section for more details. 
Below configuration is appliable under apache web server:
```
# cat >/etc/apache2/sites-available/fgtest.conf <<EOF
Alias /fgtest /home/futuregateway/fgAPIServer/fgtest/www
<Directory /home/futuregateway/fgAPIServer/fgtest/www>
  Order deny,allow
  Allow from all
  Options All
  AllowOverride All
  Require all granted
</Directory>
EOF
```
After inserting the new httpd endpoint; restart apache.

## Pre-requisites
### wkhtmltopdf
This tool is necessary to generate the PDF version of the test report. It also needs other tools such as **pdftk** and **xvfb**.
Below installation example for **apt** based systems:
```
      apt-get install pdftk
      apt-get install xvfb
      apt-get install wkhtmltopdf
```
### jquery
This tool is necessary by **bootstrap** scripts.
```
      # wget https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js -O www/js/jquery.min.js
```
### bootstrap
This tool is necessary to improve the graphic layout quality of the generated reports.
```
      # wget https://github.com/twbs/bootstrap/releases/download/v3.3.7/bootstrap-3.3.7-dist.zip
      # unzip bootstrap-3.3.7-dist.zip
      # cd www/css
      # ln -s ../../bootstrap-3.3.7-dist/css/bootstrap-theme.min.css bootstrap-theme.min.css
      # ln -s ../../bootstrap-3.3.7-dist/css/bootstrap-theme.min.css.map bootstrap-theme.min.css.map
      # ln -s ../../bootstrap-3.3.7-dist/css/bootstrap.min.css bootstrap.min.css
      # ln -s ../../bootstrap-3.3.7-dist/css/bootstrap.min.css.map bootstrap.min.css.map
      # cd ../fonts
      # ln -s ../../bootstrap-3.3.7-dist/fonts/ fonts
      # cd ../js
      # ln -s ../../bootstrap-3.3.7-dist/js/bootstrap.min.js bootstrap.min.js 
 ```
### sshpass
This interesting software allows to execute ssh connections providing password non-interactively. Test script requires that to test the ssh test user.
Below some ways to install it on several systems:
```
      sudo apt-get install sshpass (ubuntu)
      yum install sshpass (yum based)
      dnf install sshpass (fedora)
```


